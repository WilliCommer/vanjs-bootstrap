{"version":3,"file":"lib.umd.js","sources":["../src/select-options.js","../src/form-controls.js","../src/modal.js","../src/navbar.js","../src/i18n.js","../src/icon-map.js","../src/drag-sort.js","../src/tag-input.js","../src/index.js"],"sourcesContent":["/**\r\n \r\nInput:\r\n    'a,b,c'\r\nor\r\n    ['a','b'...]\r\nor\r\n    [['text1',1],['text2',2]]\r\nor\r\n    [{\r\n        value: 3,\r\n        ['children' || 'text' || 'displayValue']\r\n    } \r\n\r\n\r\noutput:\r\n    [{\r\n        value: 1,\r\n        children: 'text 1',\r\n    },{\r\n        value: 2,\r\n        children: 'text 2',\r\n    }]    \r\n\r\n\r\nusage:\r\n    input(\r\n        {type: 'select', value, oninput},\r\n        selectOptions(optionList, true)\r\n    )\r\n\r\n\r\n\r\n\r\nMerge and Translate\r\n\r\nconst translate = txt => (txt==='None,Left,Right') ? 'Nix,Links,Rechts' : txt;\r\n\r\nInput:\r\n    {\r\n        value: ',1,2',                          // required,    array acepted\r\n        text:  translate('None,Left,Right'),    // should,      array acepted\r\n    }\r\n\r\noutput:    \r\n    [{\r\n        value:      '',\r\n        children:   'Nix',\r\n    },{\r\n        value:      1,\r\n        children:   'Links',\r\n    }]    \r\n    },{\r\n        value:      2,\r\n        children:   'Rechts',\r\n    }]    \r\n\r\n\r\n  \r\n */\r\n\r\n\r\n\r\n\r\n\r\n    \r\nimport van from 'vanjs-core';\r\n\r\nconst {option} = van.tags;\r\n\r\nconst log = 1 ? console.warn : ()=>{};\r\n\r\nexport default function parseSelectOptions (value, dom, selected) {\r\n\r\n    // check input value\r\n\r\n    if (value && !Array.isArray(value) && typeof value === 'object' && !!value.value )\r\n        value = mergeAndTranslate(value);\r\n    \r\n    value = toArray(value || [], true);\r\n\r\n    value = value.map( \r\n\r\n        function( option ) {\r\n\r\n            let result = {                          // object template for one <option>\r\n                value:      '',\r\n                children:   '',\r\n                // key:        index + 1\r\n            };\r\n\r\n            // case: empty\r\n\r\n            if (!option) return result;\r\n\r\n\r\n            // case: [['a',1],['b']]\r\n\r\n            if (Array.isArray(option)) {\r\n                if (option.length > 0) {\r\n                    result.value    = option[0];\r\n                    result.children = option[0];\r\n                }\r\n                if (option.length > 1) {\r\n                    result.value    = option[1];\r\n                }\r\n                return result;\r\n            };\r\n            \r\n            // case: [{value: ...}, ...]\r\n\r\n            if (typeof option === 'object') {\r\n                result.value    = option.value;\r\n                result.children = option.value;\r\n                ['children','text','displayValue']\r\n                .some( key => {\r\n                    if (option[key] !== undefined) {\r\n                        result.children = option[key];\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                })\r\n                return result;\r\n            }\r\n\r\n            \r\n            // case: ['a','b'...]\r\n\r\n            result.value    = option;\r\n            result.children = option;\r\n            return result;\r\n        }\r\n    );\r\n\r\n\r\n    return dom \r\n        ? value.map( o => {\r\n            let attr = {value: o.value};\r\n            if(selected !== undefined && o.value === selected) attr.selected=true;\r\n            return option( attr, o.children )\r\n        }) \r\n        : value;\r\n\r\n}\r\n\r\n\r\n\r\nfunction toArray (value, warn) {\r\n    if (!value) return [];\r\n    if (typeof value === 'string') \r\n        value = value.split(',');\r\n    if (!Array.isArray(value)) {\r\n        warn && log('parseSelectOptions value invalid');\r\n        value = [];\r\n    }\r\n    return value;\r\n}\r\n\r\n\r\n\r\nfunction mergeAndTranslate (obj) {\r\n\r\n    var {value,text} = obj;\r\n    if (!value) \r\n        return [];\r\n    value   = toArray(value, true);\r\n    text    = toArray(text, false);\r\n\r\n    return (\r\n        value.map( (v,i) => ({\r\n            value:  v,\r\n            text:   text[i]\r\n        }))\r\n    )\r\n}\r\n","import van from 'vanjs-core';\r\nimport selectOptions from './select-options';\r\n// import {selectOptions} from 'vanjs-bootstrap';\r\n\r\nconst {button, div, input, label, textarea, select} = van.tags;\r\n\r\n\r\nexport var typeMap = new Map();\r\n\r\ntypeMap.set( 'text',            Input);\r\ntypeMap.set( 'textarea',        Textarea);\r\ntypeMap.set( 'select',          SelectInput);\r\ntypeMap.set( 'radioselect',     RadioSelectInput);\r\ntypeMap.set( 'checkbox',        FormCheckInput);\r\ntypeMap.set( 'radio',           FormCheckInput);\r\ntypeMap.set( 'switch',          FormCheckInput);\r\ntypeMap.set( 'combobox',        ComboboxInput);\r\n\r\n\r\nexport function FormLabel({class: clas, bsSize, col, ...props}, children) {\r\n    const cl = () => {\r\n        let res = 'form-label';\r\n        if(van.val(col)) {\r\n            res = 'col-form-label';\r\n            if(van.val(bsSize)) {\r\n                res += ' col-'+van.val(bsSize)+'-'+van.val(col)+' col-form-label-'+van.val(bsSize);\r\n            } else {\r\n                res += ' col-'+van.val(col);\r\n            }\r\n        } else {\r\n            if(van.val(bsSize)) {\r\n                res += ' col-form-label-'+van.val(bsSize);\r\n            }\r\n        }\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    return label({class: cl, ...props}, children);\r\n}\r\n\r\n\r\nexport function Input({class: clas, isvalid, bsSize, ...props}) {\r\n    const cl = () => {\r\n        let res = 'form-control';\r\n        if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        if(isvalid != undefined) res += van.val(isvalid) ? ' is-valid' : ' is-invalid';\r\n        return res;\r\n    }\r\n    return input({class: cl, ...props});\r\n}\r\n\r\n\r\nexport function Textarea({class: clas, isvalid, bsSize, ...props}) {\r\n    const cl = () => {\r\n        let res = 'form-control';\r\n        if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        if(isvalid != undefined) res += van.val(isvalid) ? ' is-valid' : ' is-invalid';\r\n        return res;\r\n    }\r\n    return textarea({class: cl, ...props});\r\n}\r\n\r\n\r\n\r\nexport function SelectInput ({class: clas, isvalid, bsSize, ...props}) {\r\n    const cl = () => {\r\n        let res = 'form-select';\r\n        if(van.val(bsSize)) res += ' form-select-' + van.val(bsSize);\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        if(isvalid != undefined) res += van.val(isvalid) ? ' is-valid' : ' is-invalid';\r\n        return res;\r\n    }\r\n\r\n    let { options = [],  ...rest } = props;\r\n    if (typeof options !== 'function') {\r\n        options = selectOptions(options, true, props.value);\r\n    } else {\r\n        options = options()\r\n    }\r\n    return select({class: cl, ...rest}, options);\r\n}\r\n\r\n\r\n\r\nexport function RadioSelectInput (args) {\r\n\r\n    var {\r\n        options, class: clas, bsSize, inline, id,\r\n        oninput, name, value, disabled, isvalid,\r\n        ...props\r\n    } = args;\r\n\r\n    name = name || Math.random().toString(36).substring(2, 9);\r\n    id = id || 'rgi_' + name\r\n    options = selectOptions(options);\r\n\r\n    const iteminput = ev => {\r\n        let value = ev.target.value;\r\n        oninput && oninput({target: { \r\n            name, \r\n            value, \r\n            type:   'radiogroup'\r\n        }});\r\n    }\r\n\r\n    const items = options.map( (option, index) => {\r\n        let itemId = id+'_'+index;\r\n        return div({\r\n            class: 'form-check' + (inline ? ' form-check-inline' : '')\r\n            },\r\n            input({\r\n                class:      'form-check-input',\r\n                type:       'radio',\r\n                id:         itemId,\r\n                value:      option.value,\r\n                name,\r\n                checked:    value === option.value,\r\n                oninput:    iteminput,\r\n                disabled,\r\n            }),\r\n            label({ class: 'form-check-label', for: itemId }, option.children)\r\n        );\r\n    });\r\n\r\n    return div({\r\n        class: () => {\r\n            let res = 'form-control';\r\n            if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n            if(van.val(clas)) res += ' ' + van.val(clas);\r\n            if(isvalid != undefined) res += van.val(isvalid) ? ' is-valid' : ' is-invalid';\r\n            return res;\r\n            },\r\n            disabled,\r\n            ...props\r\n        },\r\n        items,\r\n    )\r\n}\r\n\r\n\r\n\r\nexport function FormCheckInput ({label: clabel, type, class: clas, style, bsSize, reverse, id, value, isvalid, ...props}, ...children) {\r\n\r\n    id = id || Math.random().toString(36).substring(2, 9);\r\n\r\n    var isSwitch = type === 'switch';\r\n\r\n    if(isSwitch) type = 'checkbox';\r\n\r\n    const oninput = ev => {\r\n        ev.stopPropagation();\r\n        var {checked, name, type} = ev.target;\r\n        checked = !!checked;\r\n        props.oninput({\r\n            target: {\r\n                value: checked,\r\n                checked, name, type\r\n            }\r\n        });\r\n    }\r\n\r\n    const Label = () => {\r\n        if (!clabel) {\r\n            return null;\r\n        }\r\n        return label({class: 'form-check-label', for: id}, clabel);\r\n    }\r\n\r\n    return div({\r\n        class: () => {\r\n            let res = 'form-check';\r\n            if(isSwitch) res += ' form-switch';\r\n            if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n            if(van.val(reverse)) res += ' form-check-reverse';\r\n            if(van.val(clas)) res += ' ' + van.val(clas);\r\n            return res;\r\n        },\r\n        style,\r\n        },\r\n        input({\r\n            ...props,\r\n            class: () => {\r\n                let res = 'form-check-input';\r\n                if(isvalid != undefined) res += van.val(isvalid) ? ' is-valid' : ' is-invalid';\r\n                return res;\r\n            },\r\n            id,\r\n            type,\r\n            checked: value || false,\r\n            oninput,\r\n            role: isSwitch ? 'switch' : undefined,\r\n            },\r\n        ),\r\n        Label,\r\n        ...children\r\n    )\r\n}\r\n\r\n\r\nexport const SwitchInput = props => FormCheckInput({...props, type: 'switch'});\r\nexport const CheckboxInput = props => FormCheckInput({...props, type: 'checkbox'});\r\nexport const RadioInput = props => FormCheckInput({...props, type: 'radio'});\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n\r\n    ComboboxInput\r\n    a input control with dropdown options\r\n\r\n    props: {\r\n        // in\r\n        value,                                                  // require\r\n        options     [[text,value]] or 'value1,value2'           // should\r\n        class                                                   // optional\r\n        style                                                   // optional\r\n                                                 \r\n        // out\r\n        oninput(event),                                        // require\r\n\r\n        onItemClick,  (value,selItem) => must return value !    // optional\r\n        - vaue = selItem.value\r\n        - selItem = [text,value]  \r\n    }\r\n\r\n*/\r\n\r\nexport function ComboboxInput (props) {\r\n    const {a,div,ul,li} = van.tags;\r\n    var {\r\n        options = [],\r\n        style,\r\n        bsSize,\r\n        onItemClick,\r\n        disabled,\r\n        isvalid,\r\n        ...inputProps                                               // name, value, oninput ...\r\n    } = props;\r\n\r\n    options = selectOptions(options);\r\n\r\n    var dvalue = van.state(valueToDisplay(options, van.val(props.value)));  // declare display value as van.state\r\n\r\n    function displayToValue (options, value) {\r\n        let oItem = options.find( o => o.children === value );      // lookup in options to get associated value\r\n        if (oItem) value = oItem.value;                             // value fount, otherwise it's still the caption\r\n        return value;\r\n    }\r\n    \r\n    function valueToDisplay (options, value) {\r\n        var oItem = options.find( o => o.value === value );             // lookup in options to get associated display value\r\n        if (oItem) value = oItem.children;\r\n        return value;\r\n    }\r\n        \r\n    function selectClick (value) {                                  // value is the clicked list caption\r\n        let {name,type} = props;\r\n        value = displayToValue(options, value);\r\n\r\n        if (onItemClick) {                                          // this event is handeld external\r\n            let selItem = options.find( o => o.children === value );\r\n            value = onItemClick(value,selItem);\r\n        }\r\n\r\n        props.oninput({                                            // set input to clicked value\r\n            target: {name, value, type}\r\n        });\r\n\r\n        dvalue.val = valueToDisplay(options, value);\r\n\r\n        return false;  // don't change browser hash\r\n    };\r\n\r\n    \r\n    return div({\r\n        style: van.val(props.style),\r\n        class: () => {\r\n            let res = 'input-group';\r\n            if(van.val(props.bsSize)) res += ' input-group-' + van.val(props.bsSize);\r\n            if(van.val(props.class)) res += ' ' + van.val(props.class);\r\n            if(isvalid != undefined) res += van.val(isvalid) ? ' is-valid' : ' is-invalid';\r\n            return res;\r\n        }},\r\n\r\n        Input({\r\n            ...inputProps,\r\n            disabled,\r\n            value: dvalue,\r\n            oninput: event => {\r\n                let {value} = event.target;\r\n                dvalue.val = value;\r\n                props.oninput({\r\n                    target: {\r\n                        value:  displayToValue(options, value),\r\n                        name:   props.name,\r\n                        type:   props.type\r\n                    }\r\n                })\r\n            }\r\n        }),\r\n\r\n        Button({dropdown: \"true\", disabled}),\r\n        ul({class: \"dropdown-menu\"},\r\n            options.map( (o) => li(\r\n                a({\r\n                    class: \"dropdown-item\", href: \"#\",\r\n                    onclick: () => selectClick(o.children)\r\n                }, o.children)\r\n            ))\r\n        )\r\n    )\r\n}\r\n\r\n\r\n\r\nexport function FormGroup({ name, label, input, class: clas, inputClass, bsSize, cols, col, id, separated, ...props}, ...children) {\r\n    const cl = () => {\r\n        let res = '';\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    let g_id = id ?? Math.random().toString(36).substring(2, 9);\r\n    let i_id = g_id + '-i';\r\n    let domInput = input ?? typeMap.get(props.type) ?? Input;\r\n    let ischeck = ['checkbox','radio','switch'].includes(props.type);\r\n\r\n    let inputEl, labelEl;\r\n    if(ischeck) {\r\n        if(separated) {\r\n            labelEl = FormLabel({bsSize, for: i_id}, label);\r\n            inputClass = (inputClass ?? '') + ' mt-2';\r\n            inputEl = domInput({bsSize, name, id: i_id, class: inputClass, ...props}, ...children);\r\n        } else {\r\n            labelEl = null;\r\n            inputEl = domInput({bsSize, name, id: i_id, class: inputClass, label, ...props}, ...children);\r\n        }\r\n        children = [];\r\n    } else {\r\n        labelEl = FormLabel({bsSize, for: i_id}, label);\r\n        inputEl = domInput({bsSize, name, id: i_id, class: inputClass, ...props});\r\n    }\r\n\r\n    if(cols) {\r\n        let [col_l, col_r] = cols.split(' ');\r\n        col_r = col_r || 12 - Number(col_l);\r\n        var res = [];\r\n        if(labelEl) \r\n            res.push(FormLabel({bsSize, col: col_l, id: g_id + '-l', for: i_id}, label));\r\n        else\r\n            res.push(div({class: col_l ? `col-${col_l}` : 'col'}));\r\n        res.push(div({class: col_r ? `col-${col_r}` : 'col'}, inputEl, ...children));\r\n        return res;\r\n    }\r\n\r\n    if(col) {\r\n        return div({class: col},\r\n            labelEl,\r\n            inputEl,\r\n            ...children\r\n        );\r\n    }\r\n\r\n    return div({class: cl, id: g_id, ...props},\r\n        labelEl,\r\n        inputEl,\r\n        ...children\r\n    );\r\n}\r\n\r\n\r\n\r\nexport function FormController ({values} = {}) {\r\n    const isVanState = v => van.val(v) !== v;\r\n    var listeners = [];\r\n    var ccount = 1;\r\n    var self = {\r\n        values: {...(values ?? {})},\r\n        onChange (func) { listeners.push(func); return () => self.offChange(func); },\r\n        offChange (func) { listeners = listeners.filter( f => f !== func) },\r\n        emitChange (name, value) { listeners.forEach( f => f(name, value)) },\r\n        handleInput (event) {\r\n            let {name, value} = event.target;\r\n            if (isVanState(self.values[name])) {\r\n                self.values[name].val = value;\r\n            } else {\r\n                self.values[name] = value;\r\n            }\r\n            self.emitChange( name, value );\r\n        },\r\n        args (args = {}) {\r\n            let {name = `v${ccount++}`, value, oninput = self.handleInput} = args;\r\n            value = value ?? self.values[name] ?? '';\r\n            self.values[name] = value;\r\n            return {name, value, oninput}\r\n        },\r\n    }\r\n    return self;\r\n}\r\n\r\n\r\n\r\nexport function FormBuilder ({dom, values, rowClass=\"\", formClass=\"\", cols, autoRow, bsSize, id, onChange}={}) {\r\n    \r\n    const toInt = v => {let n=Number(v); return isNaN(n) ? 0 :n};\r\n    \r\n    const splitCols = c => {let [l, r] = c.split(' '); l=toInt(l); r=toInt(r);\r\n       r = r ? r : 12-l; \r\n       return {l,r,t:l+r,s:l+' '+r}\r\n    };\r\n\r\n    var fc = FormController({values});\r\n    onChange && fc.onChange(onChange);\r\n\r\n    var self = {\r\n        ...fc,\r\n        dom: dom ?? van.tags.form({class: formClass}),\r\n        row: null,\r\n        rowClass,\r\n        cols,\r\n        autoRow,\r\n        colCount: 0,\r\n        id: id ?? Math.random().toString(36).substring(2, 9),\r\n\r\n        valid: {},\r\n        onvalidate: {},\r\n        getFormValid: () => Object.keys(self.valid).every( k => self.valid[k].val ),\r\n\r\n        add (props, ...children) {\r\n            let {name, value, oninput, cols, onvalidate, ...rest} = props;\r\n            if(value === undefined && name) value = self.values[name];\r\n            let args = {...rest, ...fc.args({name, value, oninput}) };\r\n            args.id = args.id || self.id + '-' + name;\r\n            if(bsSize && args.bsSize === undefined) args.bsSize = bsSize;\r\n            args.cols = cols || self.cols;\r\n            if(self.autoRow) {\r\n                cols = splitCols(args.cols);\r\n                if(!self.row) { self.addRow(); self.colCount = 0; } \r\n                self.colCount += cols.t;\r\n                args.cols = cols.s;\r\n                if(self.colCount > 12) {\r\n                    self.addRow();\r\n                    self.colCount = cols.t;\r\n                }\r\n            }\r\n\r\n            if(onvalidate) {\r\n                self.onvalidate[args.name] = onvalidate;\r\n                self.valid[args.name] = van.state(onvalidate(self.values[args.name]));\r\n                args.isvalid = self.valid[args.name];\r\n            }\r\n    \r\n            self.addGroup(args,...children);\r\n            return self;\r\n        },\r\n        addGroup(args,...children) {\r\n            van.add(self.row ?? self.dom, FormGroup(args,...children));\r\n        },\r\n        addRow (arg) {\r\n            if(arg === null) return self.row=null;\r\n            self.row = div({class: \"row\" + (self.rowClass ? ' '+self.rowClass : '') + (arg ? ' '+arg : '')});\r\n            van.add(self.dom, self.row);\r\n            return self;\r\n        },\r\n    }\r\n\r\n    self.onChange((name,value) => {\r\n        if(self.onvalidate[name]) self.valid[name].val = self.onvalidate[name](value);\r\n    });\r\n\r\n    return self;\r\n}\r\n\r\n\r\n\r\nexport function Button ({bsSize, class: clas, color='secondary', outline, dropdown, type='button', ...props}, children) {\r\n    const cl = () => {\r\n        let res = 'btn';\r\n        if(van.val(color)) \r\n            if(van.val(outline)) res += ' btn-outline-'+ van.val(color);\r\n            else res += ' btn-'+ van.val(color);\r\n        if(van.val(bsSize)) res += ' btn-' + van.val(bsSize);\r\n        if(van.val(dropdown)) res += \" dropdown-toggle\";\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    if(van.val(dropdown)) props[\"data-bs-toggle\"] = \"dropdown\"; \r\n\r\n    return button({type, class:  cl, ...props}, children);\r\n}\r\n    \r\n","import van  from 'vanjs-core';\r\nimport {Modal as BsModal} from 'bootstrap';\r\n\r\nconst {div, button,h5} = van.tags;\r\n\r\nexport function ModalFrame (args = {}) {\r\n\r\n    var {\r\n        id, class: modalClass,\r\n        header, body, footer, \r\n        close = true,\r\n        centered = true,\r\n        scrollable,\r\n        position,\r\n        // width = '40em',\r\n        width,\r\n        // bodyProps,\r\n        color,\r\n        dialogstyle = \"\",\r\n        bodystyle = \"\",\r\n        ...props\r\n    } = args;\r\n\r\n    if (width) dialogstyle += `width: ${width};`;\r\n    if (width) dialogstyle += `max-width: inherit;`;\r\n    if (position) {\r\n        dialogstyle += `margin-left: ${position.left}px; margin-top: ${position.top}px;`;\r\n        centered = false;\r\n    }\r\n\r\n    const dialogClass = \"modal-dialog\" \r\n      + (centered ? \" modal-dialog-centered\" : \"\")\r\n      + (scrollable ? \" modal-dialog-scrollable\" : \"\");\r\n\r\n    const contentClass = \"modal-content\" + (color ? \" \" + color : \"\");\r\n\r\n    if((typeof header === \"string\")) header = h5({class: \"modal-title\"}, header);\r\n\r\n    return (\r\n        div({class: () => \"modal\", id, \"aria-hidden\": \"true\", tabindex:\"-1\", ...props},\r\n        div({class: dialogClass, style: dialogstyle},\r\n            div({class: contentClass},\r\n                ((header || close)\r\n                  ? (div({class:\"modal-header\"},\r\n                    header, (close ? CloseButton : null)))\r\n                  : null\r\n                ),\r\n                (body && div({class: \"modal-body\", style: bodystyle}, body)),\r\n                (footer && div({class: \"modal-footer\"}, footer)),\r\n            )\r\n        )\r\n    )\r\n    )\r\n}\r\n\r\n\r\n/*\r\n\r\n## Options\r\n\r\n| Name | Type |\tDefault | Description |\r\n| ---  | ---  | ---     | ---         | \r\n| backdrop | boolean, 'static' | true | Includes a modal-backdrop element. Alternatively, specify static for a backdrop which doesn‚Äôt close the modal when clicked. |\r\n| focus | boolean | true | Puts the focus on the modal when initialized. |\r\n| keyboard | boolean | true | Closes the modal when escape key is pressed. |\r\n| dispose | boolean | true | Dispose dialog on hide |\r\n\r\n\r\n*/\r\n\r\nexport function Modal (args = {}, options) {\r\n\r\n    var _bsm;\r\n    var disposeOnHide = options?.dispose ?? true;\r\n    var skipdispose;\r\n    var self = {\r\n        dom:            null,\r\n        isOpen:         false,    \r\n        modalResult:    undefined,  \r\n        \r\n        open (left,top) {\r\n            self.modalResult = undefined;\r\n            if(left != undefined && top != undefined) {\r\n                args = {...args, position: {left,top}}\r\n            }\r\n            self.bsm.show();\r\n        },\r\n\r\n        close (result) {\r\n            self.modalResult = result;\r\n            self.bsm.hide();\r\n        },\r\n\r\n        async asyncOpen (left,top) {\r\n            return new Promise( (resolve) => {\r\n                self.open(left,top);\r\n                self.dom.addEventListener('hidden.bs.modal', ()=>resolve(self.modalResult));\r\n            });\r\n        },\r\n    \r\n        get bsm() {\r\n            if(!_bsm) {\r\n                self.dom = ModalFrame(args);\r\n                _bsm = new BsModal(self.dom, options);\r\n                self.dom.addEventListener('shown.bs.modal', self.onShown)\r\n                self.dom.addEventListener('hidden.bs.modal', self.onHidden)\r\n            }\r\n            return _bsm;\r\n        },\r\n\r\n        dispose () {\r\n            if(_bsm) {\r\n                _bsm.dispose();\r\n                _bsm = null;\r\n            }\r\n            if(self.dom) {\r\n                self.dom.remove();\r\n                self.dom = null;\r\n            }\r\n        },\r\n\r\n        hide (dispose) { \r\n            skipdispose = dispose;\r\n            _bsm.hide() \r\n        },\r\n        show () { _bsm.show() },\r\n\r\n        onShown (event) {\r\n            self.isOpen = true;\r\n        },\r\n        onHidden (event) {\r\n            self.isOpen = false;\r\n            if(skipdispose) {\r\n                skipdispose = false\r\n            } else {\r\n                if(disposeOnHide) self.dispose();\r\n            }\r\n        },\r\n\r\n//         show () { return self.bsm.show() },\r\n\r\n    }\r\n\r\n    return self;\r\n}\r\n\r\n\r\n\r\nexport function CloseButton({class: clas} = {}, children) { \r\n    return button({\r\n        type:\"button\", \r\n        class: clas ? clas : \"btn-close\", \r\n        \"data-bs-dismiss\": \"modal\", \r\n        \"aria-label\":\"Close\"\r\n    },\r\n    children\r\n    ) \r\n};\r\n\r\n\r\n\r\nexport function PopupMenuFrame (...children) {\r\n    const {ul} = van.tags;\r\n    return ul({\r\n        class: \"dropdown-menu\", \r\n        style: \"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;\"\r\n        },\r\n        ...children.map( item => item instanceof HTMLElement ? item : MenuItem(item))\r\n    )\r\n}\r\n\r\nexport function DropdownMenu (...children) {\r\n    const {ul} = van.tags;\r\n    return ul({class: \"dropdown-menu\"},\r\n        ...children.map( item => item instanceof HTMLElement ? item : MenuItem(item))\r\n    )\r\n}\r\n\r\n\r\n\r\nexport function MenuItem (props)  {\r\n    const {li,span,hr,button} = van.tags;\r\n    const noclick = event => {event.preventDefault(); event.stopPropagation();}; \r\n    var {label, header, divider, text, active, disabled, class: clas, tag, ...rest} = props;\r\n    var classf = (cl) => () => {\r\n        let res = cl;\r\n        if(van.val(active)) res += ' active';\r\n        if(van.val(disabled)) res += ' disabled';\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    if(header) {\r\n        tag = tag ? van.tags[tag] : span;\r\n        return li(tag({class: classf(\"dropdown-header fw-bold border-bottom\"), onclick: noclick, ...rest}, label));\r\n    }\r\n    if(divider) {\r\n        tag = tag ? van.tags[tag] : hr;\r\n        return li(tag({class: classf(\"dropdown-divider\"), onclick: noclick, ...rest}, label));\r\n    }\r\n    if(text) {\r\n        tag = tag ? van.tags[tag] : span;\r\n        return li(tag({class: classf(\"dropdown-item-text\"), onclick: noclick, ...rest}, label));\r\n    }\r\n    tag = tag ? van.tags[tag] : button;\r\n    return li(tag({class: classf(\"dropdown-item\"), role:\"button\", ...rest}, label));\r\n}\r\n\r\n\r\n\r\nexport function PopupMenu (...items) {\r\n    const menu = PopupMenuFrame(...items);\r\n    const modal = Modal({\r\n        close: false,               // don't show any header\r\n        dialogstyle: \"display: table; padding: 0;\",\r\n        bodystyle: \"padding: 0;\",\r\n        body: menu,\r\n    });\r\n    menu.addEventListener('click', ()=>modal.close());\r\n    return modal;\r\n}\r\n\r\n\r\nexport function ContextMenu (...items) {\r\n    const menu = PopupMenuFrame(...items);\r\n    const modal = Modal({\r\n        close: false,               // don't show any header\r\n        dialogstyle: \"display: table; padding: 0;\",\r\n        bodystyle: \"padding: 0;\",\r\n        body: menu,\r\n    });\r\n    menu.addEventListener('click', ()=>modal.close());\r\n    const open1 = modal.open;\r\n    modal.open = event => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        open1(event.clientX, event.clientY);\r\n    }\r\n    return modal;\r\n}\r\n\r\n","\r\nimport van from 'vanjs-core';\r\n\r\nconst { div, button, hr, span, nav, a, ul, li } = van.tags;\r\n\r\n\r\nexport function Navbar({\r\n    class: clas,\r\n    sticky = true,\r\n    menu,\r\n    t = t=>t,\r\n    ...props\r\n}) {\r\n\r\n    const getClass = () => {\r\n        let res = \"navbar navbar-expand-lg bg-body-tertiary\";\r\n        if(sticky) res += \" sticky-top\";\r\n        if(van.val(clas)) res += \" \" + van.val(clas);\r\n        return res;\r\n    }\r\n\r\n    return nav({class: getClass},\r\n        div({class: \"container-fluid\" },\r\n            menu.brand,\r\n            button({ class: \"navbar-toggler\", type: \"button\", \"data-bs-toggle\": \"collapse\", \"data-bs-target\": \"#navbarSupportedContent\", \"aria-controls\": \"navbarSupportedContent\", \"aria-expanded\": \"false\", \"aria-label\": \"Toggle navigation\" },\r\n                span({ class: \"navbar-toggler-icon\" }),\r\n            ),\r\n\r\n            div({ class: \"collapse navbar-collapse\", id: \"navbarSupportedContent\" },\r\n                ul({ class: \"me-auto navbar-nav\" },\r\n                    menu.items.map( item => NavItem({...item,t}) ),\r\n                )\r\n            )\r\n        ),\r\n    )\r\n}\r\n\r\n\r\nexport function NavItem({href='#',label,icon,items,level=0,Comp,hidden=false,t=t=>t,...props}) {\r\n\r\n    if(typeof hidden === 'function') hidden = hidden();\r\n    if (hidden) return null;\r\n\r\n    (typeof label === 'function') && (label = label());\r\n    label = label ? t(van.val(label)) : '';\r\n    props.title && (props.title = t(van.val(props.title)));\r\n    // if(icon) label = <Icon icon={icon} title={label} />\r\n\r\n    if(items) {\r\n        return NavMenu({label,items,level,t,...props});\r\n    }\r\n\r\n    const cl = () => {\r\n        let res = \"nav-item\";\r\n        if(level !== 0) res = \"\";\r\n        if(van.val(props.class)) res += \" \" + van.val(props.class);\r\n        return res;\r\n    };\r\n\r\n    if (Comp) {\r\n        return li({class: cl}, Comp({href,label,icon,items,level,hidden,t,...props}));\r\n    }\r\n\r\n    return li({class: cl}, NavLink({...props, href, label, level}) );\r\n}\r\n\r\n\r\n\r\nexport function NavLink({label, class: clas, active, disabled, divider, level=0, ...props}) {\r\n\r\n    const cl = () => {\r\n        let res = \"nav-link\";\r\n        if(level !== 0) res = \"dropdown-item\";\r\n        if(van.val(active)) res += \" active\";\r\n        if(van.val(active) && level === 0) res += \" text-primary\";\r\n        if(van.val(disabled)) res += \" disabled\";\r\n        if(van.val(clas)) res += \" \" + van.val(clas);\r\n        return res;\r\n    };\r\n\r\n    if(divider) return hr({class: \"dropdown-divider\"});\r\n    return a({class: cl, href: '#', ...props}, label);\r\n}\r\n\r\n\r\nexport function NavMenu ({label, items, t= t=>t, level, ...props}) {\r\n\r\n    if(level > 0) // don't work ?\r\n        return li({},\r\n            a({class: \"dropdown-item\", href:\"#\"}, label + \" ¬ª\"),\r\n            // ul({class: \"dropdown-menu dropdown-submenu\"},\r\n            ul({class: \"submenu dropdown-menu\"},\r\n                items.map( item => NavItem({level: level + 1, t, ...item}) ),\r\n            ),\r\n        );\r\n\r\n    return li({class: \"nav-item dropdown\", id: \"NavDropdown\"+level},\r\n        // a({class: \"nav-link dropdown-toggle\", href: \"#\", role: \"button\", \"data-bs-toggle\": \"dropdown\", \"aria-expanded\": \"false\"}, label),\r\n        a({class: \"nav-link dropdown-toggle\", href: \"#\", \"data-bs-toggle\": \"dropdown\"}, label),\r\n        ul({class: \"dropdown-menu\"},\r\n            items.map( item => NavItem({level: level + 1, ...item, t, ...props}) ),\r\n        ),\r\n    );\r\n}\r\n\r\n","/*\r\n    I18n\r\n    form-lib translate\r\n*/\r\n\r\nexport default function I18n()  {\r\n\r\n    const i18n = {\r\n        dict:               {},\r\n        language:           'en',\r\n        languageDefault:    'en',\r\n        setLanguage (value) {\r\n            i18n.language = String(value).toLowerCase();\r\n            if (!i18n.dict[i18n.language])\r\n                i18n.language = i18n.languageDefault;\r\n        },\r\n        getLanguage () {return i18n.language},\r\n        t (key) {\r\n            if (typeof key === 'function') key = key();\r\n            if (!key) return '';\r\n            var res = getProp(i18n.dict[i18n.language], key);\r\n            if (!res) \r\n                res = key.split('.').pop();\r\n            return res;\r\n        },\r\n        tPath (path) {\r\n            if (!path.endsWith('.')) path = path + '.';\r\n            return function (key) {\r\n                return i18n.t(path + key);\r\n            };\r\n        },\r\n        addWords (words, lang, chapter) {\r\n            if (chapter) words = {[chapter]: words};\r\n            if (lang) words = {[lang]: words};\r\n            mergeObjects( i18n.dict, words );\r\n        }\r\n    };\r\n\r\n    return i18n;\r\n};\r\n\r\n\r\nfunction mergeObjects(obj1, obj2) {\r\n    for (var p in obj2) {\r\n        try {\r\n            if ( obj2[p].constructor===Object )\r\n                obj1[p] = mergeObjects(obj1[p], obj2[p]);\r\n            else\r\n                obj1[p] = obj2[p];\r\n        } catch(e) {\r\n            obj1[p] = obj2[p];\r\n        }\r\n    }\r\n    return obj1;\r\n}\r\n\r\n\r\nfunction getProp (obj, path) {\r\n    try {\r\n        path = path.split('.');\r\n        for (let i=0; i < path.length; i++) {\r\n            if (!obj) return obj;\r\n            obj = obj[path[i]];\r\n        };\r\n    } catch (err) {\r\n        return false;\r\n    }\r\n    return obj;\r\n};\r\n\r\n\r\n\r\n","import van from 'vanjs-core';\r\n\r\nexport var iconMap = new Map();\r\nvar warning = 0;\r\nvar warnMap = new Map();\r\n\r\n\r\nexport function getIcon (key) {\r\n    if (typeof key !== 'string') return false;\r\n    var res = iconMap.get(key);\r\n    if (!res && warning > 0 && !warnMap.get(key)) {\r\n        console.warn('Get unknown icon', key);\r\n        // console.trace();\r\n        warnMap.set(key,true);\r\n    }\r\n    return res; \r\n}\r\n\r\nexport function setIcon (key, value) {\r\n    if (warning > 1 && iconMap.get(key)) {\r\n        console.warn('Redefine icon', key);\r\n    }\r\n    iconMap.set(key,value);\r\n}\r\n\r\nexport function setWarning (value) {\r\n    switch (value) {\r\n        case 0: case 1: case 2:\r\n            warning = value;\r\n            break;\r\n        case 'all': warning = 2; break;\r\n        case 'get': warning = 1; break;\r\n        default: warning = 0;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n    SvgIconBase \r\n\r\n    Is a base component wrapper for SVG icons. \r\n    The idea behind is to have a SVG image that size is 1em. So it fit to font-size.\r\n    fill should be \"currentColor\" to use the font-color.\r\n    The icon size (width and height) can be changed by \"size\" property\r\n\r\n    This is based on react-icons (https://github.com/react-icons/react-icons)\r\n\r\n    function MyIcon (props) {\r\n        return SvgIconBase({viewBox: \"0 0 100 100\", ...props},\r\n            rect({x:\"11.5\", y:\"9.4\", width:\"80\", height:\"80\", rx:\"4.4444\", ry:\"4.4444\", fill:\"none\" stroke-width:\"8\"})\r\n        )\r\n    }\r\n\r\n*/\r\n\r\nexport function SvgIconBase (props = {}, ...children) {\r\n\r\n    const {attr, size, title, ...svgProps} = props;\r\n    const computedSize = size || \"1em\";\r\n    let className = '';\r\n    if (props.class) className += (className ? className + ' ' : '') + props.class;\r\n    let style = props.color ? `color: ${props.color}; ` : '';\r\n    if(props.style) style += props.style;\r\n\r\n    return van.tagsNS(\"http://www.w3.org/2000/svg\").svg({\r\n        stroke: \"currentColor\",\r\n        fill: \"currentColor\",\r\n        \"stroke-width\": \"0\",\r\n        ...attr,\r\n        ...svgProps,\r\n        class: className,\r\n        style,\r\n        height: computedSize,\r\n        width: computedSize,\r\n        },\r\n        (title ? van.tagsNS(\"http://www.w3.org/2000/svg\").title(title) : null),\r\n        ...children\r\n    )\r\n}    \r\n\r\n\r\n\r\n/*\r\n    GenIcon(data) \r\n\r\n    where data is svg data tree:\r\n    {tag: \"svg\", attr: {viewBox: \"0 0 16 16\"}, child: [{tag: ..}, ..]}\r\n\r\n    This data format was found by react-icons. \r\n    The advantage is the generality of this format, which can be easily transformed, here into a VanJs function.\r\n    The first tag is usually \"svg\". In this function, if the first tag is missing, \r\n    an SvgIconBase function is generated, otherwise a standard SVG function.\r\n\r\n    const moon = GenIcon({\r\n        attr: {viewBox: \"0 0 16 16\"},\r\n        child:[{tag: 'path', attr: {d: \"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278M4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z\"}}\r\n        ]\r\n    });\r\n\r\n*/\r\n\r\nexport function GenIcon(data) {\r\n    \r\n    function Tree2Element(tree) {\r\n        return tree && tree.map(\r\n            (node, i) => van.tagsNS(\"http://www.w3.org/2000/svg\")[node.tag]({...node.attr}, Tree2Element(node.child))\r\n        );\r\n    }\r\n    \r\n    if(data.tag === \"svg\")\r\n        return (props={}) => van.tagsNS(\"http://www.w3.org/2000/svg\").svg({...data.attr, ...props}, ...Tree2Element(data.child));\r\n    return (props={}) => SvgIconBase({...data.attr, ...props}, ...Tree2Element(data.child));\r\n}\r\n\r\n\r\n\r\n/*\r\n    ImgIcon\r\n    Create a icon by image url. The \"size\" is injected as style so we can use units like \"em\".\r\n    For original size use \"inherit\".\r\n    \r\n    setIcon( 'KEY', ImgIcon({src: \"img/key.png\"}))\r\n*/\r\n\r\nexport function ImgIcon ({src, alt, ...rest}) {\r\n    return ({size='1em', style='', ...props} = {}) => van.tags.img({\r\n            src, \r\n            alt:    alt || src.split('/').pop(),\r\n            style:  style + `width:${size}; height:${size};`,\r\n            ...rest,\r\n            ...props\r\n        })\r\n}\r\n\r\n\r\n\r\n/*\r\n    SvgStrIcon(str, svgargs)\r\n    Create a icon from a SVG string. svgargs will overwrite svg attributes like fill and stroke.\r\n\r\n    SvgStrIcon(\r\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\"><circle cx=\"5\" cy=\"5\" r=\"3\"/></svg>',\r\n        {fill: 'currentColor', stroke: 'currenColor}\r\n    )\r\n*/\r\n\r\nexport function SvgStrIcon (str, svgargs = {}) {\r\n    return ({size='1em', ...props} = {}) => {\r\n        var dom = document.createElement('div');\r\n        dom.innerHTML = str;\r\n        dom = dom.firstChild;\r\n        props.width = size;\r\n        props.height = size;\r\n        Object.keys(svgargs).forEach( key => dom.setAttribute(key, svgargs[key]));\r\n        Object.keys(props).forEach( key => dom.setAttribute(key, props[key]));\r\n        return dom;\r\n    }\r\n}\r\n\r\n\r\n\r\n/*\r\n    Icon( anything, {size, ...props} )\r\n\r\n    // key of icon in iconMap\r\n    anything = 'key'    \r\n\r\n    // UTF-8 char\r\n    anything = 'üó∫Ô∏è'\r\n\r\n    // SVG string\r\n    anything = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\"><circle cx=\"5\" cy=\"5\" r=\"3\"/></svg>'\r\n\r\n    // modified SVG string\r\n    anything = SvgStrIcon('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\"><circle cx=\"5\" cy=\"5\" r=\"3\"/></svg>',\r\n         {fill: 'currentColor', stroke: 'currentColor'}));\r\n\r\n    // Image URL\r\n    anything = ImgIcon({src: \"https://avatars.githubusercontent.com/u/25134550\", class: \"rounded-4\"})\r\n\r\n    // react-icon object\r\n    anything = GenIcon({tag: \"svg\",attr: {viewBox:\"0 0 30 10\"},child: [\r\n        {tag: \"circle\", attr: {cx:\"5\", cy:\"5\", r:\"3\", stroke:\"green\"}},\r\n        {tag: \"circle\", attr: {cx:\"15\", cy:\"5\", r:\"3\", stroke:\"green\", \"stroke-width\": \"3\"}}\r\n    ]})\r\n\r\n    // VanJs function\r\n    const {path} = van.tagsNS(\"http://www.w3.org/2000/svg\");\r\n    anything = props => SvgIconBase({viewBox: \"0 0 16 16\", ...props},\r\n        path({d: \"M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z\"})\r\n    );\r\n\r\n    // Font Awesome class\r\n    anything = \"fa-solid fa-beer-mug-empty\"\r\n\r\n\r\n    size = '16px' || '2.5em' || '60%' || 'inherit'\r\n\r\n*/\r\n\r\n\r\nexport function Icon (icon, {size, ...props} = {}) {\r\n\r\n    // is it in iconMap ?\r\n    var Icon = getIcon(icon);\r\n    if (Icon) {\r\n        if(typeof Icon === 'function')\r\n            return Icon({size, ...props})\r\n        else\r\n          icon = Icon;\r\n    }\r\n    \r\n    // is it a svg ?\r\n    // a artifact from React version\r\n    if (typeof icon === 'function') {                           \r\n        props.size = size;\r\n        return icon({...props});\r\n    }\r\n\r\n    // is it fontawesome\r\n    else if (typeof icon === 'string' && icon.startsWith('fa')) {                        \r\n    \r\n        if (size !== undefined) {\r\n            props.style = props.style = {\r\n                ...(props.style || {}),\r\n                fontSize: size\r\n            }\r\n        }\r\n        props.class = props.class ? props.class + ' ' + icon : icon\r\n\r\n        return van.tags.i({...props});\r\n    } \r\n\r\n    // is it <svg ..>..</svg>\r\n    else if (typeof icon === 'string' && icon.startsWith('<svg ')) {       \r\n        return SvgStrIcon(icon)({size,...props});\r\n    } \r\n\r\n    // is it a UTF-8 ?\r\n    else if ((typeof icon === 'string')) {   \r\n    \r\n        if (size !== undefined) {\r\n            let s = 'font-size:' + size + ';';\r\n            if(props.style) s += props.style;\r\n            props.style = s;\r\n        }\r\n\r\n        // return van.tags.div({...props}, icon);\r\n        return van.tags.span({...props}, icon);\r\n    }\r\n\r\n    \r\n    // undefined icon\r\n\r\n    size = size === undefined ? '1em' : size;\r\n    let s = `width:${size}; height:${size}; min-width:${size};`;\r\n    if(props.style) s += props.style;\r\n    props.style = s;\r\n\r\n    return van.tags.div({...props});\r\n}\r\n\r\n\r\n// define at least a empty space icon\r\n\r\niconMap.set('SPACE', props => Icon('\\u2001', {...props}) );\r\n","/*\r\n# function DragSort\r\n\r\nA helper to sort a list per drag and drop.\r\n\r\n> ### `export function DragSort (list, setList)`\r\n\r\n- list:  array to be sorted\r\n- setList: function to store reordered list\r\n\r\nFunction DragSort returns an object with all required function. The function dragProps of the object can inject all html attributes like draggable, onDragStart and so on.\r\n\r\nUsage example:\r\n\r\n```javascript\r\nvar list = [\"A\",\"B\",\"C\"];\r\nconst setList = v => list = v;\r\n\r\nfunction MyList ({list, setList, ...props}) {\r\n    const drag = DragSort(list, setList);\r\n    const items = list.map( (item,index) => {\r\n        return van.tags.li({\r\n            class: \"list-group-item\",\r\n            ...drag.dragProps(index)\r\n            },\r\n            item\r\n        )\r\n    });\r\n    return van.tags.ul({class: \"list-group\", ...props}, ...items)\r\n}\r\n```\r\n\r\nversion 2.0\r\nmodified for vanjs\r\nversion 1.0\r\ninspired by https://dev.to/florantara/creating-a-drag-and-drop-list-with-react-hooks-4c0i\r\n\r\n*/\r\n\r\n\r\n// const log = 1 ? console.log : ()=>{};\r\n\r\n\r\nexport default function DragSort (list, setList) {\r\n\r\n    var self = {\r\n\r\n        dragProps (index) {\r\n            return {\r\n                draggable:      true,\r\n                ondragstart:    self.onDragStart,\r\n                ondrop:         self.onDrop,\r\n                ondragover:     self.onDragOver,\r\n                ondragleave:    self.onDragLeave,\r\n                \"data-position\": index,\r\n            }\r\n        },\r\n\r\n        isDropArea (index) {\r\n            return self.dragAndDrop && self.dragAndDrop.draggedTo=== Number(index);\r\n        },\r\n\r\n        onDragStart (event) {\r\n            let initialPosition = Number(event.currentTarget.dataset.position);\r\n            // log('onDragStart', initialPosition);\r\n            self.setDragAndDrop({\r\n                ...self.dragAndDrop,\r\n                draggedFrom:    initialPosition,\r\n                isDragging:     true,\r\n                originalOrder:  list\r\n            });\r\n            event.dataTransfer.setData(\"text/html\", '');      // for Firefox.\r\n        },\r\n    \r\n        onDragOver (event) {\r\n            event.preventDefault();\r\n            let newList     = self.dragAndDrop.originalOrder;\r\n            let draggedFrom = self.dragAndDrop.draggedFrom; \r\n            let draggedTo   = Number(event.currentTarget.dataset.position); // index of the droppable area being hovered\r\n            let itemDragged = newList[draggedFrom];\r\n            let remainingItems = newList.filter((item, index) => index !== draggedFrom);\r\n            newList = [\r\n                ...remainingItems.slice(0, draggedTo),\r\n                itemDragged,\r\n                ...remainingItems.slice(draggedTo)\r\n            ];\r\n            if (draggedTo !== self.dragAndDrop.draggedTo) {\r\n                self.setDragAndDrop({\r\n                    ...self.dragAndDrop,\r\n                    updatedOrder: newList,\r\n                    draggedTo:    draggedTo\r\n                })\r\n            }\r\n        },\r\n   \r\n        onDrop (event) {\r\n            setList(self.dragAndDrop.updatedOrder);\r\n            self.setDragAndDrop({\r\n                ...self.dragAndDrop,\r\n                draggedFrom:    null,\r\n                draggedTo:      null,\r\n                isDragging:     false\r\n            });\r\n        },\r\n   \r\n        onDragLeave () {\r\n            self.setDragAndDrop({\r\n                ...self.dragAndDrop,\r\n                draggedTo: null\r\n            });\r\n        },\r\n\r\n    };\r\n\r\n\r\n    const initialDnDState = {\r\n        draggedFrom:    null,\r\n        draggedTo:      null,\r\n        isDragging:     false,\r\n        originalOrder:  [],\r\n        updatedOrder:   []\r\n    };\r\n    \r\n\r\n    self.dragAndDrop    = initialDnDState;\r\n    self.setDragAndDrop = value => self.dragAndDrop = value;\r\n\r\n    return self;\r\n}    \r\n","/*\r\n    TagInput\r\n\r\n    A form multi select control to edit a list of tag items.\r\n    Support visual 'tag sort order' modification. \r\n\r\n*/\r\n\r\n\r\n\r\nimport van                          from 'vanjs-core';\r\nimport selectOptions                from './select-options';\r\nimport { Button, Input }            from './form-controls';\r\nimport { Icon, SvgStrIcon }         from './icon-map';\r\nimport { DropdownMenu, MenuItem }   from './modal';\r\nimport DragSort                     from './drag-sort';\r\n\r\nconst SUBMIT_KEYS   = ['Enter',' ',','];                        // triggers submit in edit controll\r\nconst BS_SIZE       = \"\";                                       // default bootstrap size\r\nconst T_COLOR       = \"text-bg-primary\";                      // badge color\r\n\r\nconst hasSign       = value => (typeof value === 'string' && value[0] === '-');\r\nconst removeSign    = value => hasSign(value) ? value.substring(1) : value;\r\n\r\nconst IconDelete = props => Icon('üóô', props);\r\nconst IconCheck  = props => Icon('‚òí', props);\r\nconst IconUncheck  = props => Icon('‚òê', props);\r\nconst IconAsc = props => Icon(SvgStrIcon(\r\n    '<svg viewBox=\"0 0 576 512\"><path d=\"M183.6 42.4C177.5 35.8 169 32 160 32s-17.5 3.8-23.6 10.4l-88 96c-11.9 13-11.1 33.3 2 45.2s33.3 11.1 45.2-2L128 146.3V448c0 17.7 14.3 32 32 32s32-14.3 32-32V146.3l32.4 35.4c11.9 13 32.2 13.9 45.2 2s13.9-32.2 2-45.2l-88-96zM320 320c0 17.7 14.3 32 32 32h50.7l-73.4 73.4c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H429.3l73.4-73.4c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8H352c-17.7 0-32 14.3-32 32zM416 32c-12.1 0-23.2 6.8-28.6 17.7l-64 128-16 32c-7.9 15.8-1.5 35 14.3 42.9s35 1.5 42.9-14.3l7.2-14.3h88.4l7.2 14.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9l-16-32-64-128C439.2 38.8 428.1 32 416 32zM395.8 176L416 135.6 436.2 176H395.8z\" /></svg>',\r\n    {style: \"vertical-align: bottom;\", fill: 'currentColor', stroke: 'currenColor', ...props}\r\n));\r\nconst IconDsc = props => Icon(SvgStrIcon(\r\n    '<svg viewBox=\"0 0 576 512\"><path d=\"M183.6 469.6C177.5 476.2 169 480 160 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L128 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 320c0-17.7 14.3-32 32-32H480c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9L429.3 416H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H352c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9L402.7 352H352c-17.7 0-32-14.3-32-32zM416 32c12.1 0 23.2 6.8 28.6 17.7l64 128 16 32c7.9 15.8 1.5 35-14.3 42.9s-35 1.5-42.9-14.3L460.2 224H371.8l-7.2 14.3c-7.9 15.8-27.1 22.2-42.9 14.3s-22.2-27.1-14.3-42.9l16-32 64-128C392.8 38.8 403.9 32 416 32zM395.8 176h40.4L416 135.6 395.8 176z\" /></svg>',\r\n    {style: \"vertical-align: bottom;\", fill: 'currentColor', stroke: 'currenColor', ...props}\r\n));\r\n\r\nconst i18nWords = {\r\n    'remove':               'remove',\r\n    'ascending':            'ascending',\r\n    'descending':           'descending',\r\n    'edplaceholder':        'enter new tag',\r\n};\r\n\r\nconst {div, span} = van.tags;\r\n\r\n/*\r\n    Tag Input Component\r\n*/\r\n\r\n\r\nfunction TagInput ({\r\n    value,                      // required. Format \"a,b,c\" or [\"a\", \"b\", \"c\"]\r\n    commaValue      = true,     // value is array of string or comma separated value \r\n    options         = [],       // optional array of string to be used in select list\r\n    oninput,                    // required, value change event feedback\r\n    disabled,\r\n    onContextMenu,              // optional function( event, item )\r\n    dragSort        = true,     // allow items drag'n drop\r\n    delIcon         = 'none',   // \"Remove Cross\" position 'left','right','none'\r\n    orderIcon       = false,    // show minus sign as icon\r\n    allowCreate     = true,     // enable edit for new items\r\n    multi           = true,     // enable multi select \r\n    bsSize          = BS_SIZE,  // bootstrap size  \r\n    closeOnCheck    = false,    // close option list on check\r\n    tagColor,                   // badges color\r\n    style,                      // extra style\r\n    placeholder,                // show text if no value\r\n    loading,                    // show spinner on \"true\"\r\n    tabindex        = 0,\r\n    icons,                      // overwrite icons\r\n    t,                          // overwrite translate\r\n    ...props                    // extra props\r\n}) {\r\n\r\n    value = van.val(value);\r\n    if (typeof value === 'string') value = value.split(',');\r\n    if (!value || !Array.isArray(value)) value = [];\r\n    value = value.filter(i=>i);                                     // remove ''\r\n    style = (style ?? '') + ' heigt: auto;';\r\n\r\n    var dropdownBtn, tagOptions;\r\n\r\n    const tagData = {\r\n        items: van.state(value),\r\n        listvalue: van.state(value),\r\n        options: updateOptions(options, value),\r\n        disabled,\r\n        onContextMenu,\r\n        dragSort, delIcon, orderIcon, allowCreate, multi, closeOnCheck, bsSize,\r\n        tagColor: tagColor || T_COLOR,\r\n        placeholder,\r\n        loading,\r\n        tabindex,\r\n        icons: {\r\n            IconDelete, IconCheck, IconUncheck, IconAsc,IconDsc,\r\n            ...(icons || {})\r\n        },    \r\n        t: t || (t => {return i18nWords[t] ?? t}),\r\n\r\n        checkItem(item,check) {\r\n            item = removeSign(item);\r\n            if (this.multi) {\r\n                this.saveItems(check ? [...this.items.val, item] : this.items.val.filter(v => removeSign(v) !== item));\r\n            } else {\r\n                this.saveItems(check ? [item] : []);\r\n            }\r\n        },\r\n        saveItems(value) {\r\n            this.items.val = value;\r\n            if(!this.isOpen && oninput) {\r\n                this.listvalue.val = value;\r\n                oninput({ target: { \r\n                    name:   props.name, \r\n                    value:  commaValue ? value.join(',') : value, \r\n                    type:   'tagedit'\r\n                }})\r\n            };\r\n        },\r\n        checkAll(item,check) {\r\n            if (this.multi) {\r\n                this.saveItems(check ? [...this.options.map(o => o.value)] : []);\r\n            } else {\r\n                this.checkItem(item,check);\r\n            }\r\n        },\r\n        onOrderClick(item, desc) {\r\n            let idx     = this.items.val.indexOf(item);\r\n            let is_desc = hasSign(item);\r\n            if (idx !== -1 && desc !== is_desc) {\r\n                let next = [...this.items.val];\r\n                next[idx] = desc ? '-'+item : item.substring(1);\r\n                this.saveItems(next);\r\n            }\r\n        },\r\n        newItem(item) {\r\n            if(item && !this.items.val.some(e => removeSign(e) === item) ) {        // is it new ?\r\n                // this.isOpen = false;\r\n                this.hideDropdown();\r\n                this.checkItem(item, true);\r\n            }\r\n            // if (!this.multi) setDropdownOpen(false);\r\n        },\r\n        showDropdown() {\r\n            if(!this.isOpen) this.toggleDropdown();\r\n        },\r\n        hideDropdown() {\r\n            if(this.isOpen) this.toggleDropdown();\r\n        },\r\n        toggleDropdown() {\r\n            dropdownBtn.click();\r\n        },\r\n    };\r\n\r\n    dropdownBtn = Button({dropdown: true, disabled});\r\n    tagOptions  = TagOptions({tagData});\r\n\r\n\r\n    dropdownBtn.addEventListener('shown.bs.dropdown', event => {\r\n        tagData.isOpen = true;\r\n    })\r\n    dropdownBtn.addEventListener('hidden.bs.dropdown', event => {\r\n        tagData.isOpen = false;\r\n        tagData.saveItems(tagData.items.val);\r\n    })\r\n\r\n\r\n    return InputGroup({bsSize, ...props, style},\r\n        TagList({tagData}),\r\n        dropdownBtn,\r\n        tagOptions,\r\n    )\r\n    \r\n}\r\n\r\n\r\nfunction TagList({tagData}) {\r\n\r\n    if (van.val(tagData.loading)) {\r\n        return  ControlFrame({}, \r\n            div({class: \"spinner-border spinner-border-sm \" + tagData.tagColor.replace(\"-bg\",\"\"), role:\"status\"},\r\n                span({class: \"visually-hidden\"},\"Loading...\")\r\n        ));\r\n    }\r\n\r\n    const drag = (tagData.dragSort && tagData.multi && !tagData.disabled) ? DragSort(tagData.listvalue.val, v => tagData.saveItems(v)) : false;\r\n\r\n    var list = tagData.listvalue.val.map( (item, idx) => TagItem({tagData, item, idx, drag}) );\r\n\r\n    if (list.length === 0 && tagData.placeholder) {\r\n        if (typeof tagData.placeholder === 'string')\r\n            list = [span({class: \"text-muted\"}, tagData.placeholder)];\r\n        else\r\n            list = [placeholder];\r\n    }\r\n\r\n    return ControlFrame({\r\n        tabindex: tagData.tabindex,\r\n        onclick(event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            tagData.toggleDropdown();\r\n        }\r\n    }, ...list);\r\n}\r\n\r\n\r\n\r\nfunction TagItem({tagData, item, idx, drag}) {\r\n\r\n        var label = valueToDisplay(tagData.options, removeSign(item));\r\n        var itemProps = {\r\n            class: \"badge \" + tagData.tagColor + \" me-1 my-1\",\r\n            style: \"fontSize: 90%;\",\r\n        };\r\n\r\n        if (drag) {\r\n            itemProps = {\r\n                ...itemProps,\r\n                style: itemProps.style + \"cursor: grab;\",\r\n                ...drag.dragProps(idx),\r\n            }\r\n        }\r\n\r\n        const DelIcon = c => div({\r\n            class:  c,\r\n            role:   'button',\r\n            title:  tagData.t('remove'),\r\n            onclick: ev => {\r\n                ev.preventDefault();\r\n                ev.stopPropagation();\r\n                tagData.checkItem(item,false)\r\n            },\r\n        }, tagData.icons.IconDelete );\r\n\r\n        const OrderIcon = desc => div({\r\n            class:  \"ms-1\",\r\n            role:   'button',\r\n            title:  desc ? tagData.t('descending') : tagData.t('ascending'),\r\n            onclick: ev => {\r\n                ev.preventDefault();\r\n                ev.stopPropagation();\r\n                tagData.onOrderClick(item,!desc)\r\n            },\r\n        }, (desc ? tagData.icons.IconDsc : tagData.icons.IconAsc) );\r\n\r\n        var children = [];\r\n        if (tagData.delIcon === \"left\") {\r\n            children.push(DelIcon(\"me-1\"))\r\n        }\r\n        children.push(label)\r\n        if (tagData.orderIcon) {\r\n            children.push(OrderIcon(hasSign(item)))\r\n        }\r\n        if (tagData.delIcon === \"right\") {\r\n            children.push(DelIcon(\"ms-1\"))\r\n        }\r\n\r\n\r\n        return span({...itemProps}, div({class: 'd-flex'}, ...children) );\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction TagOptions ({tagData}) {\r\n\r\n    const list = tagData.options.map( item => OptionItem({\r\n        tagData, item\r\n    }) );\r\n\r\n    if (tagData.allowCreate) {              // add edit control\r\n        list.unshift(MenuItem({divider: 1}));\r\n        list.unshift(MenuItem({\r\n            text:       true,\r\n            tag:        'div',\r\n            toggle:     false,\r\n            label:      TagInputText({\r\n                bsSize:     tagData.bsSize,\r\n                tabIndex:   \"0\",\r\n                placeholder: tagData.t('edplaceholder'),\r\n                onChange:   (txt) => tagData.newItem(txt),\r\n                // onClose:    () => toggleDropdown(),\r\n            }),\r\n        }));\r\n    }\r\n\r\n\r\n    return DropdownMenu(...list)\r\n\r\n}\r\n\r\n\r\n\r\nfunction OptionItem ({tagData, item}) {\r\n\r\n    const noclose = tagData.multi && !tagData.closeOnCheck ? event => {event.preventDefault(); event.stopPropagation();} :  ()=>{}; \r\n    const checked = () => !!tagData.items.val.find( e => removeSign(e) === item.value );\r\n\r\n    if (item.value === '') {\r\n        return MenuItem({class: \"py-0\", divider:1})    // ciao divider ..\r\n    }\r\n\r\n    return MenuItem({\r\n        label:  div(\r\n            {class: \"d-flex align-items-center\"},\r\n            () => checked() ? tagData.icons.IconCheck({class:\"me-1\"}) : tagData.icons.IconUncheck({class:\"me-1\"}),\r\n            item.children\r\n        ),\r\n        class: \"py-0\", \r\n        onclick:    (event) => {\r\n            noclose(event);\r\n            if (event.ctrlKey)\r\n                tagData.checkAll(item.value, !checked())\r\n            else\r\n                tagData.checkItem(item.value, !checked());\r\n        },\r\n        onkeydown: (event) => {\r\n            if (event.which === 32) {\r\n                noclose(event);\r\n                if (event.ctrlKey)\r\n                    tagData.checkAll(item.value, !checked())\r\n                else\r\n                    tagData.checkItem(item.value, !checked());\r\n            }\r\n        },\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction TagInputText ({onChange, ...props}) {\r\n\r\n    var value = '';\r\n\r\n    const Control = Input({\r\n        type:           'text',\r\n        value:          value,\r\n        bsSize:         props.bsSize,\r\n        placeholder:    props.placeholder,\r\n        oninput(event)  {value = event.target.value},\r\n        onblur()        {onChange(value)},\r\n        onkeypress(event) {\r\n            if (SUBMIT_KEYS.includes(event.key) ) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                onChange(value);\r\n                value = '';\r\n            }\r\n        },\r\n    })\r\n\r\n    return Control;\r\n}\r\n\r\n\r\nfunction ControlFrame({class: clas, bsSize, ...props}={}, ...children) {               // a form control look like frame\r\n    return div({\r\n            class: () => {\r\n                let res = 'form-control';\r\n                if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n                if(van.val(clas)) res += ' ' + van.val(clas);\r\n                return res;\r\n            },\r\n            ...props,\r\n        },\r\n        ...children\r\n    )\r\n}\r\n\r\nfunction InputGroup({class: clas, bsSize, ...props}={}, ...children) {               // a form control look like frame\r\n    return div({\r\n            class: () => {\r\n                let res = 'input-group';\r\n                if(van.val(bsSize)) res += ' input-group-' + van.val(bsSize);\r\n                if(van.val(clas)) res += ' ' + van.val(clas);\r\n                return res;\r\n            },\r\n            ...props,\r\n        },\r\n        ...children\r\n    )\r\n}\r\n\r\n\r\nfunction valueToDisplay (options, value) {\r\n    var oItem = options.find( o => o.value === value );             // lookup in options to get associated display value\r\n    if (oItem) value = oItem.children;\r\n    return value;\r\n}\r\n\r\n\r\nfunction updateOptions (options, value) {\r\n    options = selectOptions(options);                               // split value / display\r\n    value.forEach( v => {\r\n        v = removeSign(v);\r\n        if (!options.find(o => o.value === v))                      // add value if not in options \r\n            options.unshift({value: v, children: v, key: v});\r\n    });\r\n    return options;\r\n}\r\n\r\n\r\n\r\nexport default TagInput;\r\n","export var version = `vanjs-bootstrap 1.0.3 LICENSE MIT (c) 2023 by Geoffrey Emmans`;\r\n\r\nexport {typeMap,FormGroup,FormController,FormBuilder} from './form-controls';\r\nexport {Input,FormLabel,SelectInput,RadioSelectInput,FormCheckInput,SwitchInput,CheckboxInput,RadioInput,ComboboxInput}  from './form-controls';\r\nexport {Button}  from './form-controls';\r\nexport {ModalFrame,Modal,CloseButton,PopupMenuFrame,DropdownMenu,MenuItem,PopupMenu,ContextMenu} from './modal';\r\nexport {Navbar,NavItem,NavLink,NavMenu} from './navbar';\r\nexport {default as selectOptions} from './select-options';\r\nexport {default as I18n} from './i18n';\r\nexport {iconMap, getIcon, setIcon, setWarning, SvgIconBase, GenIcon, ImgIcon, SvgStrIcon, Icon} from './icon-map';\r\nexport {default as TagInput} from './tag-input';\r\nexport {default as DragSort} from './drag-sort';\r\n"],"names":["option","van","tags","log","console","warn","parseSelectOptions","value","dom","selected","Array","isArray","obj","text","toArray","map","v","i","mergeAndTranslate","result","children","length","some","key","undefined","o","attr","split","_van$tags","button","div","input","label","textarea","select","typeMap","Map","FormLabel","_ref","clas","bsSize","col","props","_objectWithoutPropertiesLoose","_excluded","_extends","class","res","val","Input","_ref2","isvalid","_excluded2","SelectInput","_ref4","_excluded4","_props$options","options","rest","_excluded5","selectOptions","RadioSelectInput","args","inline","id","oninput","name","disabled","_excluded6","Math","random","toString","substring","iteminput","ev","target","type","items","index","itemId","checked","for","FormCheckInput","_ref5","clabel","style","reverse","_excluded7","isSwitch","apply","stopPropagation","_ev$target","role","concat","slice","call","arguments","ComboboxInput","_van$tags2","a","ul","li","_props$options2","onItemClick","inputProps","_excluded8","dvalue","state","valueToDisplay","displayToValue","oItem","find","event","Button","dropdown","href","onclick","selItem","selectClick","FormGroup","_ref6","_ref7","inputEl","labelEl","_inputClass","inputClass","cols","separated","_excluded9","g_id","i_id","domInput","get","includes","_cols$split","col_l","col_r","Number","push","FormController","_temp","values","listeners","ccount","self","onChange","func","offChange","filter","f","emitChange","forEach","handleInput","_event$target","_ref9","_value","_args2$name","_args2$oninput","_ref11","_ref11$color","color","outline","_ref11$type","_excluded11","set","_ref3","_excluded3","h5","ModalFrame","_args","header","body","footer","_args$close","close","_args$centered","centered","scrollable","position","width","_args$dialogstyle","dialogstyle","_args$bodystyle","bodystyle","left","top","dialogClass","contentClass","tabindex","CloseButton","Modal","_options$dispose","_bsm","skipdispose","disposeOnHide","dispose","isOpen","modalResult","open","bsm","show","hide","asyncOpen","Promise","resolve","addEventListener","e","reject","BsModal","onShown","onHidden","remove","PopupMenuFrame","item","HTMLElement","MenuItem","DropdownMenu","span","hr","noclick","preventDefault","divider","active","tag","classf","cl","nav","NavItem","_ref2$href","icon","_ref2$level","level","Comp","_ref2$hidden","hidden","_ref2$t","t","title","NavMenu","NavLink","_ref3$level","_ref4$t","mergeObjects","obj1","obj2","p","constructor","Object","iconMap","warning","warnMap","getIcon","SvgIconBase","_van$tagsNS","size","svgProps","computedSize","className","tagsNS","svg","stroke","fill","height","SvgStrIcon","str","svgargs","_temp2","_ref3$size","document","createElement","innerHTML","firstChild","keys","setAttribute","Icon","_temp3","startsWith","fontSize","s","DragSort","list","setList","dragProps","draggable","ondragstart","onDragStart","ondrop","onDrop","ondragover","onDragOver","ondragleave","onDragLeave","isDropArea","dragAndDrop","draggedTo","initialPosition","currentTarget","dataset","setDragAndDrop","draggedFrom","isDragging","originalOrder","dataTransfer","setData","newList","itemDragged","remainingItems","updatedOrder","SUBMIT_KEYS","hasSign","removeSign","IconDelete","IconCheck","IconUncheck","IconAsc","IconDsc","i18nWords","ascending","descending","edplaceholder","TagList","tagData","loading","ControlFrame","tagColor","replace","drag","dragSort","multi","listvalue","saveItems","idx","itemProps","desc","DelIcon","c","checkItem","icons","delIcon","orderIcon","onOrderClick","TagItem","placeholder","toggleDropdown","TagInputText","onblur","onkeypress","updateOptions","unshift","menu","modal","open1","clientX","clientY","_ref10","_ref10$rowClass","rowClass","_ref10$formClass","formClass","autoRow","toInt","n","isNaN","fc","form","row","colCount","valid","onvalidate","getFormValid","every","k","add","_excluded10","_c$split","l","r","addRow","addGroup","_self$row","arg","data","Tree2Element","tree","node","child","_van$tagsNS2","i18n","dict","language","languageDefault","setLanguage","String","toLowerCase","getLanguage","path","err","getProp","pop","tPath","endsWith","addWords","words","lang","chapter","_words","_words2","src","alt","_ref2$size","_ref2$style","img","_ref$sticky","sticky","_ref$t","brand","_style","dropdownBtn","tagOptions","_ref$commaValue","commaValue","_ref$options","onContextMenu","_ref$dragSort","_ref$delIcon","_ref$orderIcon","_ref$allowCreate","allowCreate","_ref$multi","_ref$bsSize","_ref$closeOnCheck","closeOnCheck","_ref$tabindex","_i18nWords$t","check","this","join","checkAll","indexOf","is_desc","next","newItem","hideDropdown","showDropdown","click","noclose","ctrlKey","onkeydown","which","OptionItem","toggle","tabIndex","txt","TagOptions","_ref8","InputGroup"],"mappings":"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"}