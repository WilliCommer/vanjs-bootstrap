{"version":3,"file":"lib.umd.js","sources":["../src/select-options.js","../src/form-controls.js","../src/modal.js","../src/navbar.js","../src/i18n.js","../src/icon-map.js"],"sourcesContent":["/**\r\n \r\nInput:\r\n    'a,b,c'\r\nor\r\n    ['a','b'...]\r\nor\r\n    [['text1',1],['text2',2]]\r\nor\r\n    [{\r\n        value: 3,\r\n        ['children' || 'text' || 'displayValue']\r\n    } \r\n\r\n\r\noutput:\r\n    [{\r\n        value: 1,\r\n        children: 'text 1',\r\n    },{\r\n        value: 2,\r\n        children: 'text 2',\r\n    }]    \r\n\r\n\r\nusage:\r\n    input(\r\n        {type: 'select', value, oninput},\r\n        selectOptions(optionList, true)\r\n    )\r\n\r\n\r\n\r\n\r\nMerge and Translate\r\n\r\nconst translate = txt => (txt==='None,Left,Right') ? 'Nix,Links,Rechts' : txt;\r\n\r\nInput:\r\n    {\r\n        value: ',1,2',                          // required,    array acepted\r\n        text:  translate('None,Left,Right'),    // should,      array acepted\r\n    }\r\n\r\noutput:    \r\n    [{\r\n        value:      '',\r\n        children:   'Nix',\r\n    },{\r\n        value:      1,\r\n        children:   'Links',\r\n    }]    \r\n    },{\r\n        value:      2,\r\n        children:   'Rechts',\r\n    }]    \r\n\r\n\r\n  \r\n */\r\n\r\n\r\n\r\n\r\n\r\n    \r\nimport van from 'vanjs-core';\r\n\r\nconst {option} = van.tags;\r\n\r\nconst log = 1 ? console.warn : ()=>{};\r\n\r\nexport default function parseSelectOptions (value, dom, selected) {\r\n\r\n    // check input value\r\n\r\n    if (value && !Array.isArray(value) && typeof value === 'object' && !!value.value )\r\n        value = mergeAndTranslate(value);\r\n    \r\n    value = toArray(value || [], true);\r\n\r\n    value = value.map( \r\n\r\n        function( option ) {\r\n\r\n            let result = {                          // object template for one <option>\r\n                value:      '',\r\n                children:   '',\r\n                // key:        index + 1\r\n            };\r\n\r\n            // case: empty\r\n\r\n            if (!option) return result;\r\n\r\n\r\n            // case: [['a',1],['b']]\r\n\r\n            if (Array.isArray(option)) {\r\n                if (option.length > 0) {\r\n                    result.value    = option[0];\r\n                    result.children = option[0];\r\n                }\r\n                if (option.length > 1) {\r\n                    result.value    = option[1];\r\n                }\r\n                return result;\r\n            };\r\n            \r\n            // case: [{value: ...}, ...]\r\n\r\n            if (typeof option === 'object') {\r\n                result.value    = option.value;\r\n                result.children = option.value;\r\n                ['children','text','displayValue']\r\n                .some( key => {\r\n                    if (option[key] !== undefined) {\r\n                        result.children = option[key];\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                })\r\n                return result;\r\n            }\r\n\r\n            \r\n            // case: ['a','b'...]\r\n\r\n            result.value    = option;\r\n            result.children = option;\r\n            return result;\r\n        }\r\n    );\r\n\r\n\r\n    return dom \r\n        ? value.map( o => {\r\n            let attr = {value: o.value};\r\n            if(selected !== undefined && o.value === selected) attr.selected=true;\r\n            return option( attr, o.children )\r\n        }) \r\n        : value;\r\n\r\n}\r\n\r\n\r\n\r\nfunction toArray (value, warn) {\r\n    if (!value) return [];\r\n    if (typeof value === 'string') \r\n        value = value.split(',');\r\n    if (!Array.isArray(value)) {\r\n        warn && log('parseSelectOptions value invalid');\r\n        value = [];\r\n    }\r\n    return value;\r\n}\r\n\r\n\r\n\r\nfunction mergeAndTranslate (obj) {\r\n\r\n    var {value,text} = obj;\r\n    if (!value) \r\n        return [];\r\n    value   = toArray(value, true);\r\n    text    = toArray(text, false);\r\n\r\n    return (\r\n        value.map( (v,i) => ({\r\n            value:  v,\r\n            text:   text[i]\r\n        }))\r\n    )\r\n}\r\n","import van from 'vanjs-core';\r\nimport selectOptions from './select-options';\r\n\r\nconst {a, button, div, input, label, li, ul, select} = van.tags;\r\n\r\n\r\nexport var typeMap = new Map();\r\n\r\ntypeMap.set( 'text',            Input);\r\ntypeMap.set( 'textarea',        Input);\r\ntypeMap.set( 'select',          SelectInput);\r\ntypeMap.set( 'radioselect',     RadioSelectInput);\r\ntypeMap.set( 'checkbox',        FormCheckInput);\r\ntypeMap.set( 'radio',           FormCheckInput);\r\ntypeMap.set( 'switch',          FormCheckInput);\r\ntypeMap.set( 'combobox',        ComboboxInput);\r\n\r\n\r\n\r\nexport function Input({class: clas, bsSize, ...props}) {\r\n    const cl = () => {\r\n        let res = 'form-control';\r\n        if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    return input({class: cl, ...props});\r\n}\r\n\r\n\r\nexport function FormLabel({class: clas, bsSize, col, ...props}, children) {\r\n    const cl = () => {\r\n        let res = 'form-label';\r\n        if(van.val(col)) {\r\n            res = 'col-form-label';\r\n            if(van.val(bsSize)) {\r\n                res += ' col-'+van.val(bsSize)+'-'+van.val(col)+' col-form-label-'+van.val(bsSize);\r\n            } else {\r\n                res += ' col-'+van.val(col);\r\n            }\r\n        } else {\r\n            if(van.val(bsSize)) {\r\n                res += ' col-form-label-'+van.val(bsSize);\r\n            }\r\n        }\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    return label({class: cl, ...props}, children);\r\n}\r\n\r\n\r\n\r\nexport function SelectInput ({class: clas, bsSize, ...props}) {\r\n    const cl = () => {\r\n        let res = 'form-select';\r\n        if(van.val(bsSize)) res += ' form-select-' + van.val(bsSize);\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n\r\n    let { options = [],  ...rest } = props;\r\n    if (typeof options !== 'function') {\r\n        options = selectOptions(options, true, props.value);\r\n    } else {\r\n        options = options()\r\n    }\r\n    return select({class: cl, ...rest}, options);\r\n}\r\n\r\n\r\n\r\nexport function RadioSelectInput ({options, class: clas, bsSize, inline, id, ...props}) {\r\n\r\n    let name = props.name || Math.random().toString(36).substring(2, 9);\r\n    id = id || 'rgi_' + name\r\n    options = selectOptions(options);\r\n\r\n    const oninput = ev => {\r\n        let value = ev.target.value;\r\n        props.oninput && props.oninput({target: { \r\n            name, \r\n            value, \r\n            type:   'radiogroup'\r\n        }});\r\n    }\r\n\r\n    const items = options.map( (option, index) => {\r\n        let itemId = id+'_'+index;\r\n        return div({\r\n            class: 'form-check' + (inline ? ' form-check-inline' : '')\r\n            },\r\n            input({\r\n                class:      'form-check-input',\r\n                type:       'radio',\r\n                id:         itemId,\r\n                value:      option.value,\r\n                name,\r\n                checked:    props.value === option.value,\r\n                oninput,\r\n            }),\r\n            label({ class: 'form-check-label', for: itemId }, option.children)\r\n        );\r\n    });\r\n\r\n    return div( \r\n        {\r\n            class: () => {\r\n                let res = 'form-control';\r\n                if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n                if(van.val(clas)) res += ' ' + van.val(clas);\r\n                return res;\r\n        }},\r\n        items,\r\n    )\r\n}\r\n\r\n\r\n\r\nexport function FormCheckInput ({label: clabel, type, class: clas, style, bsSize, reverse, id, value, ...props}) {\r\n\r\n    id = id || Math.random().toString(36).substring(2, 9);\r\n\r\n    var isSwitch = type === 'switch';\r\n\r\n    if(isSwitch) type = 'checkbox';\r\n\r\n    var inputClass = 'form-check-input';\r\n    if (clas && van.val(clas).includes('form-control')) {\r\n        inputClass += ' ms-0 me-2';\r\n    }\r\n\r\n    const oninput = ev => {\r\n        var {checked, name, type} = ev.target;\r\n        checked = !!checked;\r\n        props.oninput({\r\n            target: {\r\n                value: checked,\r\n                checked, name, type\r\n            }\r\n        });\r\n    }\r\n\r\n    const Label = () => {\r\n        if (!clabel) {\r\n            return null;\r\n        }\r\n        return label({class: 'form-check-label', for: id}, clabel);\r\n    }\r\n\r\n    return div({\r\n        class: () => {\r\n            let res = 'form-check';\r\n            if(isSwitch) res += ' form-switch';\r\n            if(van.val(bsSize)) res += ' form-control-' + van.val(bsSize);\r\n            if(van.val(reverse)) res += ' form-check-reverse';\r\n            if(van.val(clas)) res += ' ' + van.val(clas);\r\n            return res;\r\n        },\r\n        style,\r\n        },\r\n        input({\r\n            ...props,\r\n            class: inputClass,\r\n            id,\r\n            type,\r\n            checked: value || false,\r\n            oninput,\r\n            role: isSwitch ? 'switch' : undefined,\r\n            },\r\n        ),\r\n        Label\r\n    )\r\n}\r\n\r\n\r\nexport const SwitchInput = props => FormCheckInput({...props, type: 'switch'});\r\nexport const CheckboxInput = props => FormCheckInput({...props, type: 'checkbox'});\r\nexport const RadioInput = props => FormCheckInput({...props, type: 'radio'});\r\n\r\n\r\n\r\nexport function FormGroup({ name, label, input, class: clas, bsSize, cols,id, ...props}) {\r\n    const cl = () => {\r\n        let res = '';\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    let g_id = id ?? Math.random().toString(36).substring(2, 9);\r\n    let i_id = 'i_' + g_id;\r\n    let domInput = input ?? typeMap.get(props.type) ?? Input;\r\n\r\n    if(cols) {\r\n        let [col_l, col_r] = cols.split(' ');\r\n        return [\r\n            FormLabel({bsSize, col: col_l, for: i_id}, label),\r\n            div({\r\n                class: () => {\r\n                    let res = col_r ? `col-${col_r}` : 'col';\r\n                    if(['checkbox','radio','switch'].includes(props.type)) res += ' pt-2';\r\n                    return res;\r\n                }},\r\n                domInput({bsSize, name, id: i_id, ...props})\r\n            )\r\n        ]\r\n    }\r\n\r\n\r\n    return div({class: cl, id: g_id, ...props},\r\n        FormLabel({bsSize, for: i_id}, label),\r\n        domInput({bsSize, name, id: i_id, ...props})\r\n    );\r\n}\r\n\r\n\r\n\r\n/*\r\n\r\n    ComboboxInput\r\n    a input control with dropdown options\r\n\r\n    props: {\r\n        // in\r\n        value,                                                  // require\r\n        options     [[text,value]] or 'value1,value2'           // should\r\n        class                                                   // optional\r\n        style                                                   // optional\r\n                                                 \r\n        // out\r\n        oninput(event),                                        // require\r\n\r\n        onItemClick,  (value,selItem) => must return value !    // optional\r\n        - vaue = selItem.value\r\n        - selItem = [text,value]  \r\n    }\r\n\r\n*/\r\n\r\nexport function ComboboxInput (props) {\r\n\r\n    var {\r\n        options = [],\r\n        style,\r\n        bsSize,\r\n        onItemClick,\r\n        ...inputProps                                               // name, value, oninput ...\r\n    } = props;\r\n\r\n    options = selectOptions(options);\r\n\r\n    var dvalue = van.state(valueToDisplay(options, van.val(props.value)));  // declare display value as van.state\r\n\r\n    function displayToValue (options, value) {\r\n        let oItem = options.find( o => o.children === value );      // lookup in options to get associated value\r\n        if (oItem) value = oItem.value;                             // value fount, otherwise it's still the caption\r\n        return value;\r\n    }\r\n    \r\n    function valueToDisplay (options, value) {\r\n        var oItem = options.find( o => o.value === value );             // lookup in options to get associated display value\r\n        if (oItem) value = oItem.children;\r\n        return value;\r\n    }\r\n        \r\n    function selectClick (value) {                                  // value is the clicked list caption\r\n        let {name,type} = props;\r\n        value = displayToValue(options, value);\r\n\r\n        if (onItemClick) {                                          // this event is handeld external\r\n            let selItem = options.find( o => o.children === value );\r\n            value = onItemClick(value,selItem);\r\n        }\r\n\r\n        props.oninput({                                            // set input to clicked value\r\n            target: {name, value, type}\r\n        });\r\n\r\n        dvalue.val = valueToDisplay(options, value);\r\n\r\n        return false;  // don't change browser hash\r\n    };\r\n\r\n    \r\n    return div({\r\n        style: van.val(props.style),\r\n        class: () => {\r\n            let res = 'input-group';\r\n            if(van.val(props.bsSize)) res += ' input-group-' + van.val(props.bsSize);\r\n            if(van.val(props.class)) res += ' ' + van.val(props.class);\r\n            return res;\r\n        }},\r\n\r\n        Input({\r\n            ...inputProps,\r\n            value: dvalue,\r\n            oninput: event => {\r\n                let {value} = event.target;\r\n                dvalue.val = value;\r\n                props.oninput({\r\n                    target: {\r\n                        value:  displayToValue(options, value),\r\n                        name:   props.name,\r\n                        type:   props.type\r\n                    }\r\n                })\r\n            }\r\n        }),\r\n\r\n        div({class: \"dropdown\"},\r\n            button({class: \"btn btn-secondary dropdown-toggle\", type: \"button\", \"data-bs-toggle\": \"dropdown\", \"aria-expanded\": \"false\"}),\r\n            ul({class: \"dropdown-menu\"},\r\n                options.map( (o) => li(\r\n                    a({\r\n                        class: \"dropdown-item\", href: \"#\",\r\n                        onclick: () => selectClick(o.children)\r\n                    }, o.children)\r\n                ))\r\n            )\r\n        )\r\n    )\r\n}\r\n\r\n\r\n\r\nexport function FormController ({values} = {}) {\r\n    const isVanState = v => van.val(v) !== v;\r\n    var listeners = [];\r\n    var ccount = 1;\r\n    var self = {\r\n        values: {...(values ?? {})},\r\n        onChange (func) { listeners.push(func); return () => self.offChange(func); },\r\n        offChange (func) { listeners = listeners.filter( f => f !== func) },\r\n        emitChange (name, value) { listeners.forEach( f => f(name, value)) },\r\n        handleInput (event) {\r\n            let {name, value} = event.target;\r\n            if (isVanState(self.values[name])) {\r\n                self.values[name].val = value;\r\n            } else {\r\n                self.values[name] = value;\r\n            }\r\n            self.emitChange( name, value );\r\n        },\r\n        args (args = {}) {\r\n            let {name = `v${ccount++}`, value, oninput = self.handleInput} = args;\r\n            value = value ?? self.values[name] ?? '';\r\n            self.values[name] = value;\r\n            return {name, value, oninput}\r\n        }\r\n    }\r\n    return self;\r\n}\r\n\r\n\r\nexport function FormBuilder (dom) {\r\n    var fc = FormController();\r\n    var self = {\r\n        ...fc,\r\n        dom: dom ?? van.tags('form'),\r\n        row: null,\r\n        add (props, dom) {\r\n            let {name, value, oninput, ...rest} = props;\r\n            let args = {...rest, ...fc.args({name, value, oninput}) };\r\n            van.add(dom ?? self.row ?? self.dom, FormGroup(args));\r\n        },\r\n        addRow (arg) {\r\n            if(arg === null) return self.row=null;\r\n            self.row = div({class: \"row\" + (arg ? ' '+arg : '')});\r\n            van.add(self.dom, self.row);\r\n            return self.row;\r\n        }\r\n    }\r\n    return self;\r\n}\r\n\r\n\r\n\r\nexport function Button ({bsSize, class: clas, color='secondary', outline, dropdown, type='button', ...props}, children) {\r\n    const cl = () => {\r\n        let res = 'btn';\r\n        if(van.val(color)) \r\n            if(van.val(outline)) res += ' btn-outline-'+ van.val(color);\r\n            else res += ' btn-'+ van.val(color);\r\n        if(van.val(bsSize)) res += ' btn-' + van.val(bsSize);\r\n        if(van.val(dropdown)) res += \" dropdown-toggle\";\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    if(van.val(dropdown)) props[\"data-bs-toggle\"] = \"dropdown\"; \r\n\r\n    return button({type, class:  cl, ...props}, children);\r\n}\r\n    \r\n","import van  from 'vanjs-core';\r\nimport {Modal as BsModal} from 'bootstrap';\r\n\r\nconst {div, button} = van.tags;\r\n\r\nexport function ModalFrame (args = {}) {\r\n\r\n    var {\r\n        id, class: modalClass,\r\n        header, body, footer, \r\n        close = true,\r\n        centered = true,\r\n        scrollable,\r\n        position,\r\n        // width = '40em',\r\n        width,\r\n        // bodyProps,\r\n        color,\r\n        dialogstyle = \"\",\r\n        bodystyle = \"\",\r\n        ...props\r\n    } = args;\r\n\r\n    if (width) dialogstyle += `width: ${width};`;\r\n    if (width) dialogstyle += `max-width: inherit;`;\r\n    if (position) {\r\n        dialogstyle += `margin-left: ${position.left}px; margin-top: ${position.top}px;`;\r\n        centered = false;\r\n    }\r\n\r\n    const dialogClass = \"modal-dialog\" \r\n      + (centered ? \" modal-dialog-centered\" : \"\")\r\n      + (scrollable ? \" modal-dialog-scrollable\" : \"\");\r\n\r\n    const contentClass = \"modal-content\" + (color ? \" \" + color : \"\");\r\n\r\n\r\n    return (\r\n        div({class: () => \"modal\", id, \"aria-hidden\": \"true\", tabindex:\"-1\", ...props},\r\n        div({class: dialogClass, style: dialogstyle},\r\n            div({class: contentClass},\r\n                ((header || close)\r\n                  ? (div({class:\"modal-header\"},\r\n                    header, (close ? CloseButton : null)))\r\n                  : null\r\n                ),\r\n                (body && div({class: \"modal-body\", style: bodystyle}, body)),\r\n                (footer && div({class: \"modal-footer\"}, footer)),\r\n            )\r\n        )\r\n    )\r\n    )\r\n}\r\n\r\n\r\n/*\r\n\r\n## Options\r\n\r\n| Name | Type |\tDefault | Description |\r\n| ---  | ---  | ---     | ---         | \r\n| backdrop | boolean, 'static' | true | Includes a modal-backdrop element. Alternatively, specify static for a backdrop which doesn‚Äôt close the modal when clicked. |\r\n| focus | boolean | true | Puts the focus on the modal when initialized. |\r\n| keyboard | boolean | true | Closes the modal when escape key is pressed. |\r\n| dispose | boolean | true | Dispose dialog on hide |\r\n\r\n\r\n*/\r\n\r\nexport function Modal (args = {}, options) {\r\n\r\n    var _bsm;\r\n    var disposeOnHide = options?.dispose ?? true;\r\n    var skipdispose;\r\n    var self = {\r\n        dom:            null,\r\n        isOpen:         false,    \r\n        modalResult:    undefined,  \r\n        \r\n        open (left,top) {\r\n            self.modalResult = undefined;\r\n            if(left != undefined && top != undefined) {\r\n                args = {...args, position: {left,top}}\r\n            }\r\n            self.bsm.show();\r\n        },\r\n\r\n        close (result) {\r\n            self.modalResult = result;\r\n            self.bsm.hide();\r\n        },\r\n\r\n        async asyncOpen (left,top) {\r\n            return new Promise( (resolve) => {\r\n                self.open(left,top);\r\n                self.dom.addEventListener('hidden.bs.modal', ()=>resolve(self.modalResult));\r\n            });\r\n        },\r\n    \r\n        get bsm() {\r\n            if(!_bsm) {\r\n                self.dom = ModalFrame(args);\r\n                _bsm = new BsModal(self.dom, options);\r\n                self.dom.addEventListener('shown.bs.modal', self.onShown)\r\n                self.dom.addEventListener('hidden.bs.modal', self.onHidden)\r\n            }\r\n            return _bsm;\r\n        },\r\n\r\n        dispose () {\r\n            if(_bsm) {\r\n                _bsm.dispose();\r\n                _bsm = null;\r\n            }\r\n            if(self.dom) {\r\n                self.dom.remove();\r\n                self.dom = null;\r\n            }\r\n        },\r\n\r\n        hide (dispose) { \r\n            skipdispose = dispose;\r\n            _bsm.hide() \r\n        },\r\n        show () { _bsm.show() },\r\n\r\n        onShown (event) {\r\n            self.isOpen = true;\r\n        },\r\n        onHidden (event) {\r\n            self.isOpen = false;\r\n            if(skipdispose) {\r\n                skipdispose = false\r\n            } else {\r\n                if(disposeOnHide) self.dispose();\r\n            }\r\n        },\r\n\r\n//         show () { return self.bsm.show() },\r\n\r\n    }\r\n\r\n    return self;\r\n}\r\n\r\n\r\n\r\nexport function CloseButton({class: clas} = {}, children) { \r\n    return button({\r\n        type:\"button\", \r\n        class: clas ? clas : \"btn-close\", \r\n        \"data-bs-dismiss\": \"modal\", \r\n        \"aria-label\":\"Close\"\r\n    },\r\n    children\r\n    ) \r\n};\r\n\r\n\r\n\r\nexport function PopupMenuFrame (...children) {\r\n    const {ul} = van.tags;\r\n    return ul({\r\n        class: \"dropdown-menu\", \r\n        style: \"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;\"\r\n        },\r\n        ...children.map( item => item instanceof HTMLElement ? item : MenuItem(item))\r\n    )\r\n}\r\n\r\nexport function DropdownMenu (...children) {\r\n    const {ul} = van.tags;\r\n    return ul({class: \"dropdown-menu\"},\r\n        ...children.map( item => item instanceof HTMLElement ? item : MenuItem(item))\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport function MenuItem (props)  {\r\n    const {li,span,hr,button} = van.tags;\r\n    const noclick = event => {event.preventDefault(); event.stopPropagation();}; \r\n    var {label, header, divider, text, active, disabled, class: clas, ...rest} = props;\r\n    var classf = (cl) => () => {\r\n        let res = cl;\r\n        if(van.val(active)) res += ' active';\r\n        if(van.val(disabled)) res += ' disabled';\r\n        if(van.val(clas)) res += ' ' + van.val(clas);\r\n        return res;\r\n    }\r\n    if(header)\r\n        return li(span({class: classf(\"dropdown-header fw-bold border-bottom\"), onclick: noclick, ...rest}, label));\r\n    if(divider)\r\n        return li(hr({class: classf(\"dropdown-divider\"), onclick: noclick, ...rest}, label));\r\n    if(text)\r\n        return li(span({class: classf(\"dropdown-item-text\"), onclick: noclick, ...rest}, label));\r\n    return li(button({class: classf(\"dropdown-item\"), role:\"button\", ...rest}, label));\r\n}\r\n\r\n\r\nexport function PopupMenu (...items) {\r\n    const menu = PopupMenuFrame(...items);\r\n    const modal = Modal({\r\n        close: false,               // don't show any header\r\n        dialogstyle: \"display: table; padding: 0;\",\r\n        bodystyle: \"padding: 0;\",\r\n        body: menu,\r\n    });\r\n    menu.addEventListener('click', ()=>modal.close());\r\n    return modal;\r\n}\r\n\r\n\r\nexport function ContextMenu (...items) {\r\n    const menu = PopupMenuFrame(...items);\r\n    const modal = Modal({\r\n        close: false,               // don't show any header\r\n        dialogstyle: \"display: table; padding: 0;\",\r\n        bodystyle: \"padding: 0;\",\r\n        body: menu,\r\n    });\r\n    menu.addEventListener('click', ()=>modal.close());\r\n    const open1 = modal.open;\r\n    modal.open = event => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        open1(event.clientX, event.clientY);\r\n    }\r\n    return modal;\r\n}\r\n\r\n","\r\nimport van from 'vanjs-core';\r\n\r\nconst { div, button, hr, span, nav, a, ul, li } = van.tags;\r\n\r\n\r\nexport function Navbar({\r\n    class: clas,\r\n    sticky = true,\r\n    menu,\r\n    t = t=>t,\r\n    ...props\r\n}) {\r\n\r\n    const getClass = () => {\r\n        let res = \"navbar navbar-expand-lg bg-body-tertiary\";\r\n        if(sticky) res += \" sticky-top\";\r\n        if(van.val(clas)) res += \" \" + van.val(clas);\r\n        return res;\r\n    }\r\n\r\n    return nav({class: getClass},\r\n        div({class: \"container-fluid\" },\r\n            menu.brand,\r\n            button({ class: \"navbar-toggler\", type: \"button\", \"data-bs-toggle\": \"collapse\", \"data-bs-target\": \"#navbarSupportedContent\", \"aria-controls\": \"navbarSupportedContent\", \"aria-expanded\": \"false\", \"aria-label\": \"Toggle navigation\" },\r\n                span({ class: \"navbar-toggler-icon\" }),\r\n            ),\r\n\r\n            div({ class: \"collapse navbar-collapse\", id: \"navbarSupportedContent\" },\r\n                ul({ class: \"me-auto navbar-nav\" },\r\n                    menu.items.map( item => NavItem({...item,t}) ),\r\n                )\r\n            )\r\n        ),\r\n    )\r\n}\r\n\r\n\r\nexport function NavItem({href='#',label,icon,items,level=0,Comp,hidden=false,t=t=>t,...props}) {\r\n\r\n    if(typeof hidden === 'function') hidden = hidden();\r\n    if (hidden) return null;\r\n\r\n    (typeof label === 'function') && (label = label());\r\n    label = label ? t(van.val(label)) : '';\r\n    props.title && (props.title = t(van.val(props.title)));\r\n    // if(icon) label = <Icon icon={icon} title={label} />\r\n\r\n    if(items) {\r\n        return NavMenu({label,items,level,t,...props});\r\n    }\r\n\r\n    const cl = () => {\r\n        let res = \"nav-item\";\r\n        if(level !== 0) res = \"\";\r\n        if(van.val(props.class)) res += \" \" + van.val(props.class);\r\n        return res;\r\n    };\r\n\r\n    if (Comp) {\r\n        return li({class: cl}, Comp({href,label,icon,items,level,hidden,t,...props}));\r\n    }\r\n\r\n    return li({class: cl}, NavLink({...props, href, label, level}) );\r\n}\r\n\r\n\r\n\r\nexport function NavLink({label, class: clas, active, disabled, divider, level=0, ...props}) {\r\n\r\n    const cl = () => {\r\n        let res = \"nav-link\";\r\n        if(level !== 0) res = \"dropdown-item\";\r\n        if(van.val(active)) res += \" active\";\r\n        if(van.val(active) && level === 0) res += \" text-primary\";\r\n        if(van.val(disabled)) res += \" disabled\";\r\n        if(van.val(clas)) res += \" \" + van.val(clas);\r\n        return res;\r\n    };\r\n\r\n    if(divider) return hr({class: \"dropdown-divider\"});\r\n    return a({class: cl, href: '#', ...props}, label);\r\n}\r\n\r\n\r\nexport function NavMenu ({label, items, t= t=>t, level, ...props}) {\r\n\r\n    if(level > 0) // don't work ?\r\n        return li({},\r\n            a({class: \"dropdown-item\", href:\"#\"}, label + \" ¬ª\"),\r\n            // ul({class: \"dropdown-menu dropdown-submenu\"},\r\n            ul({class: \"submenu dropdown-menu\"},\r\n                items.map( item => NavItem({level: level + 1, t, ...item}) ),\r\n            ),\r\n        );\r\n\r\n    return li({class: \"nav-item dropdown\", id: \"NavDropdown\"+level},\r\n        // a({class: \"nav-link dropdown-toggle\", href: \"#\", role: \"button\", \"data-bs-toggle\": \"dropdown\", \"aria-expanded\": \"false\"}, label),\r\n        a({class: \"nav-link dropdown-toggle\", href: \"#\", \"data-bs-toggle\": \"dropdown\"}, label),\r\n        ul({class: \"dropdown-menu\"},\r\n            items.map( item => NavItem({level: level + 1, ...item, t, ...props}) ),\r\n        ),\r\n    );\r\n}\r\n\r\n","/*\r\n    I18n\r\n    form-lib translate\r\n*/\r\n\r\nexport default function I18n()  {\r\n\r\n    const i18n = {\r\n        dict:               {},\r\n        language:           'en',\r\n        languageDefault:    'en',\r\n        setLanguage (value) {\r\n            i18n.language = String(value).toLowerCase();\r\n            if (!i18n.dict[i18n.language])\r\n                i18n.language = i18n.languageDefault;\r\n        },\r\n        getLanguage () {return i18n.language},\r\n        t (key) {\r\n            if (typeof key === 'function') key = key();\r\n            if (!key) return '';\r\n            var res = getProp(i18n.dict[i18n.language], key);\r\n            if (!res) \r\n                res = key.split('.').pop();\r\n            return res;\r\n        },\r\n        tPath (path) {\r\n            if (!path.endsWith('.')) path = path + '.';\r\n            return function (key) {\r\n                return i18n.t(path + key);\r\n            };\r\n        },\r\n        addWords (words, lang, chapter) {\r\n            if (chapter) words = {[chapter]: words};\r\n            if (lang) words = {[lang]: words};\r\n            mergeObjects( i18n.dict, words );\r\n        }\r\n    };\r\n\r\n    return i18n;\r\n};\r\n\r\n\r\nfunction mergeObjects(obj1, obj2) {\r\n    for (var p in obj2) {\r\n        try {\r\n            if ( obj2[p].constructor===Object )\r\n                obj1[p] = mergeObjects(obj1[p], obj2[p]);\r\n            else\r\n                obj1[p] = obj2[p];\r\n        } catch(e) {\r\n            obj1[p] = obj2[p];\r\n        }\r\n    }\r\n    return obj1;\r\n}\r\n\r\n\r\nfunction getProp (obj, path) {\r\n    try {\r\n        path = path.split('.');\r\n        for (let i=0; i < path.length; i++) {\r\n            if (!obj) return obj;\r\n            obj = obj[path[i]];\r\n        };\r\n    } catch (err) {\r\n        return false;\r\n    }\r\n    return obj;\r\n};\r\n\r\n\r\n\r\n","import van from 'vanjs-core';\r\n\r\nexport var iconMap = new Map();\r\nvar warning = 0;\r\nvar warnMap = new Map();\r\n\r\n\r\nexport function getIcon (key) {\r\n    if (typeof key !== 'string') return false;\r\n    var res = iconMap.get(key);\r\n    if (!res && warning > 0 && !warnMap.get(key)) {\r\n        console.warn('Get unknown icon', key);\r\n        // console.trace();\r\n        warnMap.set(key,true);\r\n    }\r\n    return res; \r\n}\r\n\r\nexport function setIcon (key, value) {\r\n    if (warning > 1 && iconMap.get(key)) {\r\n        console.warn('Redefine icon', key);\r\n    }\r\n    iconMap.set(key,value);\r\n}\r\n\r\nexport function setWarning (value) {\r\n    switch (value) {\r\n        case 0: case 1: case 2:\r\n            warning = value;\r\n            break;\r\n        case 'all': warning = 2; break;\r\n        case 'get': warning = 1; break;\r\n        default: warning = 0;\r\n    }\r\n}\r\n\r\n\r\n/*\r\n    SvgIconBase \r\n\r\n    Is a base component wrapper for SVG icons. \r\n    The idea behind is to have a SVG image that size is 1em. So it fit to font-size.\r\n    fill should be \"currentColor\" to use the font-color.\r\n    The icon size (width and height) can be changed by \"size\" property\r\n\r\n    This is based on react-icons (https://github.com/react-icons/react-icons)\r\n\r\n    function MyIcon (props) {\r\n        return SvgIconBase({viewBox: \"0 0 100 100\", ...props},\r\n            rect({x:\"11.5\", y:\"9.4\", width:\"80\", height:\"80\", rx:\"4.4444\", ry:\"4.4444\", fill:\"none\" stroke-width:\"8\"})\r\n        )\r\n    }\r\n\r\n*/\r\n\r\nexport function SvgIconBase (props = {}, ...children) {\r\n\r\n    const {attr, size, title, ...svgProps} = props;\r\n    const computedSize = size || \"1em\";\r\n    let className = '';\r\n    if (props.class) className += (className ? className + ' ' : '') + props.class;\r\n    let style = props.color ? `color: ${props.color}; ` : '';\r\n    if(props.style) style += props.style;\r\n\r\n    return van.tagsNS(\"http://www.w3.org/2000/svg\").svg({\r\n        stroke: \"currentColor\",\r\n        fill: \"currentColor\",\r\n        \"stroke-width\": \"0\",\r\n        ...attr,\r\n        ...svgProps,\r\n        class: className,\r\n        style,\r\n        height: computedSize,\r\n        width: computedSize,\r\n        },\r\n        (title ? van.tagsNS(\"http://www.w3.org/2000/svg\").title(title) : null),\r\n        ...children\r\n    )\r\n}    \r\n\r\n\r\n\r\n/*\r\n    GenIcon(data) \r\n\r\n    where data is svg data tree:\r\n    {tag: \"svg\", attr: {viewBox: \"0 0 16 16\"}, child: [{tag: ..}, ..]}\r\n\r\n    This data format was found by react-icons. \r\n    The advantage is the generality of this format, which can be easily transformed, here into a VanJs function.\r\n    The first tag is usually \"svg\". In this function, if the first tag is missing, \r\n    an SvgIconBase function is generated, otherwise a standard SVG function.\r\n\r\n    const moon = GenIcon({\r\n        attr: {viewBox: \"0 0 16 16\"},\r\n        child:[{tag: 'path', attr: {d: \"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278M4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z\"}}\r\n        ]\r\n    });\r\n\r\n*/\r\n\r\nexport function GenIcon(data) {\r\n    \r\n    function Tree2Element(tree) {\r\n        return tree && tree.map(\r\n            (node, i) => van.tagsNS(\"http://www.w3.org/2000/svg\")[node.tag]({...node.attr}, Tree2Element(node.child))\r\n        );\r\n    }\r\n    \r\n    if(data.tag === \"svg\")\r\n        return (props={}) => van.tagsNS(\"http://www.w3.org/2000/svg\").svg({...data.attr, ...props}, ...Tree2Element(data.child));\r\n    return (props={}) => SvgIconBase({...data.attr, ...props}, ...Tree2Element(data.child));\r\n}\r\n\r\n\r\n\r\n/*\r\n    ImgIcon\r\n    Create a icon by image url. The \"size\" is injected as style so we can use units like \"em\".\r\n    For original size use \"inherit\".\r\n    \r\n    setIcon( 'KEY', ImgIcon({src: \"img/key.png\"}))\r\n*/\r\n\r\nexport function ImgIcon ({src, alt, ...rest}) {\r\n    return ({size='1em', style='', ...props} = {}) => van.tags.img({\r\n            src, \r\n            alt:    alt || src.split('/').pop(),\r\n            style:  style + `width:${size}; height:${size};`,\r\n            ...rest,\r\n            ...props\r\n        })\r\n}\r\n\r\n\r\n\r\n/*\r\n    SvgStrIcon(str, svgargs)\r\n    Create a icon from a SVG string. svgargs will overwrite svg attributes like fill and stroke.\r\n\r\n    SvgStrIcon(\r\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\"><circle cx=\"5\" cy=\"5\" r=\"3\"/></svg>',\r\n        {fill: 'currentColor', stroke: 'currenColor}\r\n    )\r\n*/\r\n\r\nexport function SvgStrIcon (str, svgargs = {}) {\r\n    return ({size='1em', ...props} = {}) => {\r\n        var dom = document.createElement('div');\r\n        dom.innerHTML = str;\r\n        dom = dom.firstChild;\r\n        props.width = size;\r\n        props.height = size;\r\n        Object.keys(svgargs).forEach( key => dom.setAttribute(key, svgargs[key]));\r\n        Object.keys(props).forEach( key => dom.setAttribute(key, props[key]));\r\n        return dom;\r\n    }\r\n}\r\n\r\n\r\n\r\n/*\r\n    Icon( anything, {size, ...props} )\r\n\r\n    // key of icon in iconMap\r\n    anything = 'key'    \r\n\r\n    // UTF-8 char\r\n    anything = 'üó∫Ô∏è'\r\n\r\n    // SVG string\r\n    anything = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\"><circle cx=\"5\" cy=\"5\" r=\"3\"/></svg>'\r\n\r\n    // modified SVG string\r\n    anything = SvgStrIcon('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\"><circle cx=\"5\" cy=\"5\" r=\"3\"/></svg>',\r\n         {fill: 'currentColor', stroke: 'currentColor'}));\r\n\r\n    // Image URL\r\n    anything = ImgIcon({src: \"https://avatars.githubusercontent.com/u/25134550\", class: \"rounded-4\"})\r\n\r\n    // react-icon object\r\n    anything = GenIcon({tag: \"svg\",attr: {viewBox:\"0 0 30 10\"},child: [\r\n        {tag: \"circle\", attr: {cx:\"5\", cy:\"5\", r:\"3\", stroke:\"green\"}},\r\n        {tag: \"circle\", attr: {cx:\"15\", cy:\"5\", r:\"3\", stroke:\"green\", \"stroke-width\": \"3\"}}\r\n    ]})\r\n\r\n    // VanJs function\r\n    const {path} = van.tagsNS(\"http://www.w3.org/2000/svg\");\r\n    anything = props => SvgIconBase({viewBox: \"0 0 16 16\", ...props},\r\n        path({d: \"M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z\"})\r\n    );\r\n\r\n    // Font Awesome class\r\n    anything = \"fa-solid fa-beer-mug-empty\"\r\n\r\n\r\n    size = '16px' || '2.5em' || '60%' || 'inherit'\r\n\r\n*/\r\n\r\n\r\nexport function Icon (icon, {size, ...props} = {}) {\r\n\r\n    // is it in iconMap ?\r\n    var Icon = getIcon(icon);\r\n    if (Icon) {\r\n        if(typeof Icon === 'function')\r\n            return Icon({size, ...props})\r\n        else\r\n          icon = Icon;\r\n    }\r\n    \r\n    // is it a svg ?\r\n    // a artifact from React version\r\n    if (typeof icon === 'function') {                           \r\n        props.size = size;\r\n        return icon({...props});\r\n    }\r\n\r\n    // is it fontawesome\r\n    else if (typeof icon === 'string' && icon.startsWith('fa')) {                        \r\n    \r\n        if (size !== undefined) {\r\n            props.style = props.style = {\r\n                ...(props.style || {}),\r\n                fontSize: size\r\n            }\r\n        }\r\n        props.class = props.class ? props.class + ' ' + icon : icon\r\n\r\n        return van.tags.i({...props});\r\n    } \r\n\r\n    // is it <svg ..>..</svg>\r\n    else if (typeof icon === 'string' && icon.startsWith('<svg ')) {       \r\n        return SvgStrIcon(icon)({size,...props});\r\n    } \r\n\r\n    // is it a UTF-8 ?\r\n    else if ((typeof icon === 'string')) {   \r\n    \r\n        if (size !== undefined) {\r\n            let s = 'font-size:' + size + ';';\r\n            if(props.style) s += props.style;\r\n            props.style = s;\r\n        }\r\n\r\n        // return van.tags.div({...props}, icon);\r\n        return van.tags.span({...props}, icon);\r\n    }\r\n\r\n    \r\n    // undefined icon\r\n\r\n    size = size === undefined ? '1em' : size;\r\n    let s = `width:${size}; height:${size}; min-width:${size};`;\r\n    if(props.style) s += props.style;\r\n    props.style = s;\r\n\r\n    return van.tags.div({...props});\r\n}\r\n\r\n\r\n// define at least a empty space icon\r\n\r\niconMap.set('SPACE', props => Icon('\\u2001', {...props}) );\r\n"],"names":["option","van","tags","log","console","warn","parseSelectOptions","value","dom","selected","Array","isArray","obj","text","toArray","map","v","i","mergeAndTranslate","result","children","length","some","key","undefined","o","attr","split","_excluded","_excluded2","_excluded3","_excluded4","_excluded5","_excluded6","_excluded7","_excluded8","_excluded9","_excluded10","_van$tags","a","button","div","input","label","li","ul","select","typeMap","Map","Input","_ref","clas","bsSize","props","_objectWithoutPropertiesLoose","_extends","class","res","val","FormLabel","_ref2","col","SelectInput","_ref3","_props$options","options","rest","selectOptions","RadioSelectInput","_ref4","inline","id","name","Math","random","toString","substring","oninput","ev","target","type","items","index","itemId","checked","for","FormCheckInput","_ref5","clabel","style","reverse","isSwitch","inputClass","includes","_ev$target","role","FormGroup","_ref6","_ref7","cols","g_id","i_id","domInput","get","_cols$split","col_r","ComboboxInput","_props$options2","onItemClick","inputProps","dvalue","state","valueToDisplay","displayToValue","oItem","find","event","href","onclick","selItem","selectClick","FormController","_temp","values","listeners","ccount","self","onChange","func","push","offChange","filter","f","emitChange","forEach","handleInput","_event$target","args","_ref9","_value","_args2$name","_args2$oninput","set","ModalFrame","_args","header","body","footer","_args$close","close","_args$centered","centered","scrollable","position","width","color","_args$dialogstyle","dialogstyle","_args$bodystyle","bodystyle","left","top","dialogClass","contentClass","tabindex","CloseButton","Modal","_options$dispose","_bsm","skipdispose","disposeOnHide","dispose","isOpen","modalResult","open","bsm","show","hide","asyncOpen","Promise","resolve","addEventListener","e","reject","BsModal","onShown","onHidden","remove","PopupMenuFrame","apply","concat","slice","call","arguments","item","HTMLElement","MenuItem","_van$tags2","span","hr","noclick","preventDefault","stopPropagation","divider","active","disabled","classf","cl","nav","NavItem","_ref2$href","icon","_ref2$level","level","Comp","_ref2$hidden","hidden","_ref2$t","t","title","NavMenu","NavLink","_ref3$level","_ref4$t","mergeObjects","obj1","obj2","p","constructor","Object","iconMap","warning","warnMap","getIcon","SvgIconBase","_van$tagsNS","size","svgProps","computedSize","className","tagsNS","svg","stroke","fill","height","SvgStrIcon","str","svgargs","_temp2","_ref3$size","document","createElement","innerHTML","firstChild","keys","setAttribute","Icon","_temp3","startsWith","fontSize","s","_ref11","_ref11$color","outline","dropdown","_ref11$type","menu","modal","open1","clientX","clientY","fc","row","add","_ref10","addRow","arg","data","Tree2Element","tree","node","tag","child","_van$tagsNS2","i18n","dict","language","languageDefault","setLanguage","String","toLowerCase","getLanguage","path","err","getProp","pop","tPath","endsWith","addWords","words","lang","chapter","_words","_words2","src","alt","_ref2$size","_ref2$style","img","_ref$sticky","sticky","_ref$t","brand"],"mappings":"gxBAoEA,IAAOA,EAAUC,EAAG,QAACC,KAAdF,OAEDG,EAAUC,QAAQC,KAEA,SAAAC,EAAoBC,EAAOC,EAAKC,GA+DpD,OA3DIF,IAAUG,MAAMC,QAAQJ,IAA2B,iBAAVA,GAAwBA,EAAMA,QACvEA,EAmFR,SAA4BK,GAExB,IAAKL,EAAcK,EAAdL,MAAMM,EAAQD,EAARC,KACX,OAAKN,GAELA,EAAUO,EAAQP,GAAO,GACzBM,EAAUC,EAAQD,GAAM,GAGpBN,EAAMQ,IAAK,SAACC,EAAEC,GAAO,MAAA,CACjBV,MAAQS,EACRH,KAAQA,EAAKI,GAChB,IARM,EAUf,CAjGgBC,CAAkBX,IAI9BA,GAFAA,EAAQO,EAAQP,GAAS,IAAI,IAEfQ,IAEV,SAAUf,GAEN,IAAImB,EAAS,CACTZ,MAAY,GACZa,SAAY,IAMhB,OAAKpB,EAKDU,MAAMC,QAAQX,IACVA,EAAOqB,OAAS,IAChBF,EAAOZ,MAAWP,EAAO,GACzBmB,EAAOC,SAAWpB,EAAO,IAEzBA,EAAOqB,OAAS,IAChBF,EAAOZ,MAAWP,EAAO,IAEtBmB,GAKW,iBAAXnB,GACPmB,EAAOZ,MAAWP,EAAOO,MACzBY,EAAOC,SAAWpB,EAAOO,MACzB,CAAC,WAAW,OAAO,gBAClBe,KAAM,SAAAC,GACH,YAAoBC,IAAhBxB,EAAOuB,KACPJ,EAAOC,SAAWpB,EAAOuB,IAClB,EAGf,GACOJ,IAMXA,EAAOZ,MAAWP,EAClBmB,EAAOC,SAAWpB,EACXmB,GArCaA,CAsCxB,GAIGX,EACDD,EAAMQ,IAAK,SAAAU,GACT,IAAIC,EAAO,CAACnB,MAAOkB,EAAElB,OAErB,YADgBiB,IAAbf,GAA0BgB,EAAElB,QAAUE,IAAUiB,EAAKjB,UAAS,GAC1DT,EAAQ0B,EAAMD,EAAEL,SAC3B,GACEb,CAEV,CAIA,SAASO,EAASP,EAAOF,GACrB,OAAKE,GACgB,iBAAVA,IACPA,EAAQA,EAAMoB,MAAM,MACnBjB,MAAMC,QAAQJ,KACfF,GAAQF,EAAI,oCACZI,EAAQ,IAELA,GAPY,EAQvB,CC5JA,IAAAqB,EAAA,CAAA,QAAA,UAAAC,EAAA,CAAA,QAAA,SAAA,OAAAC,EAAA,CAAA,QAAA,UAAAC,EAAA,CAAA,WAAAC,EAAA,CAAA,UAAA,QAAA,SAAA,SAAA,MAAAC,EAAA,CAAA,QAAA,OAAA,QAAA,QAAA,SAAA,UAAA,KAAA,SAAAC,EAAA,CAAA,OAAA,QAAA,QAAA,QAAA,SAAA,OAAA,MAAAC,EAAA,CAAA,UAAA,QAAA,SAAA,eAAAC,EAAA,CAAA,OAAA,QAAA,WAAAC,EAAA,CAAA,SAAA,QAAA,QAAA,UAAA,WAAA,QAGAC,EAAuDrC,EAAAA,QAAIC,KAApDqC,EAACD,EAADC,EAAGC,EAAMF,EAANE,OAAQC,EAAGH,EAAHG,IAAKC,EAAKJ,EAALI,MAAOC,EAAKL,EAALK,MAAOC,EAAEN,EAAFM,GAAIC,EAAEP,EAAFO,GAAIC,EAAMR,EAANQ,OAGlCC,EAAU,IAAIC,IAalB,SAASC,EAAKC,OAASC,EAAID,EAAA,MAAEE,EAAMF,EAANE,OAAWC,EAAKC,EAAAJ,EAAAtB,GAOhD,OAAOc,EAAKa,GAAEC,MANH,WACP,IAAIC,EAAM,eAGV,OAFGxD,UAAIyD,IAAIN,KAASK,GAAO,iBAAmBxD,EAAAA,QAAIyD,IAAIN,IACnDnD,EAAG,QAACyD,IAAIP,KAAOM,GAAO,IAAMxD,EAAG,QAACyD,IAAIP,IAChCM,CACX,GAC4BJ,GAChC,CAGgB,SAAAM,EAASC,EAAuCxC,GAA9B,IAAA+B,EAAIS,QAAER,EAAMQ,EAANR,OAAQS,EAAGD,EAAHC,IAAQR,EAAKC,EAAAM,EAAA/B,GAkBzD,OAAOc,EAAKY,EAAA,CAAEC,MAjBH,WACP,IAAIC,EAAM,aAcV,OAbGxD,EAAG,QAACyD,IAAIG,IACPJ,EAAM,iBACHxD,EAAAA,QAAIyD,IAAIN,GACPK,GAAO,QAAQxD,UAAIyD,IAAIN,GAAQ,IAAInD,UAAIyD,IAAIG,GAAK,mBAAmB5D,UAAIyD,IAAIN,GAE3EK,GAAO,QAAQxD,EAAG,QAACyD,IAAIG,IAGxB5D,EAAG,QAACyD,IAAIN,KACPK,GAAO,mBAAmBxD,EAAG,QAACyD,IAAIN,IAGvCnD,EAAG,QAACyD,IAAIP,KAAOM,GAAO,IAAMxD,UAAIyD,IAAIP,IAChCM,CACX,GAC4BJ,GAAQjC,EACxC,CAIgB,SAAA0C,EAAWC,GAAmC,IAAzBZ,EAAIY,EAAEX,MAAAA,EAAMW,EAANX,OAAWC,EAAKC,EAAAS,EAAAjC,GAQvDkC,EAAiCX,EAA3BY,QAAAA,OAAO,IAAAD,EAAG,GAAEA,EAAME,EAAIZ,EAAKD,EAAKtB,GAMtC,OAJIkC,EADmB,mBAAZA,EACGE,EAAcF,GAAS,EAAMZ,EAAM9C,OAEnC0D,IAEPnB,EAAMS,EAAA,CAAEC,MAbJ,WACP,IAAIC,EAAM,cAGV,OAFGxD,UAAIyD,IAAIN,KAASK,GAAO,gBAAkBxD,EAAAA,QAAIyD,IAAIN,IAClDnD,EAAG,QAACyD,IAAIP,KAAOM,GAAO,IAAMxD,UAAIyD,IAAIP,IAChCM,CACX,GAQ6BS,GAAOD,EACxC,CAIgB,SAAAG,EAAgBC,GAAG,IAAAJ,EAAOI,EAAPJ,QAAgBd,EAAIkB,EAAEjB,MAAAA,EAAMiB,EAANjB,OAAQkB,EAAMD,EAANC,OAAQC,EAAEF,EAAFE,GAAOlB,EAAKC,EAAAe,EAAArC,GAE7EwC,EAAOnB,EAAMmB,MAAQC,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,GACjEL,EAAKA,GAAM,OAASC,EACpBP,EAAUE,EAAcF,GAExB,IAAMY,EAAU,SAAAC,GAEZzB,EAAMwB,SAAWxB,EAAMwB,QAAQ,CAACE,OAAQ,CACpCP,KAAAA,EACAjE,MAHQuE,EAAGC,OAAOxE,MAIlByE,KAAQ,eAEhB,EAEMC,EAAQhB,EAAQlD,IAAK,SAACf,EAAQkF,GAChC,IAAIC,EAASZ,EAAG,IAAIW,EACpB,OAAOzC,EAAI,CACPe,MAAO,cAAgBc,EAAS,qBAAuB,KAEvD5B,EAAM,CACFc,MAAY,mBACZwB,KAAY,QACZT,GAAYY,EACZ5E,MAAYP,EAAOO,MACnBiE,KAAAA,EACAY,QAAY/B,EAAM9C,QAAUP,EAAOO,MACnCsE,QAAAA,IAEJlC,EAAM,CAAEa,MAAO,mBAAoB6B,IAAKF,GAAUnF,EAAOoB,UAEjE,GAEA,OAAOqB,EACH,CACIe,MAAO,WACH,IAAIC,EAAM,eAGV,OAFGxD,EAAG,QAACyD,IAAIN,KAASK,GAAO,iBAAmBxD,EAAG,QAACyD,IAAIN,IACnDnD,UAAIyD,IAAIP,KAAOM,GAAO,IAAMxD,EAAAA,QAAIyD,IAAIP,IAChCM,CACf,GACAwB,EAER,CAIgB,SAAAK,EAAcC,GAAU,IAAAC,EAAMD,EAAb5C,MAAeqC,EAAIO,EAAJP,KAAa7B,EAAIoC,EAAA,MAAEE,EAAKF,EAALE,MAAOrC,EAAMmC,EAANnC,OAAQsC,EAAOH,EAAPG,QAASnB,EAAEgB,EAAFhB,GAAIhE,EAAKgF,EAALhF,MAAU8C,EAAKC,EAAAiC,EAAAtD,GAE1GsC,EAAKA,GAAME,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,GAEnD,IAAIe,EAAoB,WAATX,EAEZW,IAAUX,EAAO,YAEpB,IAAIY,EAAa,mBAuBjB,OAtBIzC,GAAQlD,EAAAA,QAAIyD,IAAIP,GAAM0C,SAAS,kBAC/BD,GAAc,cAqBXnD,EAAI,CACPe,MAAO,WACH,IAAIC,EAAM,aAKV,OAJGkC,IAAUlC,GAAO,gBACjBxD,EAAG,QAACyD,IAAIN,KAASK,GAAO,iBAAmBxD,UAAIyD,IAAIN,IACnDnD,EAAAA,QAAIyD,IAAIgC,KAAUjC,GAAO,uBACzBxD,EAAAA,QAAIyD,IAAIP,KAAOM,GAAO,IAAMxD,EAAAA,QAAIyD,IAAIP,IAChCM,CACX,EACAgC,MAAAA,GAEA/C,EAAKa,EACEF,CAAAA,EAAAA,GACHG,MAAOoC,EACPrB,GAAAA,EACAS,KAAAA,EACAI,QAAS7E,IAAS,EAClBsE,QAnCQ,SAAAC,GACZ,IAAAgB,EAA4BhB,EAAGC,OAA1BK,EAAOU,EAAPV,QAEL/B,EAAMwB,QAAQ,CACVE,OAAQ,CACJxE,MAHR6E,IAAYA,EAIJA,QAAAA,EAASZ,KALCsB,EAAJtB,KAKSQ,KALCc,EAAJd,OAQxB,EA2BQe,KAAMJ,EAAW,cAAWnE,KAzBtB,WACV,OAAKgE,EAGE7C,EAAM,CAACa,MAAO,mBAAoB6B,IAAKd,GAAKiB,GAFxC,IAGf,EAyBJ,UASgBQ,EAASC,GAAgEC,IAAAA,EAA7D1B,EAAIyB,EAAJzB,KAAM7B,EAAKsD,EAALtD,MAAOD,EAAKuD,EAALvD,MAAcS,EAAI8C,QAAE7C,EAAM6C,EAAN7C,OAAQ+C,EAAIF,EAAJE,KAAK5B,EAAE0B,EAAF1B,GAAOlB,EAAKC,EAAA2C,EAAA/D,GAM9EkE,QAAO7B,EAAAA,EAAME,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,GACrDyB,EAAO,KAAOD,EACdE,EAA2C,OAAnCJ,EAAQ,MAALxD,EAAAA,EAASK,EAAQwD,IAAIlD,EAAM2B,OAAKkB,EAAIjD,EAEnD,GAAGkD,EAAM,CACL,IAAAK,EAAqBL,EAAKxE,MAAM,KAApB8E,EAAKD,EACjB,GAAA,MAAO,CACH7C,EAAU,CAACP,OAAAA,EAAQS,IAFb2C,EAAA,GAEyBnB,IAAKgB,GAAO1D,GAC3CF,EAAI,CACAe,MAAO,WACH,IAAIC,EAAMgD,EAAK,OAAUA,EAAU,MAEnC,MADG,CAAC,WAAW,QAAQ,UAAUZ,SAASxC,EAAM2B,QAAOvB,GAAO,SACvDA,CACX,GACA6C,EAAQ/C,GAAEH,OAAAA,EAAQoB,KAAAA,EAAMD,GAAI8B,GAAShD,KAGjD,CAGA,OAAOZ,EAAGc,EAAA,CAAEC,MAzBD,WACP,IAAIC,EAAM,GAEV,OADGxD,EAAG,QAACyD,IAAIP,KAAOM,GAAO,IAAMxD,UAAIyD,IAAIP,IAChCM,CACX,EAqBuBc,GAAI6B,GAAS/C,GAChCM,EAAU,CAACP,OAAAA,EAAQiC,IAAKgB,GAAO1D,GAC/B2D,EAAQ/C,EAAEH,CAAAA,OAAAA,EAAQoB,KAAAA,EAAMD,GAAI8B,GAAShD,IAE7C,UA0BgBqD,EAAerD,GAE3B,IAAAsD,EAMItD,EALAY,QAAAA,OAAU,IAAH0C,EAAG,GAAEA,EAGZC,EAEAvD,EAFAuD,YACGC,EAAUvD,EACbD,EAAKlB,GAET8B,EAAUE,EAAcF,GAExB,IAAI6C,EAAS7G,EAAG,QAAC8G,MAAMC,EAAe/C,EAAShE,UAAIyD,IAAIL,EAAM9C,SAE7D,SAAS0G,EAAgBhD,EAAS1D,GAC9B,IAAI2G,EAAQjD,EAAQkD,KAAM,SAAA1F,GAAK,OAAAA,EAAEL,WAAab,CAAK,GAEnD,OADI2G,IAAO3G,EAAQ2G,EAAM3G,OAClBA,CACX,CAEA,SAASyG,EAAgB/C,EAAS1D,GAC9B,IAAI2G,EAAQjD,EAAQkD,KAAM,SAAA1F,GAAC,OAAIA,EAAElB,QAAUA,CAAK,GAEhD,OADI2G,IAAO3G,EAAQ2G,EAAM9F,UAClBb,CACX,CAqBA,OAAOkC,EAAI,CACPgD,MAAOxF,EAAG,QAACyD,IAAIL,EAAMoC,OACrBjC,MAAO,WACH,IAAIC,EAAM,cAGV,OAFGxD,EAAG,QAACyD,IAAIL,EAAMD,UAASK,GAAO,gBAAkBxD,UAAIyD,IAAIL,EAAMD,SAC9DnD,EAAG,QAACyD,IAAIL,EAAK,SAASI,GAAO,IAAMxD,UAAIyD,IAAIL,EAAK,QAC5CI,CACX,GAEAR,EAAKM,KACEsD,EAAU,CACbtG,MAAOuG,EACPjC,QAAS,SAAAuC,GACL,IAAK7G,EAAS6G,EAAMrC,OAAfxE,MACLuG,EAAOpD,IAAMnD,EACb8C,EAAMwB,QAAQ,CACVE,OAAQ,CACJxE,MAAQ0G,EAAehD,EAAS1D,GAChCiE,KAAQnB,EAAMmB,KACdQ,KAAQ3B,EAAM2B,OAG1B,KAGJvC,EAAI,CAACe,MAAO,YACRhB,EAAO,CAACgB,MAAO,oCAAqCwB,KAAM,SAAU,iBAAkB,WAAY,gBAAiB,UACnHnC,EAAG,CAACW,MAAO,iBACPS,EAAQlD,IAAK,SAACU,UAAMmB,EAChBL,EAAE,CACEiB,MAAO,gBAAiB6D,KAAM,IAC9BC,QAAS,WAAM,OAlDnC,SAAsB/G,GAClB,IAAKiE,EAAanB,EAAbmB,KAAKQ,EAAQ3B,EAAR2B,KAGV,GAFAzE,EAAQ0G,EAAehD,EAAS1D,GAE5BqG,EAAa,CACb,IAAIW,EAAUtD,EAAQkD,KAAM,SAAA1F,GAAC,OAAIA,EAAEL,WAAab,CAAK,GACrDA,EAAQqG,EAAYrG,EAAMgH,EAC9B,CAQA,OANAlE,EAAMwB,QAAQ,CACVE,OAAQ,CAACP,KAAAA,EAAMjE,MAAAA,EAAOyE,KAAAA,KAG1B8B,EAAOpD,IAAMsD,EAAe/C,EAAS1D,IAGzC,CAAA,CAkCmCiH,CAAY/F,EAAEL,SAAS,GACvCK,EAAEL,UACR,KAIjB,CAIgB,SAAAqG,EAAcC,GAAiB,IAAdC,YAAcD,EAAJ,CAAA,EAAEA,GAAZC,OAEzBC,EAAY,GACZC,EAAS,EACTC,EAAO,CACPH,OAAMpE,EAAA,CAAA,EAAOoE,MAAAA,EAAAA,EAAU,IACvBI,SAAQA,SAAEC,GAA8B,OAAtBJ,EAAUK,KAAKD,qBAAoBF,EAAKI,UAAUF,EAAK,CAAE,EAC3EE,UAASA,SAAEF,GAAQJ,EAAYA,EAAUO,OAAQ,SAAAC,UAAKA,IAAMJ,CAAI,EAAE,EAClEK,WAAUA,SAAE7D,EAAMjE,GAASqH,EAAUU,QAAS,SAAAF,UAAKA,EAAE5D,EAAMjE,EAAM,EAAE,EACnEgI,YAAWA,SAAEnB,GACT,IATWpG,EASXwH,EAAoBpB,EAAMrC,OAArBP,EAAIgE,EAAJhE,KAAMjE,EAAKiI,EAALjI,MATKN,EAAAA,QAAIyD,IAAT1C,EAUI8G,EAAKH,OAAOnD,MAVIxD,EAW3B8G,EAAKH,OAAOnD,GAAMd,IAAMnD,EAExBuH,EAAKH,OAAOnD,GAAQjE,EAExBuH,EAAKO,WAAY7D,EAAMjE,EAC3B,EACAkI,KAAIA,SAAEA,GAAW,IAAAC,EAAAC,OAAP,IAAJF,IAAAA,EAAO,IACT,IAAqEG,EAAJH,EAA5DjE,KAAAA,WAAIoE,MAAOf,IAAQe,EAAIrI,EAAqCkI,EAArClI,MAAKsI,EAAgCJ,EAA9B5D,QAAAA,OAAO,IAAAgE,EAAGf,EAAKS,YAAWM,EAG7D,OAFAtI,SAAKmI,EAAQ,OAARC,EAAGpI,GAAKoI,EAAIb,EAAKH,OAAOnD,IAAKkE,EAAI,GACtCZ,EAAKH,OAAOnD,GAAQjE,EACb,CAACiE,KAAAA,EAAMjE,MAAAA,EAAOsE,QAAAA,EACzB,GAEJ,OAAOiD,CACX,CAtVA/E,EAAQ+F,IAAK,OAAmB7F,GAChCF,EAAQ+F,IAAK,WAAmB7F,GAChCF,EAAQ+F,IAAK,SAAmBhF,GAChCf,EAAQ+F,IAAK,cAAmB1E,GAChCrB,EAAQ+F,IAAK,WAAmBxD,GAChCvC,EAAQ+F,IAAK,QAAmBxD,GAChCvC,EAAQ+F,IAAK,SAAmBxD,GAChCvC,EAAQ+F,IAAK,WAAmBpC,GCfhC,IAAA9E,EAAA,CAAA,KAAA,QAAA,SAAA,OAAA,SAAA,QAAA,WAAA,aAAA,WAAA,QAAA,QAAA,cAAA,aAAAC,EAAA,CAAA,QAAA,SAAA,UAAA,OAAA,SAAA,WAAA,SAGAS,EAAsBrC,UAAIC,KAAnBuC,EAAGH,EAAHG,IAAKD,EAAMF,EAANE,gBAEIuG,EAAYN,YAAAA,IAAAA,EAAO,IAE/BO,IACIzE,EAaAkE,EAbAlE,GACA0E,EAYAR,EAZAQ,OAAQC,EAYRT,EAZQS,KAAMC,EAYdV,EAZcU,OAAMC,EAYpBX,EAXAY,MAAAA,OAAQ,IAAHD,GAAOA,EAAAE,EAWZb,EAVAc,SAAAA,OAAQ,IAAAD,GAAOA,EACfE,EASAf,EATAe,WACAC,EAQAhB,EARAgB,SAEAC,EAMAjB,EANAiB,MAEAC,EAIAlB,EAJAkB,MAAKC,EAILnB,EAHAoB,YAAAA,WAAWD,EAAG,GAAEA,EAAAE,EAGhBrB,EAFAsB,UAAAA,OAAS,IAAAD,EAAG,GAAEA,EACXzG,EAAKC,EACRmF,EADQ7G,GAGR8H,IAAOG,aAAyBH,EAAK,KACrCA,IAAOG,0BACPJ,IACAI,GAAW,gBAAoBJ,EAASO,KAAuBP,mBAAAA,EAASQ,IAAG,MAC3EV,GAAW,GAGf,IAAMW,EAAc,gBACfX,EAAW,yBAA2B,KACtCC,EAAa,2BAA6B,IAEzCW,EAAe,iBAAmBR,EAAQ,IAAMA,EAAQ,IAG9D,OACIlH,EAAGc,EAAE,CAAAC,MAAO,WAAA,MAAM,OAAO,EAAEe,GAAAA,EAAI,cAAe,OAAQ6F,SAAS,MAAS/G,GACxEZ,EAAI,CAACe,MAAO0G,EAAazE,MAAOoE,GAC5BpH,EAAI,CAACe,MAAO2G,GACNlB,GAAUI,EACP5G,EAAI,CAACe,MAAM,gBACZyF,EAASI,EAAQgB,EAAc,MAC/B,KAEHnB,GAAQzG,EAAI,CAACe,MAAO,aAAciC,MAAOsE,GAAYb,GACrDC,GAAU1G,EAAI,CAACe,MAAO,gBAAiB2F,KAKxD,CAiBO,SAASmB,EAAO7B,EAAWxE,GAAS,IAAAsG,EAEnCC,OAFe/B,IAAAA,IAAAA,EAAO,IAG1B,IACIgC,EADAC,EAAgCH,OAAnBA,EAAU,MAAPtG,OAAO,EAAPA,EAAS0G,UAAOJ,EAEhCzC,EAAO,CACPtH,IAAgB,KAChBoK,QAAgB,EAChBC,iBAAgBrJ,EAEhBsJ,KAAIA,SAAEd,EAAKC,GACPnC,EAAK+C,iBAAcrJ,EACRA,MAARwI,GAA4BxI,MAAPyI,IACpBxB,EAAIlF,EAAOkF,CAAAA,EAAAA,EAAMgB,CAAAA,SAAU,CAACO,KAAAA,EAAKC,IAAAA,MAErCnC,EAAKiD,IAAIC,MACb,EAEA3B,MAAKA,SAAElI,GACH2G,EAAK+C,YAAc1J,EACnB2G,EAAKiD,IAAIE,MACb,EAEMC,UAASA,SAAElB,EAAKC,GAAK,IACvB,OAAAkB,QAAAC,QAAO,IAAID,QAAS,SAACC,GACjBtD,EAAKgD,KAAKd,EAAKC,GACfnC,EAAKtH,IAAI6K,iBAAiB,kBAAmB,WAAI,OAAAD,EAAQtD,EAAK+C,YAAY,EAC9E,GACJ,CAAC,MAAAS,UAAAH,QAAAI,OAAAD,EAED,CAAA,EAAA,OAAIP,GAOA,OANIP,IACA1C,EAAKtH,IAAMuI,EAAWN,GACtB+B,EAAO,IAAIgB,QAAQ1D,EAAKtH,IAAKyD,GAC7B6D,EAAKtH,IAAI6K,iBAAiB,iBAAkBvD,EAAK2D,SACjD3D,EAAKtH,IAAI6K,iBAAiB,kBAAmBvD,EAAK4D,WAE/ClB,CACX,EAEAG,QAAO,WACAH,IACCA,EAAKG,UACLH,EAAO,MAER1C,EAAKtH,MACJsH,EAAKtH,IAAImL,SACT7D,EAAKtH,IAAM,KAEnB,EAEAyK,KAAIA,SAAEN,GACFF,EAAcE,EACdH,EAAKS,MACT,EACAD,KAAI,WAAMR,EAAKQ,MAAO,EAEtBS,QAAOA,SAAErE,GACLU,EAAK8C,QAAS,CAClB,EACAc,SAAQA,SAAEtE,GACNU,EAAK8C,QAAS,EACXH,EACCA,GAAc,EAEXC,GAAe5C,EAAK6C,SAE/B,GAMJ,OAAO7C,CACX,CAIO,SAASuC,EAAW3C,EAAqBtG,GAC5C,OAAOoB,EAAO,CACVwC,KAAK,SACLxB,YAHoC,IAAckE,EAAd,GAAEA,GAAN,OAGX,YACrB,kBAAmB,QACnB,aAAa,SAEjBtG,EAEJ,CAIO,SAASwK,IAEZ,OADa3L,EAAG,QAACC,KAAV2C,GACEgJ,WAAA,EAAA,CAAC,CACNrI,MAAO,gBACPiC,MAAO,0GACNqG,OACE,GAAAC,MAAAC,KAAAC,WAASlL,IAAK,SAAAmL,GAAQ,OAAAA,aAAgBC,YAAcD,EAAOE,EAASF,EAAK,IAEpF,CAYgB,SAAAE,EAAU/I,GACtB,IAAAgJ,EAA4BpM,EAAG,QAACC,KAAzB0C,EAAEyJ,EAAFzJ,GAAG0J,EAAID,EAAJC,KAAKC,EAAEF,EAAFE,GAAG/J,EAAM6J,EAAN7J,OACZgK,EAAU,SAAApF,GAAUA,EAAMqF,iBAAkBrF,EAAMsF,iBAAkB,EACrE/J,EAAwEU,EAAxEV,MAAOsG,EAAiE5F,EAAjE4F,OAAQ0D,EAAyDtJ,EAAzDsJ,QAAS9L,EAAgDwC,EAAhDxC,KAAM+L,EAA0CvJ,EAA1CuJ,OAAQC,EAAkCxJ,EAAlCwJ,SAAiB1J,EAAiBE,EAARa,MAAAA,EAAIZ,EAAID,EAAKxB,GAC9EiL,EAAS,SAACC,GAAO,OAAA,WACjB,IAAItJ,EAAMsJ,EAIV,OAHG9M,EAAAA,QAAIyD,IAAIkJ,KAASnJ,GAAO,WACxBxD,EAAAA,QAAIyD,IAAImJ,KAAWpJ,GAAO,aAC1BxD,UAAIyD,IAAIP,KAAOM,GAAO,IAAMxD,UAAIyD,IAAIP,IAChCM,CACX,CAAC,EACD,OACWb,EADRqG,EACWqD,EAAI/I,EAAA,CAAEC,MAAOsJ,EAAO,yCAA0CxF,QAASkF,GAAYtI,GAAOvB,GACrGgK,EACWJ,EAAEhJ,EAAE,CAAAC,MAAOsJ,EAAO,oBAAqBxF,QAASkF,GAAYtI,GAAOvB,GAC9E9B,EACWyL,EAAI/I,EAAE,CAAAC,MAAOsJ,EAAO,sBAAuBxF,QAASkF,GAAYtI,GAAOvB,GAC3EH,EAAMe,EAAE,CAAAC,MAAOsJ,EAAO,iBAAkB/G,KAAK,UAAa7B,GAAOvB,GAC/E,6LCnMAL,EAAkDrC,EAAG,QAACC,KAA9CuC,GAAGH,EAAHG,IAAKD,GAAMF,EAANE,OAAQ+J,GAAEjK,EAAFiK,GAAID,GAAIhK,EAAJgK,KAAMU,GAAG1K,EAAH0K,IAAKzK,GAACD,EAADC,EAAGM,GAAEP,EAAFO,GAAID,GAAEN,EAAFM,GAmCpC,SAASqK,GAAOrJ,GAAwE,IAAAsJ,EAAAtJ,EAAtEyD,KAAAA,OAAK,IAAD6F,EAAC,IAAGA,EAACvK,EAAKiB,EAALjB,MAAMwK,EAAIvJ,EAAJuJ,KAAKlI,EAAKrB,EAALqB,MAAKmI,EAAAxJ,EAACyJ,MAAAA,OAAM,IAADD,EAAC,EAACA,EAACE,EAAI1J,EAAJ0J,KAAIC,EAAA3J,EAAC4J,OAAAA,OAAM,IAAAD,GAAMA,EAAAE,EAAA7J,EAAC8J,EAAAA,OAAC,IAAAD,EAAC,SAAAC,GAAG,OAAAA,CAAC,EAAAD,EAAIpK,EAAKC,EAAAM,EAAA/B,GAGxF,MADqB,mBAAX2L,IAAuBA,EAASA,KACtCA,EAAe,MAED,mBAAV7K,IAA0BA,EAAQA,KAC1CA,EAAQA,EAAQ+K,EAAEzN,EAAG,QAACyD,IAAIf,IAAU,GACpCU,EAAMsK,QAAUtK,EAAMsK,MAAQD,EAAEzN,EAAAA,QAAIyD,IAAIL,EAAMsK,SAG3C1I,EACQ2I,GAAOrK,EAAA,CAAEZ,MAAAA,EAAMsC,MAAAA,EAAMoI,MAAAA,EAAMK,EAAAA,GAAKrK,IAWhCT,GAAG,CAACY,MARJ,WACP,IAAIC,EAAM,WAGV,OAFa,IAAV4J,IAAa5J,EAAM,IACnBxD,EAAG,QAACyD,IAAIL,EAAW,SAAGI,GAAO,IAAMxD,EAAAA,QAAIyD,IAAIL,UACvCI,CACX,GAEI6J,EACuBA,EAAI/J,EAAE8D,CAAAA,KAAAA,EAAK1E,MAAAA,EAAMwK,KAAAA,EAAKlI,MAAAA,EAAMoI,MAAAA,EAAMG,OAAAA,EAAOE,EAAAA,GAAKrK,IAGlDwK,GAAOtK,EAAA,CAAA,EAAKF,EAAK,CAAEgE,KAAAA,EAAM1E,MAAAA,EAAO0K,MAAAA,MAC3D,CAIgB,SAAAQ,GAAO9J,GAAqE,IAAnEpB,EAAKoB,EAALpB,MAAcQ,EAAIY,QAAE6I,EAAM7I,EAAN6I,OAAQC,EAAQ9I,EAAR8I,SAAUF,EAAO5I,EAAP4I,QAAOmB,EAAA/J,EAAEsJ,MAAAA,OAAM,IAADS,EAAC,EAACA,EAAKzK,EAAKC,EAAAS,EAAAjC,GAYrF,OAAG6K,EAAgBJ,GAAG,CAAC/I,MAAO,qBACvBjB,GAACgB,EAAE,CAAAC,MAXC,WACP,IAAIC,EAAM,WAMV,OALa,IAAV4J,IAAa5J,EAAM,iBACnBxD,EAAAA,QAAIyD,IAAIkJ,KAASnJ,GAAO,WACxBxD,EAAG,QAACyD,IAAIkJ,IAAqB,IAAVS,IAAa5J,GAAO,iBACvCxD,UAAIyD,IAAImJ,KAAWpJ,GAAO,aAC1BxD,EAAAA,QAAIyD,IAAIP,KAAOM,GAAO,IAAMxD,EAAG,QAACyD,IAAIP,IAChCM,CACX,EAGqB4D,KAAM,KAAQhE,GAAQV,EAC/C,CAGgB,SAAAiL,GAAOvJ,OAAG1B,EAAK0B,EAAL1B,MAAOsC,EAAKZ,EAALY,MAAK8I,EAAA1J,EAAEqJ,EAAAA,OAAC,IAAAK,EAAE,SAAAL,GAAG,OAAAA,CAAC,EAAAK,EAAEV,EAAKhJ,EAALgJ,MAAUhK,EAAKC,EAAAe,EAAAtC,GAE5D,OAAGsL,EAAQ,EACAzK,GAAG,CAAA,EACNL,GAAE,CAACiB,MAAO,gBAAiB6D,KAAK,KAAM1E,EAAQ,MAE9CE,GAAG,CAACW,MAAO,yBACPyB,EAAMlE,IAAK,SAAAmL,GAAQ,OAAAe,GAAO1J,EAAE8J,CAAAA,MAAOA,EAAQ,EAAGK,EAAAA,GAAMxB,GAAM,KAI/DtJ,GAAG,CAACY,MAAO,oBAAqBe,GAAI,cAAc8I,GAErD9K,GAAE,CAACiB,MAAO,2BAA4B6D,KAAM,IAAK,iBAAkB,YAAa1E,GAChFE,GAAG,CAACW,MAAO,iBACPyB,EAAMlE,IAAK,SAAAmL,GAAQ,OAAAe,GAAO1J,EAAA,CAAE8J,MAAOA,EAAQ,GAAMnB,EAAI,CAAEwB,EAAAA,GAAMrK,GAAO,IAGhF,CC7DA,SAAS2K,GAAaC,EAAMC,GACxB,IAAK,IAAIC,KAAKD,EACV,IAEQD,EAAKE,GADJD,EAAKC,GAAGC,cAAcC,OACbL,GAAaC,EAAKE,GAAID,EAAKC,IAE3BD,EAAKC,EACvB,CAAE,MAAM7C,GACJ2C,EAAKE,GAAKD,EAAKC,EACnB,CAEJ,OAAOF,CACX,CCtDA,IAAArM,GAAA,CAAA,OAAA,OAAA,SAAAC,GAAA,CAAA,MAAA,OAAAC,GAAA,CAAA,OAAA,SAAAC,GAAA,CAAA,QAAAC,GAAA,CAAA,QAEWsM,GAAU,IAAItL,IACrBuL,GAAU,EACVC,GAAU,IAAIxL,aAGFyL,GAASlN,GACrB,GAAmB,iBAARA,EAAkB,OAAY,EACzC,IAAIkC,EAAM6K,GAAQ/H,IAAIhF,GAMtB,OALKkC,GAAO8K,GAAU,IAAMC,GAAQjI,IAAIhF,KACpCnB,QAAQC,KAAK,mBAAoBkB,GAEjCiN,GAAQ1F,IAAIvH,GAAI,IAEbkC,CACX,UAuCgBiL,GAAarL,GAAyB,IAAAsL,OAAzBtL,IAAAA,IAAAA,EAAQ,CAAA,GAEjC,IAAO3B,EAAkC2B,EAAlC3B,KAAMkN,EAA4BvL,EAA5BuL,KAAMjB,EAAsBtK,EAAtBsK,MAAUkB,EAAQvL,EAAID,EAAJzB,IAC/BkN,EAAeF,GAAQ,MACzBG,EAAY,GACZ1L,EAAK,QAAQ0L,IAAcA,EAAYA,EAAY,IAAM,IAAM1L,EAAW,OAC9E,IAAIoC,EAAQpC,EAAMsG,MAAkBtG,UAAAA,EAAMsG,MAAK,KAAO,GAGtD,OAFGtG,EAAMoC,QAAOA,GAASpC,EAAMoC,QAExBkJ,EAAA1O,EAAG,QAAC+O,OAAO,+BAA8BC,IAAGpD,MAAA8C,EAAApL,CAAAA,GAC/C2L,OAAQ,eACRC,KAAM,eACN,eAAgB,KACbzN,EACAmN,EAAQ,CACXrL,MAAOuL,EACPtJ,MAAAA,EACA2J,OAAQN,EACRpF,MAAOoF,IAENnB,EAAQ1N,EAAG,QAAC+O,OAAO,8BAA8BrB,MAAMA,GAAS,MAAI7B,OAAA,GAAAC,MAAAC,KAAAC,UAEzE,IACJ,CAoEO,SAASoD,GAAYC,EAAKC,GAC7B,YAD6BA,IAAAA,IAAAA,EAAU,CAAA,GAChCC,SAAAA,GAAiC,IAAAzL,OAAP,IAAOyL,EAAP,CAAA,EAAEA,EAAAC,EAAA1L,EAA1B6K,KAAAA,OAAK,IAADa,EAAC,MAAKA,EAAKpM,EAAKC,EAAAS,EAAAhC,IACrBvB,EAAMkP,SAASC,cAAc,OAOjC,OANAnP,EAAIoP,UAAYN,EAChB9O,EAAMA,EAAIqP,WACVxM,EAAMqG,MAAQkF,EACdvL,EAAM+L,OAASR,EACfP,OAAOyB,KAAKP,GAASjH,QAAS,SAAA/G,GAAG,OAAIf,EAAIuP,aAAaxO,EAAKgO,EAAQhO,GAAK,GACxE8M,OAAOyB,KAAKzM,GAAOiF,QAAS,SAAA/G,GAAG,OAAIf,EAAIuP,aAAaxO,EAAK8B,EAAM9B,GAAK,GAC7Df,CACX,CACJ,CA4CgB,SAAAwP,GAAM7C,EAAI8C,GAAyB,IAAA5L,OAAA,IAAA4L,EAAJ,CAAE,EAAAA,EAApBrB,EAAIvK,EAAJuK,KAASvL,EAAKC,EAAAe,EAAArC,IAGnCgO,EAAOvB,GAAQtB,GACnB,GAAI6C,EAAM,CACN,GAAmB,mBAATA,EACN,OAAOA,EAAIzM,EAAEqL,CAAAA,KAAAA,GAASvL,IAExB8J,EAAO6C,CACb,CAIA,GAAoB,mBAAT7C,EAEP,OADA9J,EAAMuL,KAAOA,EACNzB,EAAI5J,EAAA,CAAA,EAAKF,IAIf,GAAoB,iBAAT8J,GAAqBA,EAAK+C,WAAW,MAUjD,YARa1O,IAAToN,IACAvL,EAAMoC,MAAQpC,EAAMoC,MAAKlC,EACjBF,GAAAA,EAAMoC,OAAS,CAAE,EAAA,CACrB0K,SAAUvB,KAGlBvL,EAAK,MAASA,EAAW,MAAGA,EAAW,MAAG,IAAM8J,EAAOA,EAEhDlN,EAAAA,QAAIC,KAAKe,EAACsC,EAAKF,CAAAA,EAAAA,IAIjB,GAAgB,iBAAT8J,GAAqBA,EAAK+C,WAAW,SACjD,OAAOb,GAAWlC,EAAXkC,CAAgB9L,EAAEqL,CAAAA,KAAAA,GAAQvL,IAI3B,GAAgB,iBAAT8J,EAAoB,CAEjC,QAAa3L,IAAToN,EAAoB,CACpB,IAAIwB,EAAI,aAAexB,EAAO,IAC3BvL,EAAMoC,QAAO2K,GAAK/M,EAAMoC,OAC3BpC,EAAMoC,MAAQ2K,CAClB,CAGA,OAAOnQ,UAAIC,KAAKoM,KAAI/I,EAAA,CAAA,EAAKF,GAAQ8J,EACrC,CAMA,IAAIiD,EAAC,UADLxB,OAAgBpN,IAAToN,EAAqB,MAAQA,GACf,YAAYA,EAAI,eAAeA,EAAO,IAI3D,OAHGvL,EAAMoC,QAAO2K,GAAK/M,EAAMoC,OAC3BpC,EAAMoC,MAAQ2K,EAEPnQ,EAAG,QAACC,KAAKuC,IAAGc,EAAKF,CAAAA,EAAAA,GAC5B,CAKAiL,GAAQxF,IAAI,QAAS,SAAAzF,GAAS,OAAA2M,GAAK,IAAQzM,EAAMF,GAAAA,GAAO,YJ+GxC,SAAMgN,EAAwFjP,OAArFgC,EAAMiN,EAANjN,OAAeD,EAAIkN,QAAAC,EAAAD,EAAE1G,MAAAA,OAAM,IAAD2G,EAAC,YAAWA,EAAEC,EAAOF,EAAPE,QAASC,EAAQH,EAARG,SAAQC,EAAAJ,EAAErL,KAAAA,OAAI,IAAAyL,EAAC,SAAQA,EAAKpN,EAAKC,EAAA+M,EAAAhO,GAavG,OAFGpC,EAAG,QAACyD,IAAI8M,KAAWnN,EAAM,kBAAoB,YAEzCb,EAAMe,EAAA,CAAEyB,KAAAA,EAAMxB,MAZV,WACP,IAAIC,EAAM,MAOV,OANGxD,EAAAA,QAAIyD,IAAIiG,KACJ1J,EAAG,QAACyD,IAAI6M,GAAU9M,GAAO,gBAAiBxD,UAAIyD,IAAIiG,GAChDlG,GAAO,QAASxD,UAAIyD,IAAIiG,IAC9B1J,UAAIyD,IAAIN,KAASK,GAAO,QAAUxD,EAAAA,QAAIyD,IAAIN,IAC1CnD,EAAG,QAACyD,IAAI8M,KAAW/M,GAAO,oBAC1BxD,EAAG,QAACyD,IAAIP,KAAOM,GAAO,IAAMxD,EAAG,QAACyD,IAAIP,IAChCM,CACX,GAGoCJ,GAAQjC,EAChD,kBArN6B,SAAAiC,GAAK,OAAIiC,EAAc/B,EAAA,GAAKF,EAAO2B,CAAAA,KAAM,aAAY,kDCqC3E,WACH,IAAM0L,EAAO9E,EAAcC,gBAAAE,MAAAC,KAAAC,YACrB0E,EAAQrG,EAAM,CAChBjB,OAAO,EACPQ,YAAa,8BACbE,UAAW,cACXb,KAAMwH,IAEVA,EAAKrF,iBAAiB,QAAS,WAAI,OAAAsF,EAAMtH,OAAO,GAChD,IAAMuH,EAAQD,EAAM7F,KAMpB,OALA6F,EAAM7F,KAAO,SAAA1D,GACTA,EAAMqF,iBACNrF,EAAMsF,kBACNkE,EAAMxJ,EAAMyJ,QAASzJ,EAAM0J,QAC/B,EACOH,CACX,iBA5DgB,WAEZ,OADa1Q,UAAIC,KAAV2C,GACEgJ,WAAC,EAAA,CAAA,CAACrI,MAAO,kBAAgBsI,OAC3B,GAAAC,MAAAC,KAAAC,WAASlL,IAAK,SAAAmL,GAAQ,OAAAA,aAAgBC,YAAcD,EAAOE,EAASF,EAAK,IAEpF,gBDkLgB,SAAa1L,GACzB,IAAIuQ,EAAKtJ,IACLK,EAAIvE,EACDwN,CAAAA,EAAAA,EACHvQ,CAAAA,IAAQ,MAAHA,EAAAA,EAAOP,UAAIC,KAAK,QACrB8Q,IAAK,KACLC,aAAK5N,EAAO7C,OAAK0Q,EACR1M,EAAiCnB,EAAjCmB,KAAMjE,EAA2B8C,EAA3B9C,MAAOsE,EAAoBxB,EAApBwB,QACd4D,EAAIlF,KAD0BD,EAAID,EAAKjB,GACnB2O,EAAGtI,KAAK,CAACjE,KAAAA,EAAMjE,MAAAA,EAAOsE,QAAAA,KAC9C5E,EAAAA,QAAIgR,WAAGC,QAAC1Q,EAAAA,EAAOsH,EAAKkJ,KAAGE,EAAIpJ,EAAKtH,IAAKwF,EAAUyC,GACnD,EACA0I,OAAM,SAAEC,GACJ,OAAW,OAARA,EAAqBtJ,EAAKkJ,IAAI,MACjClJ,EAAKkJ,IAAMvO,EAAI,CAACe,MAAO,OAAS4N,EAAM,IAAIA,EAAM,MAChDnR,EAAAA,QAAIgR,IAAInJ,EAAKtH,IAAKsH,EAAKkJ,KAChBlJ,EAAKkJ,IAChB,IAEJ,OAAOlJ,CACX,8EI/QgB,SAAQuJ,GAEpB,SAASC,EAAaC,GAClB,OAAOA,GAAQA,EAAKxQ,IAChB,SAACyQ,EAAMvQ,GAAM,OAAAhB,UAAI+O,OAAO,8BAA8BwC,EAAKC,KAAIlO,EAAA,CAAA,EAAKiO,EAAK9P,MAAO4P,EAAaE,EAAKE,OAAO,EAEjH,CAEA,MAAgB,QAAbL,EAAKI,IACIpO,SAAAA,GAAKsO,IAAAA,EAAG,YAARtO,IAAAA,IAAAA,EAAM,CAAA,IAAOsO,EAAA1R,EAAG,QAAC+O,OAAO,+BAA8BC,IAAGpD,MAAA8F,EAAApO,CAAAA,EAAK8N,GAAAA,EAAK3P,KAAS2B,IAAKyI,OAAMwF,EAAaD,EAAKK,QAAO,EACpHrO,SAAAA,GAAa,gBAAbA,IAAAA,EAAM,CAAA,GAAOqL,GAAW7C,WAAA,EAAA,CAAAtI,EAAA,CAAA,EAAK8N,EAAK3P,KAAS2B,IAAKyI,OAAMwF,EAAaD,EAAKK,QAAO,CAC3F,SD3Ge,WAEX,IAAME,EAAO,CACTC,KAAoB,GACpBC,SAAoB,KACpBC,gBAAoB,KACpBC,qBAAazR,GACTqR,EAAKE,SAAWG,OAAO1R,GAAO2R,cACzBN,EAAKC,KAAKD,EAAKE,YAChBF,EAAKE,SAAWF,EAAKG,gBAC7B,EACAI,YAAW,WAAK,OAAOP,EAAKE,QAAQ,EACpCpE,EAAC,SAAEnM,GAEC,GADmB,mBAARA,IAAoBA,EAAMA,MAChCA,EAAK,MAAO,GACjB,IAAIkC,EAqChB,SAAkB7C,EAAKwR,GACnB,IACIA,EAAOA,EAAKzQ,MAAM,KAClB,IAAK,IAAIV,EAAE,EAAGA,EAAImR,EAAK/Q,OAAQJ,IAAK,CAChC,IAAKL,EAAK,OAAOA,EACjBA,EAAMA,EAAIwR,EAAKnR,GACnB,CACJ,CAAE,MAAOoR,GACL,QACJ,CACA,OAAOzR,CACX,CAhDsB0R,CAAQV,EAAKC,KAAKD,EAAKE,UAAWvQ,GAG5C,OAFKkC,IACDA,EAAMlC,EAAII,MAAM,KAAK4Q,OAClB9O,CACX,EACA+O,MAAK,SAAEJ,GAEH,OADKA,EAAKK,SAAS,OAAML,GAAc,cACtB7Q,GACb,OAAOqQ,EAAKlE,EAAE0E,EAAO7Q,EACzB,CACJ,EACAmR,kBAAUC,EAAOC,EAAMC,GAAS,IAAAC,EAAAC,EACxBF,KAAcC,MAAKD,GAAUF,EAApBA,EAAyBG,GAClCF,KAAWG,EAAAA,CAAAA,GAAKH,GAAOD,EAAjBA,EAAsBI,GAChC/E,GAAc4D,EAAKC,KAAMc,EAC7B,GAGJ,OAAOf,CACX,sBCqFgB,SAAO1O,GAAuB,IAApB8P,EAAG9P,EAAH8P,IAAKC,EAAG/P,EAAH+P,IAAQ/O,EAAIZ,EAAAJ,EAAArB,IACvC,OAAO,SAAA6F,GAAA9D,IAAAA,OAAoC,IAApC8D,EAAoC,CAAE,EAAAA,EAAAwL,EAAAtP,EAApCgL,KAAAA,OAAK,IAADsE,EAAC,MAAKA,EAAAC,EAAAvP,EAAE6B,MAAAA,OAAK,IAAA0N,EAAC,GAAEA,EAAK9P,EAAKC,EAAAM,EAAA9B,IAAW,OAAA7B,EAAG,QAACC,KAAKkT,IAAG7P,EAAA,CACtDyP,IAAAA,EACAC,IAAQA,GAAOD,EAAIrR,MAAM,KAAK4Q,MAC9B9M,MAAQA,WAAiBmJ,EAAI,YAAYA,EAAI,KAC1C1K,EACAb,GACL,CACV,kGF9HgB,SAAMH,GACX,IAAAC,EAAID,EAAA,MAAAmQ,EAAAnQ,EACXoQ,OAAAA,OAAS,IAAHD,GAAOA,EACb3C,EAAIxN,EAAJwN,KAAI6C,EAAArQ,EACJwK,EAAAA,OAAC,IAAA6F,EAAG,SAAA7F,GAAG,OAAAA,CAAC,EAAA6F,EAWR,OAVQjQ,EAAAJ,EAAAtB,GAUDoL,GAAI,CAACxJ,MAPK,WACb,IAAIC,EAAM,2CAGV,OAFG6P,IAAQ7P,GAAO,eACfxD,EAAG,QAACyD,IAAIP,KAAOM,GAAO,IAAMxD,EAAAA,QAAIyD,IAAIP,IAChCM,CACX,GAGIhB,GAAI,CAACe,MAAO,mBACRkN,EAAK8C,MACLhR,GAAO,CAAEgB,MAAO,iBAAkBwB,KAAM,SAAU,iBAAkB,WAAY,iBAAkB,0BAA2B,gBAAiB,yBAA0B,gBAAiB,QAAS,aAAc,qBAC5MsH,GAAK,CAAE9I,MAAO,yBAGlBf,GAAI,CAAEe,MAAO,2BAA4Be,GAAI,0BACzC1B,GAAG,CAAEW,MAAO,sBACRkN,EAAKzL,MAAMlE,IAAK,SAAAmL,GAAQ,OAAAe,GAAO1J,EAAK2I,CAAAA,EAAAA,EAAKwB,CAAAA,EAAAA,IAAG,MAKhE,cDsKgB,WACZ,IAAMgD,EAAO9E,EAAcC,WAAAE,EAAAA,GAAAA,MAAAC,KAAAC,YACrB0E,EAAQrG,EAAM,CAChBjB,OAAO,EACPQ,YAAa,8BACbE,UAAW,cACXb,KAAMwH,IAGV,OADAA,EAAKrF,iBAAiB,QAAS,WAAA,OAAIsF,EAAMtH,OAAO,GACzCsH,CACX,kCDjC0B,SAAAtN,GAAK,OAAIiC,EAAc/B,EAAKF,CAAAA,EAAAA,GAAO2B,KAAM,UAAS,sFAFjD,SAAA3B,UAASiC,EAAc/B,KAAKF,EAAK,CAAE2B,KAAM,WAAU,wDI9J9D,SAASzD,EAAKhB,GACtBgO,GAAU,GAAKD,GAAQ/H,IAAIhF,IAC3BnB,QAAQC,KAAK,gBAAiBkB,GAElC+M,GAAQxF,IAAIvH,EAAIhB,EACpB,eAEO,SAAqBA,GACxB,OAAQA,GACJ,KAAM,EAAE,KAAM,EAAE,KAAK,EACjBgO,GAAUhO,EACV,MACJ,IAAK,MAAOgO,GAAU,EAAG,MACzB,IAAK,MAAOA,GAAU,EAAG,MACzB,QAASA,GAAU,EAE3B"}