import e from"vanjs-core";import{Modal as t}from"bootstrap";function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},l.apply(this,arguments)}function n(e,t){if(null==e)return{};var l,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(l=o[n])>=0||(a[l]=e[l]);return a}const{option:a}=e.tags,o=console.warn;function s(e,t,l){return e&&!Array.isArray(e)&&"object"==typeof e&&e.value&&(e=function(e){var{value:t,text:l}=e;return t?(t=r(t,!0),l=r(l,!1),t.map((e,t)=>({value:e,text:l[t]}))):[]}(e)),e=(e=r(e||[],!0)).map(function(e){let t={value:"",children:""};return e?Array.isArray(e)?(e.length>0&&(t.value=e[0],t.children=e[0]),e.length>1&&(t.value=e[1]),t):"object"==typeof e?(t.value=e.value,t.children=e.value,["children","text","displayValue"].some(l=>void 0!==e[l]&&(t.children=e[l],!0)),t):(t.value=e,t.children=e,t):t}),t?e.map(e=>{let t={value:e.value};return void 0!==l&&e.value===l&&(t.selected=!0),a(t,e.children)}):e}function r(e,t){return e?("string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(t&&o("parseSelectOptions value invalid"),e=[]),e):[]}const i=["class","bsSize"],c=["class","bsSize","col"],d=["class","bsSize"],u=["options"],v=["options","class","bsSize","inline","id"],p=["label","type","class","style","bsSize","reverse","id","value"],f=["name","label","input","class","bsSize","cols","id"],m=["options","style","bsSize","onItemClick"],g=["name","value","oninput"],b=["bsSize","class","color","outline","dropdown","type"],{a:h,button:y,div:w,input:k,label:S,li:z,ul:x,select:C}=e.tags;var O=new Map;function E(t){let{class:a,bsSize:o}=t,s=n(t,i);return k(l({class:()=>{let t="form-control";return e.val(o)&&(t+=" form-control-"+e.val(o)),e.val(a)&&(t+=" "+e.val(a)),t}},s))}function L(t,a){let{class:o,bsSize:s,col:r}=t,i=n(t,c);return S(l({class:()=>{let t="form-label";return e.val(r)?(t="col-form-label",e.val(s)?t+=" col-"+e.val(s)+"-"+e.val(r)+" col-form-label-"+e.val(s):t+=" col-"+e.val(r)):e.val(s)&&(t+=" col-form-label-"+e.val(s)),e.val(o)&&(t+=" "+e.val(o)),t}},i),a)}function j(t){let{class:a,bsSize:o}=t,r=n(t,d),{options:i=[]}=r,c=n(r,u);return i="function"!=typeof i?s(i,!0,r.value):i(),C(l({class:()=>{let t="form-select";return e.val(o)&&(t+=" form-select-"+e.val(o)),e.val(a)&&(t+=" "+e.val(a)),t}},c),i)}function M(t){let{options:l,class:a,bsSize:o,inline:r,id:i}=t,c=n(t,v),d=c.name||Math.random().toString(36).substring(2,9);i=i||"rgi_"+d,l=s(l);const u=e=>{c.oninput&&c.oninput({target:{name:d,value:e.target.value,type:"radiogroup"}})},p=l.map((e,t)=>{let l=i+"_"+t;return w({class:"form-check"+(r?" form-check-inline":"")},k({class:"form-check-input",type:"radio",id:l,value:e.value,name:d,checked:c.value===e.value,oninput:u}),S({class:"form-check-label",for:l},e.children))});return w({class:()=>{let t="form-control";return e.val(o)&&(t+=" form-control-"+e.val(o)),e.val(a)&&(t+=" "+e.val(a)),t}},p)}function $(t){let{label:a,type:o,class:s,style:r,bsSize:i,reverse:c,id:d,value:u}=t,v=n(t,p);d=d||Math.random().toString(36).substring(2,9);var f="switch"===o;f&&(o="checkbox");var m="form-check-input";return s&&e.val(s).includes("form-control")&&(m+=" ms-0 me-2"),w({class:()=>{let t="form-check";return f&&(t+=" form-switch"),e.val(i)&&(t+=" form-control-"+e.val(i)),e.val(c)&&(t+=" form-check-reverse"),e.val(s)&&(t+=" "+e.val(s)),t},style:r},k(l({},v,{class:m,id:d,type:o,checked:u||!1,oninput:e=>{var{checked:t,name:l,type:n}=e.target;v.oninput({target:{value:t=!!t,checked:t,name:l,type:n}})},role:f?"switch":void 0})),()=>a?S({class:"form-check-label",for:d},a):null)}O.set("text",E),O.set("textarea",E),O.set("select",j),O.set("radioselect",M),O.set("checkbox",$),O.set("radio",$),O.set("switch",$),O.set("combobox",H);const A=e=>$(l({},e,{type:"switch"})),P=e=>$(l({},e,{type:"checkbox"})),R=e=>$(l({},e,{type:"radio"}));function D(t){var a;let{name:o,label:s,input:r,class:i,bsSize:c,cols:d,id:u}=t,v=n(t,f),p=null!=u?u:Math.random().toString(36).substring(2,9),m="i_"+p,g=null!=(a=null!=r?r:O.get(v.type))?a:E;if(d){let[e,t]=d.split(" ");return[L({bsSize:c,col:e,for:m},s),w({class:()=>{let e=t?`col-${t}`:"col";return["checkbox","radio","switch"].includes(v.type)&&(e+=" pt-2"),e}},g(l({bsSize:c,name:o,id:m},v)))]}return w(l({class:()=>{let t="";return e.val(i)&&(t+=" "+e.val(i)),t},id:p},v),L({bsSize:c,for:m},s),g(l({bsSize:c,name:o,id:m},v)))}function H(t){var{options:a=[],onItemClick:o}=t,r=n(t,m);a=s(a);var i=e.state(d(a,e.val(t.value)));function c(e,t){let l=e.find(e=>e.children===t);return l&&(t=l.value),t}function d(e,t){var l=e.find(e=>e.value===t);return l&&(t=l.children),t}return w({style:e.val(t.style),class:()=>{let l="input-group";return e.val(t.bsSize)&&(l+=" input-group-"+e.val(t.bsSize)),e.val(t.class)&&(l+=" "+e.val(t.class)),l}},E(l({},r,{value:i,oninput:e=>{let{value:l}=e.target;i.val=l,t.oninput({target:{value:c(a,l),name:t.name,type:t.type}})}})),w({class:"dropdown"},y({class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),x({class:"dropdown-menu"},a.map(e=>z(h({class:"dropdown-item",href:"#",onclick:()=>function(e){let{name:l,type:n}=t;if(e=c(a,e),o){let t=a.find(t=>t.children===e);e=o(e,t)}return t.oninput({target:{name:l,value:e,type:n}}),i.val=d(a,e),!1}(e.children)},e.children))))))}function N({values:t}={}){var n=[],a=1,o={values:l({},null!=t?t:{}),onChange:e=>(n.push(e),()=>o.offChange(e)),offChange(e){n=n.filter(t=>t!==e)},emitChange(e,t){n.forEach(l=>l(e,t))},handleInput(t){let{name:l,value:n}=t.target;var a;e.val(a=o.values[l])!==a?o.values[l].val=n:o.values[l]=n,o.emitChange(l,n)},args(e={}){var t,l;let{name:n="v"+a++,value:s,oninput:r=o.handleInput}=e;return s=null!=(t=null!=(l=s)?l:o.values[n])?t:"",o.values[n]=s,{name:n,value:s,oninput:r}}};return o}function I(t){var a=N(),o=l({},a,{dom:null!=t?t:e.tags("form"),row:null,add(t,s){var r;let{name:i,value:c,oninput:d}=t,u=l({},n(t,g),a.args({name:i,value:c,oninput:d}));e.add(null!=(r=null!=s?s:o.row)?r:o.dom,D(u))},addRow:t=>null===t?o.row=null:(o.row=w({class:"row"+(t?" "+t:"")}),e.add(o.dom,o.row),o.row)});return o}function T(t,a){let{bsSize:o,class:s,color:r="secondary",outline:i,dropdown:c,type:d="button"}=t,u=n(t,b);return e.val(c)&&(u["data-bs-toggle"]="dropdown"),y(l({type:d,class:()=>{let t="btn";return e.val(r)&&(e.val(i)?t+=" btn-outline-"+e.val(r):t+=" btn-"+e.val(r)),e.val(o)&&(t+=" btn-"+e.val(o)),e.val(c)&&(t+=" dropdown-toggle"),e.val(s)&&(t+=" "+e.val(s)),t}},u),a)}const W=["id","class","header","body","footer","close","centered","scrollable","position","width","color","dialogstyle","bodystyle"],_=["label","header","divider","text","active","disabled","class"],{div:G,button:V}=e.tags;function X(e={}){var{id:t,header:a,body:o,footer:s,close:r=!0,centered:i=!0,scrollable:c,position:d,width:u,color:v,dialogstyle:p="",bodystyle:f=""}=e,m=n(e,W);u&&(p+=`width: ${u};`),u&&(p+="max-width: inherit;"),d&&(p+=`margin-left: ${d.left}px; margin-top: ${d.top}px;`,i=!1);const g="modal-dialog"+(i?" modal-dialog-centered":"")+(c?" modal-dialog-scrollable":""),b="modal-content"+(v?" "+v:"");return G(l({class:()=>"modal",id:t,"aria-hidden":"true",tabindex:"-1"},m),G({class:g,style:p},G({class:b},a||r?G({class:"modal-header"},a,r?q:null):null,o&&G({class:"modal-body",style:f},o),s&&G({class:"modal-footer"},s))))}function Y(e={},n){var a,o,s,r=null==(a=null==n?void 0:n.dispose)||a,i={dom:null,isOpen:!1,modalResult:void 0,open(t,n){i.modalResult=void 0,null!=t&&null!=n&&(e=l({},e,{position:{left:t,top:n}})),i.bsm.show()},close(e){i.modalResult=e,i.bsm.hide()},asyncOpen:async(e,t)=>new Promise(l=>{i.open(e,t),i.dom.addEventListener("hidden.bs.modal",()=>l(i.modalResult))}),get bsm(){return o||(i.dom=X(e),o=new t(i.dom,n),i.dom.addEventListener("shown.bs.modal",i.onShown),i.dom.addEventListener("hidden.bs.modal",i.onHidden)),o},dispose(){o&&(o.dispose(),o=null),i.dom&&(i.dom.remove(),i.dom=null)},hide(e){s=e,o.hide()},show(){o.show()},onShown(e){i.isOpen=!0},onHidden(e){i.isOpen=!1,s?s=!1:r&&i.dispose()}};return i}function q({class:e}={},t){return V({type:"button",class:e||"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},t)}function B(...t){const{ul:l}=e.tags;return l({class:"dropdown-menu",style:"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;"},...t.map(e=>e instanceof HTMLElement?e:J(e)))}function F(...t){const{ul:l}=e.tags;return l({class:"dropdown-menu"},...t.map(e=>e instanceof HTMLElement?e:J(e)))}function J(t){const{li:a,span:o,hr:s,button:r}=e.tags,i=e=>{e.preventDefault(),e.stopPropagation()};var{label:c,header:d,divider:u,text:v,active:p,disabled:f,class:m}=t,g=n(t,_),b=t=>()=>{let l=t;return e.val(p)&&(l+=" active"),e.val(f)&&(l+=" disabled"),e.val(m)&&(l+=" "+e.val(m)),l};return a(d?o(l({class:b("dropdown-header fw-bold border-bottom"),onclick:i},g),c):u?s(l({class:b("dropdown-divider"),onclick:i},g),c):v?o(l({class:b("dropdown-item-text"),onclick:i},g),c):r(l({class:b("dropdown-item"),role:"button"},g),c))}function K(...e){const t=B(...e),l=Y({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:t});return t.addEventListener("click",()=>l.close()),l}function Q(...e){const t=B(...e),l=Y({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:t});t.addEventListener("click",()=>l.close());const n=l.open;return l.open=e=>{e.preventDefault(),e.stopPropagation(),n(e.clientX,e.clientY)},l}const U=["class","sticky","menu","t"],Z=["href","label","icon","items","level","Comp","hidden","t"],ee=["label","class","active","disabled","divider","level"],te=["label","items","t","level"],{div:le,button:ne,hr:ae,span:oe,nav:se,a:re,ul:ie,li:ce}=e.tags;function de(t){let{class:a,sticky:o=!0,menu:s,t:r=(e=>e)}=t;return n(t,U),se({class:()=>{let t="navbar navbar-expand-lg bg-body-tertiary";return o&&(t+=" sticky-top"),e.val(a)&&(t+=" "+e.val(a)),t}},le({class:"container-fluid"},s.brand,ne({class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},oe({class:"navbar-toggler-icon"})),le({class:"collapse navbar-collapse",id:"navbarSupportedContent"},ie({class:"me-auto navbar-nav"},s.items.map(e=>ue(l({},e,{t:r})))))))}function ue(t){let{href:a="#",label:o,icon:s,items:r,level:i=0,Comp:c,hidden:d=!1,t:u=(e=>e)}=t,v=n(t,Z);return"function"==typeof d&&(d=d()),d?null:("function"==typeof o&&(o=o()),o=o?u(e.val(o)):"",v.title&&(v.title=u(e.val(v.title))),r?pe(l({label:o,items:r,level:i,t:u},v)):ce({class:()=>{let t="nav-item";return 0!==i&&(t=""),e.val(v.class)&&(t+=" "+e.val(v.class)),t}},c?c(l({href:a,label:o,icon:s,items:r,level:i,hidden:d,t:u},v)):ve(l({},v,{href:a,label:o,level:i}))))}function ve(t){let{label:a,class:o,active:s,disabled:r,divider:i,level:c=0}=t,d=n(t,ee);return i?ae({class:"dropdown-divider"}):re(l({class:()=>{let t="nav-link";return 0!==c&&(t="dropdown-item"),e.val(s)&&(t+=" active"),e.val(s)&&0===c&&(t+=" text-primary"),e.val(r)&&(t+=" disabled"),e.val(o)&&(t+=" "+e.val(o)),t},href:"#"},d),a)}function pe(e){let{label:t,items:a,t:o=(e=>e),level:s}=e,r=n(e,te);return s>0?ce({},re({class:"dropdown-item",href:"#"},t+" »"),ie({class:"submenu dropdown-menu"},a.map(e=>ue(l({level:s+1,t:o},e))))):ce({class:"nav-item dropdown",id:"NavDropdown"+s},re({class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown"},t),ie({class:"dropdown-menu"},a.map(e=>ue(l({level:s+1},e,{t:o},r)))))}function fe(){const e={dict:{},language:"en",languageDefault:"en",setLanguage(t){e.language=String(t).toLowerCase(),e.dict[e.language]||(e.language=e.languageDefault)},getLanguage:()=>e.language,t(t){if("function"==typeof t&&(t=t()),!t)return"";var l=function(e,t){try{t=t.split(".");for(let l=0;l<t.length;l++){if(!e)return e;e=e[t[l]]}}catch(e){return!1}return e}(e.dict[e.language],t);return l||(l=t.split(".").pop()),l},tPath:t=>(t.endsWith(".")||(t+="."),function(l){return e.t(t+l)}),addWords(t,l,n){n&&(t={[n]:t}),l&&(t={[l]:t}),me(e.dict,t)}};return e}function me(e,t){for(var l in t)try{e[l]=t[l].constructor===Object?me(e[l],t[l]):t[l]}catch(n){e[l]=t[l]}return e}const ge=["attr","size","title"],be=["src","alt"],he=["size","style"],ye=["size"],we=["size"];var ke=new Map,Se=0,ze=new Map;function xe(e){if("string"!=typeof e)return!1;var t=ke.get(e);return!t&&Se>0&&!ze.get(e)&&(console.warn("Get unknown icon",e),ze.set(e,!0)),t}function Ce(e,t){Se>1&&ke.get(e)&&console.warn("Redefine icon",e),ke.set(e,t)}function Oe(e){switch(e){case 0:case 1:case 2:Se=e;break;case"all":Se=2;break;case"get":Se=1;break;default:Se=0}}function Ee(t={},...a){const{attr:o,size:s,title:r}=t,i=n(t,ge),c=s||"1em";let d="";t.class&&(d+=(d?d+" ":"")+t.class);let u=t.color?`color: ${t.color}; `:"";return t.style&&(u+=t.style),e.tagsNS("http://www.w3.org/2000/svg").svg(l({stroke:"currentColor",fill:"currentColor","stroke-width":"0"},o,i,{class:d,style:u,height:c,width:c}),r?e.tagsNS("http://www.w3.org/2000/svg").title(r):null,...a)}function Le(t){function n(t){return t&&t.map((t,a)=>e.tagsNS("http://www.w3.org/2000/svg")[t.tag](l({},t.attr),n(t.child)))}return"svg"===t.tag?(a={})=>e.tagsNS("http://www.w3.org/2000/svg").svg(l({},t.attr,a),...n(t.child)):(e={})=>Ee(l({},t.attr,e),...n(t.child))}function je(t){let{src:a,alt:o}=t,s=n(t,be);return(t={})=>{let{size:r="1em",style:i=""}=t,c=n(t,he);return e.tags.img(l({src:a,alt:o||a.split("/").pop(),style:i+`width:${r}; height:${r};`},s,c))}}function Me(e,t={}){return(l={})=>{let{size:a="1em"}=l,o=n(l,ye);var s=document.createElement("div");return s.innerHTML=e,s=s.firstChild,o.width=a,o.height=a,Object.keys(t).forEach(e=>s.setAttribute(e,t[e])),Object.keys(o).forEach(e=>s.setAttribute(e,o[e])),s}}function $e(t,a={}){let{size:o}=a,s=n(a,we);var r=xe(t);if(r){if("function"==typeof r)return r(l({size:o},s));t=r}if("function"==typeof t)return s.size=o,t(l({},s));if("string"==typeof t&&t.startsWith("fa"))return void 0!==o&&(s.style=s.style=l({},s.style||{},{fontSize:o})),s.class=s.class?s.class+" "+t:t,e.tags.i(l({},s));if("string"==typeof t&&t.startsWith("<svg "))return Me(t)(l({size:o},s));if("string"==typeof t){if(void 0!==o){let e="font-size:"+o+";";s.style&&(e+=s.style),s.style=e}return e.tags.span(l({},s),t)}o=void 0===o?"1em":o;let i=`width:${o}; height:${o}; min-width:${o};`;return s.style&&(i+=s.style),s.style=i,e.tags.div(l({},s))}ke.set("SPACE",e=>$e(" ",l({},e)));export{T as Button,P as CheckboxInput,q as CloseButton,H as ComboboxInput,Q as ContextMenu,F as DropdownMenu,I as FormBuilder,$ as FormCheckInput,N as FormController,D as FormGroup,L as FormLabel,Le as GenIcon,fe as I18n,$e as Icon,je as ImgIcon,E as Input,J as MenuItem,Y as Modal,X as ModalFrame,ue as NavItem,ve as NavLink,pe as NavMenu,de as Navbar,K as PopupMenu,B as PopupMenuFrame,R as RadioInput,M as RadioSelectInput,j as SelectInput,Ee as SvgIconBase,Me as SvgStrIcon,A as SwitchInput,xe as getIcon,ke as iconMap,s as selectOptions,Ce as setIcon,Oe as setWarning,O as typeMap};
//# sourceMappingURL=lib.modern.mjs.map
