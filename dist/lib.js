var e=require("vanjs-core"),t=require("bootstrap");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=/*#__PURE__*/n(e);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(l[n]=e[n]);return l}var r=a.default.tags.option,i=console.warn;function u(e,t,n){return e&&!Array.isArray(e)&&"object"==typeof e&&e.value&&(e=function(e){var t=e.value,n=e.text;return t?(t=s(t,!0),n=s(n,!1),t.map(function(e,t){return{value:e,text:n[t]}})):[]}(e)),e=(e=s(e||[],!0)).map(function(e){var t={value:"",children:""};return e?Array.isArray(e)?(e.length>0&&(t.value=e[0],t.children=e[0]),e.length>1&&(t.value=e[1]),t):"object"==typeof e?(t.value=e.value,t.children=e.value,["children","text","displayValue"].some(function(n){return void 0!==e[n]&&(t.children=e[n],!0)}),t):(t.value=e,t.children=e,t):t}),t?e.map(function(e){var t={value:e.value};return void 0!==n&&e.value===n&&(t.selected=!0),r(t,e.children)}):e}function s(e,t){return e?("string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(t&&i("parseSelectOptions value invalid"),e=[]),e):[]}var c=["class","bsSize"],d=["class","bsSize","col"],f=["class","bsSize"],v=["options"],p=["options","class","bsSize","inline","id"],m=["label","type","class","style","bsSize","reverse","id","value"],g=["name","label","input","class","bsSize","cols","id"],b=["options","style","bsSize","onItemClick"],h=["name","value","oninput"],y=["bsSize","class","color","outline","dropdown","type"],w=a.default.tags,x=w.a,S=w.button,k=w.div,z=w.input,C=w.label,I=w.li,M=w.ul,O=w.select,L=new Map;function j(e){var t=e.class,n=e.bsSize,r=o(e,c);return z(l({class:function(){var e="form-control";return a.default.val(n)&&(e+=" form-control-"+a.default.val(n)),a.default.val(t)&&(e+=" "+a.default.val(t)),e}},r))}function E(e,t){var n=e.class,r=e.bsSize,i=e.col,u=o(e,d);return C(l({class:function(){var e="form-label";return a.default.val(i)?(e="col-form-label",a.default.val(r)?e+=" col-"+a.default.val(r)+"-"+a.default.val(i)+" col-form-label-"+a.default.val(r):e+=" col-"+a.default.val(i)):a.default.val(r)&&(e+=" col-form-label-"+a.default.val(r)),a.default.val(n)&&(e+=" "+a.default.val(n)),e}},u),t)}function P(e){var t=e.class,n=e.bsSize,r=o(e,f),i=r.options,s=void 0===i?[]:i,c=o(r,v);return s="function"!=typeof s?u(s,!0,r.value):s(),O(l({class:function(){var e="form-select";return a.default.val(n)&&(e+=" form-select-"+a.default.val(n)),a.default.val(t)&&(e+=" "+a.default.val(t)),e}},c),s)}function A(e){var t=e.options,n=e.class,l=e.bsSize,r=e.inline,i=e.id,s=o(e,p),c=s.name||Math.random().toString(36).substring(2,9);i=i||"rgi_"+c,t=u(t);var d=function(e){s.oninput&&s.oninput({target:{name:c,value:e.target.value,type:"radiogroup"}})},f=t.map(function(e,t){var n=i+"_"+t;return k({class:"form-check"+(r?" form-check-inline":"")},z({class:"form-check-input",type:"radio",id:n,value:e.value,name:c,checked:s.value===e.value,oninput:d}),C({class:"form-check-label",for:n},e.children))});return k({class:function(){var e="form-control";return a.default.val(l)&&(e+=" form-control-"+a.default.val(l)),a.default.val(n)&&(e+=" "+a.default.val(n)),e}},f)}function N(e){var t=e.label,n=e.type,r=e.class,i=e.style,u=e.bsSize,s=e.reverse,c=e.id,d=e.value,f=o(e,m);c=c||Math.random().toString(36).substring(2,9);var v="switch"===n;v&&(n="checkbox");var p="form-check-input";return r&&a.default.val(r).includes("form-control")&&(p+=" ms-0 me-2"),k({class:function(){var e="form-check";return v&&(e+=" form-switch"),a.default.val(u)&&(e+=" form-control-"+a.default.val(u)),a.default.val(s)&&(e+=" form-check-reverse"),a.default.val(r)&&(e+=" "+a.default.val(r)),e},style:i},z(l({},f,{class:p,id:c,type:n,checked:d||!1,oninput:function(e){var t=e.target,n=t.checked;f.oninput({target:{value:n=!!n,checked:n,name:t.name,type:t.type}})},role:v?"switch":void 0})),function(){return t?C({class:"form-check-label",for:c},t):null})}function R(e){var t,n=e.name,r=e.label,i=e.input,u=e.class,s=e.bsSize,c=e.cols,d=e.id,f=o(e,g),v=null!=d?d:Math.random().toString(36).substring(2,9),p="i_"+v,m=null!=(t=null!=i?i:L.get(f.type))?t:j;if(c){var b=c.split(" "),h=b[1];return[E({bsSize:s,col:b[0],for:p},r),k({class:function(){var e=h?"col-"+h:"col";return["checkbox","radio","switch"].includes(f.type)&&(e+=" pt-2"),e}},m(l({bsSize:s,name:n,id:p},f)))]}return k(l({class:function(){var e="";return a.default.val(u)&&(e+=" "+a.default.val(u)),e},id:v},f),E({bsSize:s,for:p},r),m(l({bsSize:s,name:n,id:p},f)))}function F(e){var t=e.options,n=void 0===t?[]:t,r=e.onItemClick,i=o(e,b);n=u(n);var s=a.default.state(d(n,a.default.val(e.value)));function c(e,t){var n=e.find(function(e){return e.children===t});return n&&(t=n.value),t}function d(e,t){var n=e.find(function(e){return e.value===t});return n&&(t=n.children),t}return k({style:a.default.val(e.style),class:function(){var t="input-group";return a.default.val(e.bsSize)&&(t+=" input-group-"+a.default.val(e.bsSize)),a.default.val(e.class)&&(t+=" "+a.default.val(e.class)),t}},j(l({},i,{value:s,oninput:function(t){var a=t.target.value;s.val=a,e.oninput({target:{value:c(n,a),name:e.name,type:e.type}})}})),k({class:"dropdown"},S({class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),M({class:"dropdown-menu"},n.map(function(t){return I(x({class:"dropdown-item",href:"#",onclick:function(){return function(t){var a=e.name,l=e.type;if(t=c(n,t),r){var o=n.find(function(e){return e.children===t});t=r(t,o)}return e.oninput({target:{name:a,value:t,type:l}}),s.val=d(n,t),!1}(t.children)}},t.children))}))))}function D(e){var t=(void 0===e?{}:e).values,n=[],o=1,r={values:l({},null!=t?t:{}),onChange:function(e){return n.push(e),function(){return r.offChange(e)}},offChange:function(e){n=n.filter(function(t){return t!==e})},emitChange:function(e,t){n.forEach(function(n){return n(e,t)})},handleInput:function(e){var t,n=e.target,l=n.name,o=n.value;a.default.val(t=r.values[l])!==t?r.values[l].val=o:r.values[l]=o,r.emitChange(l,o)},args:function(e){var t,n;void 0===e&&(e={});var a=e.name,l=void 0===a?"v"+o++:a,i=e.value,u=e.oninput,s=void 0===u?r.handleInput:u;return i=null!=(t=null!=(n=i)?n:r.values[l])?t:"",r.values[l]=i,{name:l,value:i,oninput:s}}};return r}L.set("text",j),L.set("textarea",j),L.set("select",P),L.set("radioselect",A),L.set("checkbox",N),L.set("radio",N),L.set("switch",N),L.set("combobox",F);var H=["id","class","header","body","footer","close","centered","scrollable","position","width","color","dialogstyle","bodystyle"],W=["label","header","divider","text","active","disabled","class"],B=a.default.tags,T=B.div,G=B.button;function _(e){void 0===e&&(e={});var t=e.id,n=e.header,a=e.body,r=e.footer,i=e.close,u=void 0===i||i,s=e.centered,c=void 0===s||s,d=e.scrollable,f=e.position,v=e.width,p=e.color,m=e.dialogstyle,g=void 0===m?"":m,b=e.bodystyle,h=void 0===b?"":b,y=o(e,H);v&&(g+="width: "+v+";"),v&&(g+="max-width: inherit;"),f&&(g+="margin-left: "+f.left+"px; margin-top: "+f.top+"px;",c=!1);var w="modal-dialog"+(c?" modal-dialog-centered":"")+(d?" modal-dialog-scrollable":""),x="modal-content"+(p?" "+p:"");return T(l({class:function(){return"modal"},id:t,"aria-hidden":"true",tabindex:"-1"},y),T({class:w,style:g},T({class:x},n||u?T({class:"modal-header"},n,u?V:null):null,a&&T({class:"modal-body",style:h},a),r&&T({class:"modal-footer"},r))))}function q(e,n){var a,o;void 0===e&&(e={});var r,i=null==(a=null==n?void 0:n.dispose)||a,u={dom:null,isOpen:!1,modalResult:void 0,open:function(t,n){u.modalResult=void 0,null!=t&&null!=n&&(e=l({},e,{position:{left:t,top:n}})),u.bsm.show()},close:function(e){u.modalResult=e,u.bsm.hide()},asyncOpen:function(e,t){try{return Promise.resolve(new Promise(function(n){u.open(e,t),u.dom.addEventListener("hidden.bs.modal",function(){return n(u.modalResult)})}))}catch(e){return Promise.reject(e)}},get bsm(){return o||(u.dom=_(e),o=new t.Modal(u.dom,n),u.dom.addEventListener("shown.bs.modal",u.onShown),u.dom.addEventListener("hidden.bs.modal",u.onHidden)),o},dispose:function(){o&&(o.dispose(),o=null),u.dom&&(u.dom.remove(),u.dom=null)},hide:function(e){r=e,o.hide()},show:function(){o.show()},onShown:function(e){u.isOpen=!0},onHidden:function(e){u.isOpen=!1,r?r=!1:i&&u.dispose()}};return u}function V(e,t){return G({type:"button",class:(void 0===e?{}:e).class||"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},t)}function X(){return a.default.tags.ul.apply(void 0,[{class:"dropdown-menu",style:"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;"}].concat([].slice.call(arguments).map(function(e){return e instanceof HTMLElement?e:Y(e)})))}function Y(e){var t=a.default.tags,n=t.li,r=t.span,i=t.hr,u=t.button,s=function(e){e.preventDefault(),e.stopPropagation()},c=e.label,d=e.header,f=e.divider,v=e.text,p=e.active,m=e.disabled,g=e.class,b=o(e,W),h=function(e){return function(){var t=e;return a.default.val(p)&&(t+=" active"),a.default.val(m)&&(t+=" disabled"),a.default.val(g)&&(t+=" "+a.default.val(g)),t}};return n(d?r(l({class:h("dropdown-header fw-bold border-bottom"),onclick:s},b),c):f?i(l({class:h("dropdown-divider"),onclick:s},b),c):v?r(l({class:h("dropdown-item-text"),onclick:s},b),c):u(l({class:h("dropdown-item"),role:"button"},b),c))}var J=["class","sticky","menu","t"],K=["href","label","icon","items","level","Comp","hidden","t"],Q=["label","class","active","disabled","divider","level"],U=["label","items","t","level"],Z=a.default.tags,$=Z.div,ee=Z.button,te=Z.hr,ne=Z.span,ae=Z.nav,le=Z.a,oe=Z.ul,re=Z.li;function ie(e){var t=e.href,n=void 0===t?"#":t,r=e.label,i=e.icon,u=e.items,s=e.level,c=void 0===s?0:s,d=e.Comp,f=e.hidden,v=void 0!==f&&f,p=e.t,m=void 0===p?function(e){return e}:p,g=o(e,K);return"function"==typeof v&&(v=v()),v?null:("function"==typeof r&&(r=r()),r=r?m(a.default.val(r)):"",g.title&&(g.title=m(a.default.val(g.title))),u?se(l({label:r,items:u,level:c,t:m},g)):re({class:function(){var e="nav-item";return 0!==c&&(e=""),a.default.val(g.class)&&(e+=" "+a.default.val(g.class)),e}},d?d(l({href:n,label:r,icon:i,items:u,level:c,hidden:v,t:m},g)):ue(l({},g,{href:n,label:r,level:c}))))}function ue(e){var t=e.label,n=e.class,r=e.active,i=e.disabled,u=e.divider,s=e.level,c=void 0===s?0:s,d=o(e,Q);return u?te({class:"dropdown-divider"}):le(l({class:function(){var e="nav-link";return 0!==c&&(e="dropdown-item"),a.default.val(r)&&(e+=" active"),a.default.val(r)&&0===c&&(e+=" text-primary"),a.default.val(i)&&(e+=" disabled"),a.default.val(n)&&(e+=" "+a.default.val(n)),e},href:"#"},d),t)}function se(e){var t=e.label,n=e.items,a=e.t,r=void 0===a?function(e){return e}:a,i=e.level,u=o(e,U);return i>0?re({},le({class:"dropdown-item",href:"#"},t+" »"),oe({class:"submenu dropdown-menu"},n.map(function(e){return ie(l({level:i+1,t:r},e))}))):re({class:"nav-item dropdown",id:"NavDropdown"+i},le({class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown"},t),oe({class:"dropdown-menu"},n.map(function(e){return ie(l({level:i+1},e,{t:r},u))})))}function ce(e,t){for(var n in t)try{e[n]=t[n].constructor===Object?ce(e[n],t[n]):t[n]}catch(a){e[n]=t[n]}return e}var de=["attr","size","title"],fe=["src","alt"],ve=["size","style"],pe=["size"],me=["size"],ge=new Map,be=0,he=new Map;function ye(e){if("string"!=typeof e)return!1;var t=ge.get(e);return!t&&be>0&&!he.get(e)&&(console.warn("Get unknown icon",e),he.set(e,!0)),t}function we(e){var t;void 0===e&&(e={});var n=e.attr,r=e.size,i=e.title,u=o(e,de),s=r||"1em",c="";e.class&&(c+=(c?c+" ":"")+e.class);var d=e.color?"color: "+e.color+"; ":"";return e.style&&(d+=e.style),(t=a.default.tagsNS("http://www.w3.org/2000/svg")).svg.apply(t,[l({stroke:"currentColor",fill:"currentColor","stroke-width":"0"},n,u,{class:c,style:d,height:s,width:s}),i?a.default.tagsNS("http://www.w3.org/2000/svg").title(i):null].concat([].slice.call(arguments,1)))}function xe(e,t){return void 0===t&&(t={}),function(n){var a=void 0===n?{}:n,l=a.size,r=void 0===l?"1em":l,i=o(a,pe),u=document.createElement("div");return u.innerHTML=e,u=u.firstChild,i.width=r,i.height=r,Object.keys(t).forEach(function(e){return u.setAttribute(e,t[e])}),Object.keys(i).forEach(function(e){return u.setAttribute(e,i[e])}),u}}function Se(e,t){var n=void 0===t?{}:t,r=n.size,i=o(n,me),u=ye(e);if(u){if("function"==typeof u)return u(l({size:r},i));e=u}if("function"==typeof e)return i.size=r,e(l({},i));if("string"==typeof e&&e.startsWith("fa"))return void 0!==r&&(i.style=i.style=l({},i.style||{},{fontSize:r})),i.class=i.class?i.class+" "+e:e,a.default.tags.i(l({},i));if("string"==typeof e&&e.startsWith("<svg "))return xe(e)(l({size:r},i));if("string"==typeof e){if(void 0!==r){var s="font-size:"+r+";";i.style&&(s+=i.style),i.style=s}return a.default.tags.span(l({},i),e)}var c="width:"+(r=void 0===r?"1em":r)+"; height:"+r+"; min-width:"+r+";";return i.style&&(c+=i.style),i.style=c,a.default.tags.div(l({},i))}ge.set("SPACE",function(e){return Se(" ",l({},e))}),exports.Button=function(e,t){var n=e.bsSize,r=e.class,i=e.color,u=void 0===i?"secondary":i,s=e.outline,c=e.dropdown,d=e.type,f=void 0===d?"button":d,v=o(e,y);return a.default.val(c)&&(v["data-bs-toggle"]="dropdown"),S(l({type:f,class:function(){var e="btn";return a.default.val(u)&&(a.default.val(s)?e+=" btn-outline-"+a.default.val(u):e+=" btn-"+a.default.val(u)),a.default.val(n)&&(e+=" btn-"+a.default.val(n)),a.default.val(c)&&(e+=" dropdown-toggle"),a.default.val(r)&&(e+=" "+a.default.val(r)),e}},v),t)},exports.CheckboxInput=function(e){return N(l({},e,{type:"checkbox"}))},exports.CloseButton=V,exports.ComboboxInput=F,exports.ContextMenu=function(){var e=X.apply(void 0,[].slice.call(arguments)),t=q({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:e});e.addEventListener("click",function(){return t.close()});var n=t.open;return t.open=function(e){e.preventDefault(),e.stopPropagation(),n(e.clientX,e.clientY)},t},exports.DropdownMenu=function(){return a.default.tags.ul.apply(void 0,[{class:"dropdown-menu"}].concat([].slice.call(arguments).map(function(e){return e instanceof HTMLElement?e:Y(e)})))},exports.FormBuilder=function(e){var t=D(),n=l({},t,{dom:null!=e?e:a.default.tags("form"),row:null,add:function(e,r){var i,u=e.name,s=e.value,c=e.oninput,d=l({},o(e,h),t.args({name:u,value:s,oninput:c}));a.default.add(null!=(i=null!=r?r:n.row)?i:n.dom,R(d))},addRow:function(e){return null===e?n.row=null:(n.row=k({class:"row"+(e?" "+e:"")}),a.default.add(n.dom,n.row),n.row)}});return n},exports.FormCheckInput=N,exports.FormController=D,exports.FormGroup=R,exports.FormLabel=E,exports.GenIcon=function(e){function t(e){return e&&e.map(function(e,n){return a.default.tagsNS("http://www.w3.org/2000/svg")[e.tag](l({},e.attr),t(e.child))})}return"svg"===e.tag?function(n){var o;return void 0===n&&(n={}),(o=a.default.tagsNS("http://www.w3.org/2000/svg")).svg.apply(o,[l({},e.attr,n)].concat(t(e.child)))}:function(n){return void 0===n&&(n={}),we.apply(void 0,[l({},e.attr,n)].concat(t(e.child)))}},exports.I18n=function(){var e={dict:{},language:"en",languageDefault:"en",setLanguage:function(t){e.language=String(t).toLowerCase(),e.dict[e.language]||(e.language=e.languageDefault)},getLanguage:function(){return e.language},t:function(t){if("function"==typeof t&&(t=t()),!t)return"";var n=function(e,t){try{t=t.split(".");for(var n=0;n<t.length;n++){if(!e)return e;e=e[t[n]]}}catch(e){return!1}return e}(e.dict[e.language],t);return n||(n=t.split(".").pop()),n},tPath:function(t){return t.endsWith(".")||(t+="."),function(n){return e.t(t+n)}},addWords:function(t,n,a){var l,o;a&&((l={})[a]=t,t=l),n&&((o={})[n]=t,t=o),ce(e.dict,t)}};return e},exports.Icon=Se,exports.ImgIcon=function(e){var t=e.src,n=e.alt,r=o(e,fe);return function(e){var i=void 0===e?{}:e,u=i.size,s=void 0===u?"1em":u,c=i.style,d=void 0===c?"":c,f=o(i,ve);return a.default.tags.img(l({src:t,alt:n||t.split("/").pop(),style:d+"width:"+s+"; height:"+s+";"},r,f))}},exports.Input=j,exports.MenuItem=Y,exports.Modal=q,exports.ModalFrame=_,exports.NavItem=ie,exports.NavLink=ue,exports.NavMenu=se,exports.Navbar=function(e){var t=e.class,n=e.sticky,r=void 0===n||n,i=e.menu,u=e.t,s=void 0===u?function(e){return e}:u;return o(e,J),ae({class:function(){var e="navbar navbar-expand-lg bg-body-tertiary";return r&&(e+=" sticky-top"),a.default.val(t)&&(e+=" "+a.default.val(t)),e}},$({class:"container-fluid"},i.brand,ee({class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},ne({class:"navbar-toggler-icon"})),$({class:"collapse navbar-collapse",id:"navbarSupportedContent"},oe({class:"me-auto navbar-nav"},i.items.map(function(e){return ie(l({},e,{t:s}))})))))},exports.PopupMenu=function(){var e=X.apply(void 0,[].slice.call(arguments)),t=q({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:e});return e.addEventListener("click",function(){return t.close()}),t},exports.PopupMenuFrame=X,exports.RadioInput=function(e){return N(l({},e,{type:"radio"}))},exports.RadioSelectInput=A,exports.SelectInput=P,exports.SvgIconBase=we,exports.SvgStrIcon=xe,exports.SwitchInput=function(e){return N(l({},e,{type:"switch"}))},exports.getIcon=ye,exports.iconMap=ge,exports.selectOptions=u,exports.setIcon=function(e,t){be>1&&ge.get(e)&&console.warn("Redefine icon",e),ge.set(e,t)},exports.setWarning=function(e){switch(e){case 0:case 1:case 2:be=e;break;case"all":be=2;break;case"get":be=1;break;default:be=0}},exports.typeMap=L;
//# sourceMappingURL=lib.js.map
