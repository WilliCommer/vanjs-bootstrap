!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vanjs-core"),require("bootstrap")):"function"==typeof define&&define.amd?define(["exports","vanjs-core","bootstrap"],t):t((e||self).vanjsBootstrap={},e.vanjsCore,e.bootstrap)}(this,function(e,t,n){function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=/*#__PURE__*/a(t);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}function r(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(l[n]=e[n]);return l}var i=l.default.tags.option,u=console.warn;function s(e,t,n){return e&&!Array.isArray(e)&&"object"==typeof e&&e.value&&(e=function(e){var t=e.value,n=e.text;return t?(t=c(t,!0),n=c(n,!1),t.map(function(e,t){return{value:e,text:n[t]}})):[]}(e)),e=(e=c(e||[],!0)).map(function(e){var t={value:"",children:""};return e?Array.isArray(e)?(e.length>0&&(t.value=e[0],t.children=e[0]),e.length>1&&(t.value=e[1]),t):"object"==typeof e?(t.value=e.value,t.children=e.value,["children","text","displayValue"].some(function(n){return void 0!==e[n]&&(t.children=e[n],!0)}),t):(t.value=e,t.children=e,t):t}),t?e.map(function(e){var t={value:e.value};return void 0!==n&&e.value===n&&(t.selected=!0),i(t,e.children)}):e}function c(e,t){return e?("string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(t&&u("parseSelectOptions value invalid"),e=[]),e):[]}var d=["class","bsSize"],f=["class","bsSize","col"],v=["class","bsSize"],p=["options"],m=["options","class","bsSize","inline","id"],b=["label","type","class","style","bsSize","reverse","id","value"],g=["name","label","input","class","bsSize","cols","id"],h=["options","style","bsSize","onItemClick"],y=["name","value","oninput"],w=["bsSize","class","color","outline","dropdown","type"],S=l.default.tags,k=S.a,z=S.button,x=S.div,C=S.input,I=S.label,M=S.li,j=S.ul,O=S.select,L=new Map;function E(e){var t=e.class,n=e.bsSize,a=r(e,d);return C(o({class:function(){var e="form-control";return l.default.val(n)&&(e+=" form-control-"+l.default.val(n)),l.default.val(t)&&(e+=" "+l.default.val(t)),e}},a))}function P(e,t){var n=e.class,a=e.bsSize,i=e.col,u=r(e,f);return I(o({class:function(){var e="form-label";return l.default.val(i)?(e="col-form-label",l.default.val(a)?e+=" col-"+l.default.val(a)+"-"+l.default.val(i)+" col-form-label-"+l.default.val(a):e+=" col-"+l.default.val(i)):l.default.val(a)&&(e+=" col-form-label-"+l.default.val(a)),l.default.val(n)&&(e+=" "+l.default.val(n)),e}},u),t)}function A(e){var t=e.class,n=e.bsSize,a=r(e,v),i=a.options,u=void 0===i?[]:i,c=r(a,p);return u="function"!=typeof u?s(u,!0,a.value):u(),O(o({class:function(){var e="form-select";return l.default.val(n)&&(e+=" form-select-"+l.default.val(n)),l.default.val(t)&&(e+=" "+l.default.val(t)),e}},c),u)}function N(e){var t=e.options,n=e.class,a=e.bsSize,o=e.inline,i=e.id,u=r(e,m),c=u.name||Math.random().toString(36).substring(2,9);i=i||"rgi_"+c,t=s(t);var d=function(e){u.oninput&&u.oninput({target:{name:c,value:e.target.value,type:"radiogroup"}})},f=t.map(function(e,t){var n=i+"_"+t;return x({class:"form-check"+(o?" form-check-inline":"")},C({class:"form-check-input",type:"radio",id:n,value:e.value,name:c,checked:u.value===e.value,oninput:d}),I({class:"form-check-label",for:n},e.children))});return x({class:function(){var e="form-control";return l.default.val(a)&&(e+=" form-control-"+l.default.val(a)),l.default.val(n)&&(e+=" "+l.default.val(n)),e}},f)}function R(e){var t=e.label,n=e.type,a=e.class,i=e.style,u=e.bsSize,s=e.reverse,c=e.id,d=e.value,f=r(e,b);c=c||Math.random().toString(36).substring(2,9);var v="switch"===n;v&&(n="checkbox");var p="form-check-input";return a&&l.default.val(a).includes("form-control")&&(p+=" ms-0 me-2"),x({class:function(){var e="form-check";return v&&(e+=" form-switch"),l.default.val(u)&&(e+=" form-control-"+l.default.val(u)),l.default.val(s)&&(e+=" form-check-reverse"),l.default.val(a)&&(e+=" "+l.default.val(a)),e},style:i},C(o({},f,{class:p,id:c,type:n,checked:d||!1,oninput:function(e){var t=e.target,n=t.checked;f.oninput({target:{value:n=!!n,checked:n,name:t.name,type:t.type}})},role:v?"switch":void 0})),function(){return t?I({class:"form-check-label",for:c},t):null})}function F(e){var t,n=e.name,a=e.label,i=e.input,u=e.class,s=e.bsSize,c=e.cols,d=e.id,f=r(e,g),v=null!=d?d:Math.random().toString(36).substring(2,9),p="i_"+v,m=null!=(t=null!=i?i:L.get(f.type))?t:E;if(c){var b=c.split(" "),h=b[1];return[P({bsSize:s,col:b[0],for:p},a),x({class:function(){var e=h?"col-"+h:"col";return["checkbox","radio","switch"].includes(f.type)&&(e+=" pt-2"),e}},m(o({bsSize:s,name:n,id:p},f)))]}return x(o({class:function(){var e="";return l.default.val(u)&&(e+=" "+l.default.val(u)),e},id:v},f),P({bsSize:s,for:p},a),m(o({bsSize:s,name:n,id:p},f)))}function D(e){var t=e.options,n=void 0===t?[]:t,a=e.onItemClick,i=r(e,h);n=s(n);var u=l.default.state(d(n,l.default.val(e.value)));function c(e,t){var n=e.find(function(e){return e.children===t});return n&&(t=n.value),t}function d(e,t){var n=e.find(function(e){return e.value===t});return n&&(t=n.children),t}return x({style:l.default.val(e.style),class:function(){var t="input-group";return l.default.val(e.bsSize)&&(t+=" input-group-"+l.default.val(e.bsSize)),l.default.val(e.class)&&(t+=" "+l.default.val(e.class)),t}},E(o({},i,{value:u,oninput:function(t){var a=t.target.value;u.val=a,e.oninput({target:{value:c(n,a),name:e.name,type:e.type}})}})),x({class:"dropdown"},z({class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),j({class:"dropdown-menu"},n.map(function(t){return M(k({class:"dropdown-item",href:"#",onclick:function(){return function(t){var l=e.name,o=e.type;if(t=c(n,t),a){var r=n.find(function(e){return e.children===t});t=a(t,r)}return e.oninput({target:{name:l,value:t,type:o}}),u.val=d(n,t),!1}(t.children)}},t.children))}))))}function T(e){var t=(void 0===e?{}:e).values,n=[],a=1,r={values:o({},null!=t?t:{}),onChange:function(e){return n.push(e),function(){return r.offChange(e)}},offChange:function(e){n=n.filter(function(t){return t!==e})},emitChange:function(e,t){n.forEach(function(n){return n(e,t)})},handleInput:function(e){var t,n=e.target,a=n.name,o=n.value;l.default.val(t=r.values[a])!==t?r.values[a].val=o:r.values[a]=o,r.emitChange(a,o)},args:function(e){var t,n;void 0===e&&(e={});var l=e.name,o=void 0===l?"v"+a++:l,i=e.value,u=e.oninput,s=void 0===u?r.handleInput:u;return i=null!=(t=null!=(n=i)?n:r.values[o])?t:"",r.values[o]=i,{name:o,value:i,oninput:s}}};return r}L.set("text",E),L.set("textarea",E),L.set("select",A),L.set("radioselect",N),L.set("checkbox",R),L.set("radio",R),L.set("switch",R),L.set("combobox",D);var B=["id","class","header","body","footer","close","centered","scrollable","position","width","color","dialogstyle","bodystyle"],H=["label","header","divider","text","active","disabled","class"],W=l.default.tags,G=W.div,_=W.button;function q(e){void 0===e&&(e={});var t=e.id,n=e.header,a=e.body,l=e.footer,i=e.close,u=void 0===i||i,s=e.centered,c=void 0===s||s,d=e.scrollable,f=e.position,v=e.width,p=e.color,m=e.dialogstyle,b=void 0===m?"":m,g=e.bodystyle,h=void 0===g?"":g,y=r(e,B);v&&(b+="width: "+v+";"),v&&(b+="max-width: inherit;"),f&&(b+="margin-left: "+f.left+"px; margin-top: "+f.top+"px;",c=!1);var w="modal-dialog"+(c?" modal-dialog-centered":"")+(d?" modal-dialog-scrollable":""),S="modal-content"+(p?" "+p:"");return G(o({class:function(){return"modal"},id:t,"aria-hidden":"true",tabindex:"-1"},y),G({class:w,style:b},G({class:S},n||u?G({class:"modal-header"},n,u?X:null):null,a&&G({class:"modal-body",style:h},a),l&&G({class:"modal-footer"},l))))}function V(e,t){var a,l;void 0===e&&(e={});var r,i=null==(a=null==t?void 0:t.dispose)||a,u={dom:null,isOpen:!1,modalResult:void 0,open:function(t,n){u.modalResult=void 0,null!=t&&null!=n&&(e=o({},e,{position:{left:t,top:n}})),u.bsm.show()},close:function(e){u.modalResult=e,u.bsm.hide()},asyncOpen:function(e,t){try{return Promise.resolve(new Promise(function(n){u.open(e,t),u.dom.addEventListener("hidden.bs.modal",function(){return n(u.modalResult)})}))}catch(e){return Promise.reject(e)}},get bsm(){return l||(u.dom=q(e),l=new n.Modal(u.dom,t),u.dom.addEventListener("shown.bs.modal",u.onShown),u.dom.addEventListener("hidden.bs.modal",u.onHidden)),l},dispose:function(){l&&(l.dispose(),l=null),u.dom&&(u.dom.remove(),u.dom=null)},hide:function(e){r=e,l.hide()},show:function(){l.show()},onShown:function(e){u.isOpen=!0},onHidden:function(e){u.isOpen=!1,r?r=!1:i&&u.dispose()}};return u}function X(e,t){return _({type:"button",class:(void 0===e?{}:e).class||"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},t)}function Y(){return l.default.tags.ul.apply(void 0,[{class:"dropdown-menu",style:"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;"}].concat([].slice.call(arguments).map(function(e){return e instanceof HTMLElement?e:J(e)})))}function J(e){var t=l.default.tags,n=t.li,a=t.span,i=t.hr,u=t.button,s=function(e){e.preventDefault(),e.stopPropagation()},c=e.label,d=e.header,f=e.divider,v=e.text,p=e.active,m=e.disabled,b=e.class,g=r(e,H),h=function(e){return function(){var t=e;return l.default.val(p)&&(t+=" active"),l.default.val(m)&&(t+=" disabled"),l.default.val(b)&&(t+=" "+l.default.val(b)),t}};return n(d?a(o({class:h("dropdown-header fw-bold border-bottom"),onclick:s},g),c):f?i(o({class:h("dropdown-divider"),onclick:s},g),c):v?a(o({class:h("dropdown-item-text"),onclick:s},g),c):u(o({class:h("dropdown-item"),role:"button"},g),c))}var K=["class","sticky","menu","t"],Q=["href","label","icon","items","level","Comp","hidden","t"],U=["label","class","active","disabled","divider","level"],Z=["label","items","t","level"],$=l.default.tags,ee=$.div,te=$.button,ne=$.hr,ae=$.span,le=$.nav,oe=$.a,re=$.ul,ie=$.li;function ue(e){var t=e.href,n=void 0===t?"#":t,a=e.label,i=e.icon,u=e.items,s=e.level,c=void 0===s?0:s,d=e.Comp,f=e.hidden,v=void 0!==f&&f,p=e.t,m=void 0===p?function(e){return e}:p,b=r(e,Q);return"function"==typeof v&&(v=v()),v?null:("function"==typeof a&&(a=a()),a=a?m(l.default.val(a)):"",b.title&&(b.title=m(l.default.val(b.title))),u?ce(o({label:a,items:u,level:c,t:m},b)):ie({class:function(){var e="nav-item";return 0!==c&&(e=""),l.default.val(b.class)&&(e+=" "+l.default.val(b.class)),e}},d?d(o({href:n,label:a,icon:i,items:u,level:c,hidden:v,t:m},b)):se(o({},b,{href:n,label:a,level:c}))))}function se(e){var t=e.label,n=e.class,a=e.active,i=e.disabled,u=e.divider,s=e.level,c=void 0===s?0:s,d=r(e,U);return u?ne({class:"dropdown-divider"}):oe(o({class:function(){var e="nav-link";return 0!==c&&(e="dropdown-item"),l.default.val(a)&&(e+=" active"),l.default.val(a)&&0===c&&(e+=" text-primary"),l.default.val(i)&&(e+=" disabled"),l.default.val(n)&&(e+=" "+l.default.val(n)),e},href:"#"},d),t)}function ce(e){var t=e.label,n=e.items,a=e.t,l=void 0===a?function(e){return e}:a,i=e.level,u=r(e,Z);return i>0?ie({},oe({class:"dropdown-item",href:"#"},t+" »"),re({class:"submenu dropdown-menu"},n.map(function(e){return ue(o({level:i+1,t:l},e))}))):ie({class:"nav-item dropdown",id:"NavDropdown"+i},oe({class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown"},t),re({class:"dropdown-menu"},n.map(function(e){return ue(o({level:i+1},e,{t:l},u))})))}function de(e,t){for(var n in t)try{e[n]=t[n].constructor===Object?de(e[n],t[n]):t[n]}catch(a){e[n]=t[n]}return e}var fe=["attr","size","title"],ve=["src","alt"],pe=["size","style"],me=["size"],be=["size"],ge=new Map,he=0,ye=new Map;function we(e){if("string"!=typeof e)return!1;var t=ge.get(e);return!t&&he>0&&!ye.get(e)&&(console.warn("Get unknown icon",e),ye.set(e,!0)),t}function Se(e){var t;void 0===e&&(e={});var n=e.attr,a=e.size,i=e.title,u=r(e,fe),s=a||"1em",c="";e.class&&(c+=(c?c+" ":"")+e.class);var d=e.color?"color: "+e.color+"; ":"";return e.style&&(d+=e.style),(t=l.default.tagsNS("http://www.w3.org/2000/svg")).svg.apply(t,[o({stroke:"currentColor",fill:"currentColor","stroke-width":"0"},n,u,{class:c,style:d,height:s,width:s}),i?l.default.tagsNS("http://www.w3.org/2000/svg").title(i):null].concat([].slice.call(arguments,1)))}function ke(e,t){return void 0===t&&(t={}),function(n){var a=void 0===n?{}:n,l=a.size,o=void 0===l?"1em":l,i=r(a,me),u=document.createElement("div");return u.innerHTML=e,u=u.firstChild,i.width=o,i.height=o,Object.keys(t).forEach(function(e){return u.setAttribute(e,t[e])}),Object.keys(i).forEach(function(e){return u.setAttribute(e,i[e])}),u}}function ze(e,t){var n=void 0===t?{}:t,a=n.size,i=r(n,be),u=we(e);if(u){if("function"==typeof u)return u(o({size:a},i));e=u}if("function"==typeof e)return i.size=a,e(o({},i));if("string"==typeof e&&e.startsWith("fa"))return void 0!==a&&(i.style=i.style=o({},i.style||{},{fontSize:a})),i.class=i.class?i.class+" "+e:e,l.default.tags.i(o({},i));if("string"==typeof e&&e.startsWith("<svg "))return ke(e)(o({size:a},i));if("string"==typeof e){if(void 0!==a){var s="font-size:"+a+";";i.style&&(s+=i.style),i.style=s}return l.default.tags.span(o({},i),e)}var c="width:"+(a=void 0===a?"1em":a)+"; height:"+a+"; min-width:"+a+";";return i.style&&(c+=i.style),i.style=c,l.default.tags.div(o({},i))}ge.set("SPACE",function(e){return ze(" ",o({},e))}),e.Button=function(e,t){var n=e.bsSize,a=e.class,i=e.color,u=void 0===i?"secondary":i,s=e.outline,c=e.dropdown,d=e.type,f=void 0===d?"button":d,v=r(e,w);return l.default.val(c)&&(v["data-bs-toggle"]="dropdown"),z(o({type:f,class:function(){var e="btn";return l.default.val(u)&&(l.default.val(s)?e+=" btn-outline-"+l.default.val(u):e+=" btn-"+l.default.val(u)),l.default.val(n)&&(e+=" btn-"+l.default.val(n)),l.default.val(c)&&(e+=" dropdown-toggle"),l.default.val(a)&&(e+=" "+l.default.val(a)),e}},v),t)},e.CheckboxInput=function(e){return R(o({},e,{type:"checkbox"}))},e.CloseButton=X,e.ComboboxInput=D,e.ContextMenu=function(){var e=Y.apply(void 0,[].slice.call(arguments)),t=V({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:e});e.addEventListener("click",function(){return t.close()});var n=t.open;return t.open=function(e){e.preventDefault(),e.stopPropagation(),n(e.clientX,e.clientY)},t},e.DropdownMenu=function(){return l.default.tags.ul.apply(void 0,[{class:"dropdown-menu"}].concat([].slice.call(arguments).map(function(e){return e instanceof HTMLElement?e:J(e)})))},e.FormBuilder=function(e){var t=T(),n=o({},t,{dom:null!=e?e:l.default.tags("form"),row:null,add:function(e,a){var i,u=e.name,s=e.value,c=e.oninput,d=o({},r(e,y),t.args({name:u,value:s,oninput:c}));l.default.add(null!=(i=null!=a?a:n.row)?i:n.dom,F(d))},addRow:function(e){return null===e?n.row=null:(n.row=x({class:"row"+(e?" "+e:"")}),l.default.add(n.dom,n.row),n.row)}});return n},e.FormCheckInput=R,e.FormController=T,e.FormGroup=F,e.FormLabel=P,e.GenIcon=function(e){function t(e){return e&&e.map(function(e,n){return l.default.tagsNS("http://www.w3.org/2000/svg")[e.tag](o({},e.attr),t(e.child))})}return"svg"===e.tag?function(n){var a;return void 0===n&&(n={}),(a=l.default.tagsNS("http://www.w3.org/2000/svg")).svg.apply(a,[o({},e.attr,n)].concat(t(e.child)))}:function(n){return void 0===n&&(n={}),Se.apply(void 0,[o({},e.attr,n)].concat(t(e.child)))}},e.I18n=function(){var e={dict:{},language:"en",languageDefault:"en",setLanguage:function(t){e.language=String(t).toLowerCase(),e.dict[e.language]||(e.language=e.languageDefault)},getLanguage:function(){return e.language},t:function(t){if("function"==typeof t&&(t=t()),!t)return"";var n=function(e,t){try{t=t.split(".");for(var n=0;n<t.length;n++){if(!e)return e;e=e[t[n]]}}catch(e){return!1}return e}(e.dict[e.language],t);return n||(n=t.split(".").pop()),n},tPath:function(t){return t.endsWith(".")||(t+="."),function(n){return e.t(t+n)}},addWords:function(t,n,a){var l,o;a&&((l={})[a]=t,t=l),n&&((o={})[n]=t,t=o),de(e.dict,t)}};return e},e.Icon=ze,e.ImgIcon=function(e){var t=e.src,n=e.alt,a=r(e,ve);return function(e){var i=void 0===e?{}:e,u=i.size,s=void 0===u?"1em":u,c=i.style,d=void 0===c?"":c,f=r(i,pe);return l.default.tags.img(o({src:t,alt:n||t.split("/").pop(),style:d+"width:"+s+"; height:"+s+";"},a,f))}},e.Input=E,e.MenuItem=J,e.Modal=V,e.ModalFrame=q,e.NavItem=ue,e.NavLink=se,e.NavMenu=ce,e.Navbar=function(e){var t=e.class,n=e.sticky,a=void 0===n||n,i=e.menu,u=e.t,s=void 0===u?function(e){return e}:u;return r(e,K),le({class:function(){var e="navbar navbar-expand-lg bg-body-tertiary";return a&&(e+=" sticky-top"),l.default.val(t)&&(e+=" "+l.default.val(t)),e}},ee({class:"container-fluid"},i.brand,te({class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},ae({class:"navbar-toggler-icon"})),ee({class:"collapse navbar-collapse",id:"navbarSupportedContent"},re({class:"me-auto navbar-nav"},i.items.map(function(e){return ue(o({},e,{t:s}))})))))},e.PopupMenu=function(){var e=Y.apply(void 0,[].slice.call(arguments)),t=V({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:e});return e.addEventListener("click",function(){return t.close()}),t},e.PopupMenuFrame=Y,e.RadioInput=function(e){return R(o({},e,{type:"radio"}))},e.RadioSelectInput=N,e.SelectInput=A,e.SvgIconBase=Se,e.SvgStrIcon=ke,e.SwitchInput=function(e){return R(o({},e,{type:"switch"}))},e.getIcon=we,e.iconMap=ge,e.selectOptions=s,e.setIcon=function(e,t){he>1&&ge.get(e)&&console.warn("Redefine icon",e),ge.set(e,t)},e.setWarning=function(e){switch(e){case 0:case 1:case 2:he=e;break;case"all":he=2;break;case"get":he=1;break;default:he=0}},e.typeMap=L});
//# sourceMappingURL=lib.umd.js.map
