import e from"vanjs-core";import{Modal as t}from"bootstrap";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(r[n]=e[n]);return r}var r=e.tags.option,o=console.warn;function l(e,t,n){return e&&!Array.isArray(e)&&"object"==typeof e&&e.value&&(e=function(e){var t=e.value,n=e.text;return t?(t=i(t,!0),n=i(n,!1),t.map(function(e,t){return{value:e,text:n[t]}})):[]}(e)),e=(e=i(e||[],!0)).map(function(e){var t={value:"",children:""};return e?Array.isArray(e)?(e.length>0&&(t.value=e[0],t.children=e[0]),e.length>1&&(t.value=e[1]),t):"object"==typeof e?(t.value=e.value,t.children=e.value,["children","text","displayValue"].some(function(n){return void 0!==e[n]&&(t.children=e[n],!0)}),t):(t.value=e,t.children=e,t):t}),t?e.map(function(e){var t={value:e.value};return void 0!==n&&e.value===n&&(t.selected=!0),r(t,e.children)}):e}function i(e,t){return e?("string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(t&&o("parseSelectOptions value invalid"),e=[]),e):[]}var s=["class","bsSize"],c=["class","bsSize","col"],u=["class","bsSize"],d=["options"],v=["options","class","bsSize","inline","id"],f=["label","type","class","style","bsSize","reverse","id","value"],p=["name","label","input","class","bsSize","cols","id"],m=["options","style","bsSize","onItemClick"],g=["name","value","oninput"],b=["bsSize","class","color","outline","dropdown","type"],h=e.tags,y=h.a,w=h.button,k=h.div,S=h.input,z=h.label,x=h.li,C=h.ul,O=h.select,E=new Map;function j(t){var r=t.class,o=t.bsSize,l=a(t,s);return S(n({class:function(){var t="form-control";return e.val(o)&&(t+=" form-control-"+e.val(o)),e.val(r)&&(t+=" "+e.val(r)),t}},l))}function L(t,r){var o=t.class,l=t.bsSize,i=t.col,s=a(t,c);return z(n({class:function(){var t="form-label";return e.val(i)?(t="col-form-label",e.val(l)?t+=" col-"+e.val(l)+"-"+e.val(i)+" col-form-label-"+e.val(l):t+=" col-"+e.val(i)):e.val(l)&&(t+=" col-form-label-"+e.val(l)),e.val(o)&&(t+=" "+e.val(o)),t}},s),r)}function M(t){var r=t.class,o=t.bsSize,i=a(t,u),s=i.options,c=void 0===s?[]:s,v=a(i,d);return c="function"!=typeof c?l(c,!0,i.value):c(),O(n({class:function(){var t="form-select";return e.val(o)&&(t+=" form-select-"+e.val(o)),e.val(r)&&(t+=" "+e.val(r)),t}},v),c)}function A(t){var n=t.options,r=t.class,o=t.bsSize,i=t.inline,s=t.id,c=a(t,v),u=c.name||Math.random().toString(36).substring(2,9);s=s||"rgi_"+u,n=l(n);var d=function(e){c.oninput&&c.oninput({target:{name:u,value:e.target.value,type:"radiogroup"}})},f=n.map(function(e,t){var n=s+"_"+t;return k({class:"form-check"+(i?" form-check-inline":"")},S({class:"form-check-input",type:"radio",id:n,value:e.value,name:u,checked:c.value===e.value,oninput:d}),z({class:"form-check-label",for:n},e.children))});return k({class:function(){var t="form-control";return e.val(o)&&(t+=" form-control-"+e.val(o)),e.val(r)&&(t+=" "+e.val(r)),t}},f)}function P(t){var r=t.label,o=t.type,l=t.class,i=t.style,s=t.bsSize,c=t.reverse,u=t.id,d=t.value,v=a(t,f);u=u||Math.random().toString(36).substring(2,9);var p="switch"===o;p&&(o="checkbox");var m="form-check-input";return l&&e.val(l).includes("form-control")&&(m+=" ms-0 me-2"),k({class:function(){var t="form-check";return p&&(t+=" form-switch"),e.val(s)&&(t+=" form-control-"+e.val(s)),e.val(c)&&(t+=" form-check-reverse"),e.val(l)&&(t+=" "+e.val(l)),t},style:i},S(n({},v,{class:m,id:u,type:o,checked:d||!1,oninput:function(e){var t=e.target,n=t.checked;v.oninput({target:{value:n=!!n,checked:n,name:t.name,type:t.type}})},role:p?"switch":void 0})),function(){return r?z({class:"form-check-label",for:u},r):null})}E.set("text",j),E.set("textarea",j),E.set("select",M),E.set("radioselect",A),E.set("checkbox",P),E.set("radio",P),E.set("switch",P),E.set("combobox",I);var R=function(e){return P(n({},e,{type:"switch"}))},D=function(e){return P(n({},e,{type:"checkbox"}))},H=function(e){return P(n({},e,{type:"radio"}))};function N(t){var r,o=t.name,l=t.label,i=t.input,s=t.class,c=t.bsSize,u=t.cols,d=t.id,v=a(t,p),f=null!=d?d:Math.random().toString(36).substring(2,9),m="i_"+f,g=null!=(r=null!=i?i:E.get(v.type))?r:j;if(u){var b=u.split(" "),h=b[1];return[L({bsSize:c,col:b[0],for:m},l),k({class:function(){var e=h?"col-"+h:"col";return["checkbox","radio","switch"].includes(v.type)&&(e+=" pt-2"),e}},g(n({bsSize:c,name:o,id:m},v)))]}return k(n({class:function(){var t="";return e.val(s)&&(t+=" "+e.val(s)),t},id:f},v),L({bsSize:c,for:m},l),g(n({bsSize:c,name:o,id:m},v)))}function I(t){var r=t.options,o=void 0===r?[]:r,i=t.onItemClick,s=a(t,m);o=l(o);var c=e.state(d(o,e.val(t.value)));function u(e,t){var n=e.find(function(e){return e.children===t});return n&&(t=n.value),t}function d(e,t){var n=e.find(function(e){return e.value===t});return n&&(t=n.children),t}return k({style:e.val(t.style),class:function(){var n="input-group";return e.val(t.bsSize)&&(n+=" input-group-"+e.val(t.bsSize)),e.val(t.class)&&(n+=" "+e.val(t.class)),n}},j(n({},s,{value:c,oninput:function(e){var n=e.target.value;c.val=n,t.oninput({target:{value:u(o,n),name:t.name,type:t.type}})}})),k({class:"dropdown"},w({class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}),C({class:"dropdown-menu"},o.map(function(e){return x(y({class:"dropdown-item",href:"#",onclick:function(){return function(e){var n=t.name,a=t.type;if(e=u(o,e),i){var r=o.find(function(t){return t.children===e});e=i(e,r)}return t.oninput({target:{name:n,value:e,type:a}}),c.val=d(o,e),!1}(e.children)}},e.children))}))))}function T(t){var a=(void 0===t?{}:t).values,r=[],o=1,l={values:n({},null!=a?a:{}),onChange:function(e){return r.push(e),function(){return l.offChange(e)}},offChange:function(e){r=r.filter(function(t){return t!==e})},emitChange:function(e,t){r.forEach(function(n){return n(e,t)})},handleInput:function(t){var n,a=t.target,r=a.name,o=a.value;e.val(n=l.values[r])!==n?l.values[r].val=o:l.values[r]=o,l.emitChange(r,o)},args:function(e){var t,n;void 0===e&&(e={});var a=e.name,r=void 0===a?"v"+o++:a,i=e.value,s=e.oninput,c=void 0===s?l.handleInput:s;return i=null!=(t=null!=(n=i)?n:l.values[r])?t:"",l.values[r]=i,{name:r,value:i,oninput:c}}};return l}function W(t){var r=T(),o=n({},r,{dom:null!=t?t:e.tags("form"),row:null,add:function(t,l){var i,s=t.name,c=t.value,u=t.oninput,d=n({},a(t,g),r.args({name:s,value:c,oninput:u}));e.add(null!=(i=null!=l?l:o.row)?i:o.dom,N(d))},addRow:function(t){return null===t?o.row=null:(o.row=k({class:"row"+(t?" "+t:"")}),e.add(o.dom,o.row),o.row)}});return o}function _(t,r){var o=t.bsSize,l=t.class,i=t.color,s=void 0===i?"secondary":i,c=t.outline,u=t.dropdown,d=t.type,v=void 0===d?"button":d,f=a(t,b);return e.val(u)&&(f["data-bs-toggle"]="dropdown"),w(n({type:v,class:function(){var t="btn";return e.val(s)&&(e.val(c)?t+=" btn-outline-"+e.val(s):t+=" btn-"+e.val(s)),e.val(o)&&(t+=" btn-"+e.val(o)),e.val(u)&&(t+=" dropdown-toggle"),e.val(l)&&(t+=" "+e.val(l)),t}},f),r)}var G=["id","class","header","body","footer","close","centered","scrollable","position","width","color","dialogstyle","bodystyle"],V=["label","header","divider","text","active","disabled","class"],X=e.tags,Y=X.div,q=X.button;function B(e){void 0===e&&(e={});var t=e.id,r=e.header,o=e.body,l=e.footer,i=e.close,s=void 0===i||i,c=e.centered,u=void 0===c||c,d=e.scrollable,v=e.position,f=e.width,p=e.color,m=e.dialogstyle,g=void 0===m?"":m,b=e.bodystyle,h=void 0===b?"":b,y=a(e,G);f&&(g+="width: "+f+";"),f&&(g+="max-width: inherit;"),v&&(g+="margin-left: "+v.left+"px; margin-top: "+v.top+"px;",u=!1);var w="modal-dialog"+(u?" modal-dialog-centered":"")+(d?" modal-dialog-scrollable":""),k="modal-content"+(p?" "+p:"");return Y(n({class:function(){return"modal"},id:t,"aria-hidden":"true",tabindex:"-1"},y),Y({class:w,style:g},Y({class:k},r||s?Y({class:"modal-header"},r,s?J:null):null,o&&Y({class:"modal-body",style:h},o),l&&Y({class:"modal-footer"},l))))}function F(e,a){var r,o;void 0===e&&(e={});var l,i=null==(r=null==a?void 0:a.dispose)||r,s={dom:null,isOpen:!1,modalResult:void 0,open:function(t,a){s.modalResult=void 0,null!=t&&null!=a&&(e=n({},e,{position:{left:t,top:a}})),s.bsm.show()},close:function(e){s.modalResult=e,s.bsm.hide()},asyncOpen:function(e,t){try{return Promise.resolve(new Promise(function(n){s.open(e,t),s.dom.addEventListener("hidden.bs.modal",function(){return n(s.modalResult)})}))}catch(e){return Promise.reject(e)}},get bsm(){return o||(s.dom=B(e),o=new t(s.dom,a),s.dom.addEventListener("shown.bs.modal",s.onShown),s.dom.addEventListener("hidden.bs.modal",s.onHidden)),o},dispose:function(){o&&(o.dispose(),o=null),s.dom&&(s.dom.remove(),s.dom=null)},hide:function(e){l=e,o.hide()},show:function(){o.show()},onShown:function(e){s.isOpen=!0},onHidden:function(e){s.isOpen=!1,l?l=!1:i&&s.dispose()}};return s}function J(e,t){return q({type:"button",class:(void 0===e?{}:e).class||"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},t)}function K(){return e.tags.ul.apply(void 0,[{class:"dropdown-menu",style:"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;"}].concat([].slice.call(arguments).map(function(e){return e instanceof HTMLElement?e:U(e)})))}function Q(){return e.tags.ul.apply(void 0,[{class:"dropdown-menu"}].concat([].slice.call(arguments).map(function(e){return e instanceof HTMLElement?e:U(e)})))}function U(t){var r=e.tags,o=r.li,l=r.span,i=r.hr,s=r.button,c=function(e){e.preventDefault(),e.stopPropagation()},u=t.label,d=t.header,v=t.divider,f=t.text,p=t.active,m=t.disabled,g=t.class,b=a(t,V),h=function(t){return function(){var n=t;return e.val(p)&&(n+=" active"),e.val(m)&&(n+=" disabled"),e.val(g)&&(n+=" "+e.val(g)),n}};return o(d?l(n({class:h("dropdown-header fw-bold border-bottom"),onclick:c},b),u):v?i(n({class:h("dropdown-divider"),onclick:c},b),u):f?l(n({class:h("dropdown-item-text"),onclick:c},b),u):s(n({class:h("dropdown-item"),role:"button"},b),u))}function Z(){var e=K.apply(void 0,[].slice.call(arguments)),t=F({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:e});return e.addEventListener("click",function(){return t.close()}),t}function $(){var e=K.apply(void 0,[].slice.call(arguments)),t=F({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:e});e.addEventListener("click",function(){return t.close()});var n=t.open;return t.open=function(e){e.preventDefault(),e.stopPropagation(),n(e.clientX,e.clientY)},t}var ee=["class","sticky","menu","t"],te=["href","label","icon","items","level","Comp","hidden","t"],ne=["label","class","active","disabled","divider","level"],ae=["label","items","t","level"],re=e.tags,oe=re.div,le=re.button,ie=re.hr,se=re.span,ce=re.nav,ue=re.a,de=re.ul,ve=re.li;function fe(t){var r=t.class,o=t.sticky,l=void 0===o||o,i=t.menu,s=t.t,c=void 0===s?function(e){return e}:s;return a(t,ee),ce({class:function(){var t="navbar navbar-expand-lg bg-body-tertiary";return l&&(t+=" sticky-top"),e.val(r)&&(t+=" "+e.val(r)),t}},oe({class:"container-fluid"},i.brand,le({class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},se({class:"navbar-toggler-icon"})),oe({class:"collapse navbar-collapse",id:"navbarSupportedContent"},de({class:"me-auto navbar-nav"},i.items.map(function(e){return pe(n({},e,{t:c}))})))))}function pe(t){var r=t.href,o=void 0===r?"#":r,l=t.label,i=t.icon,s=t.items,c=t.level,u=void 0===c?0:c,d=t.Comp,v=t.hidden,f=void 0!==v&&v,p=t.t,m=void 0===p?function(e){return e}:p,g=a(t,te);return"function"==typeof f&&(f=f()),f?null:("function"==typeof l&&(l=l()),l=l?m(e.val(l)):"",g.title&&(g.title=m(e.val(g.title))),s?ge(n({label:l,items:s,level:u,t:m},g)):ve({class:function(){var t="nav-item";return 0!==u&&(t=""),e.val(g.class)&&(t+=" "+e.val(g.class)),t}},d?d(n({href:o,label:l,icon:i,items:s,level:u,hidden:f,t:m},g)):me(n({},g,{href:o,label:l,level:u}))))}function me(t){var r=t.label,o=t.class,l=t.active,i=t.disabled,s=t.divider,c=t.level,u=void 0===c?0:c,d=a(t,ne);return s?ie({class:"dropdown-divider"}):ue(n({class:function(){var t="nav-link";return 0!==u&&(t="dropdown-item"),e.val(l)&&(t+=" active"),e.val(l)&&0===u&&(t+=" text-primary"),e.val(i)&&(t+=" disabled"),e.val(o)&&(t+=" "+e.val(o)),t},href:"#"},d),r)}function ge(e){var t=e.label,r=e.items,o=e.t,l=void 0===o?function(e){return e}:o,i=e.level,s=a(e,ae);return i>0?ve({},ue({class:"dropdown-item",href:"#"},t+" »"),de({class:"submenu dropdown-menu"},r.map(function(e){return pe(n({level:i+1,t:l},e))}))):ve({class:"nav-item dropdown",id:"NavDropdown"+i},ue({class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown"},t),de({class:"dropdown-menu"},r.map(function(e){return pe(n({level:i+1},e,{t:l},s))})))}function be(){var e={dict:{},language:"en",languageDefault:"en",setLanguage:function(t){e.language=String(t).toLowerCase(),e.dict[e.language]||(e.language=e.languageDefault)},getLanguage:function(){return e.language},t:function(t){if("function"==typeof t&&(t=t()),!t)return"";var n=function(e,t){try{t=t.split(".");for(var n=0;n<t.length;n++){if(!e)return e;e=e[t[n]]}}catch(e){return!1}return e}(e.dict[e.language],t);return n||(n=t.split(".").pop()),n},tPath:function(t){return t.endsWith(".")||(t+="."),function(n){return e.t(t+n)}},addWords:function(t,n,a){var r,o;a&&((r={})[a]=t,t=r),n&&((o={})[n]=t,t=o),he(e.dict,t)}};return e}function he(e,t){for(var n in t)try{e[n]=t[n].constructor===Object?he(e[n],t[n]):t[n]}catch(a){e[n]=t[n]}return e}var ye=["attr","size","title"],we=["src","alt"],ke=["size","style"],Se=["size"],ze=["size"],xe=new Map,Ce=0,Oe=new Map;function Ee(e){if("string"!=typeof e)return!1;var t=xe.get(e);return!t&&Ce>0&&!Oe.get(e)&&(console.warn("Get unknown icon",e),Oe.set(e,!0)),t}function je(e,t){Ce>1&&xe.get(e)&&console.warn("Redefine icon",e),xe.set(e,t)}function Le(e){switch(e){case 0:case 1:case 2:Ce=e;break;case"all":Ce=2;break;case"get":Ce=1;break;default:Ce=0}}function Me(t){var r;void 0===t&&(t={});var o=t.attr,l=t.size,i=t.title,s=a(t,ye),c=l||"1em",u="";t.class&&(u+=(u?u+" ":"")+t.class);var d=t.color?"color: "+t.color+"; ":"";return t.style&&(d+=t.style),(r=e.tagsNS("http://www.w3.org/2000/svg")).svg.apply(r,[n({stroke:"currentColor",fill:"currentColor","stroke-width":"0"},o,s,{class:u,style:d,height:c,width:c}),i?e.tagsNS("http://www.w3.org/2000/svg").title(i):null].concat([].slice.call(arguments,1)))}function Ae(t){function a(t){return t&&t.map(function(t,r){return e.tagsNS("http://www.w3.org/2000/svg")[t.tag](n({},t.attr),a(t.child))})}return"svg"===t.tag?function(r){var o;return void 0===r&&(r={}),(o=e.tagsNS("http://www.w3.org/2000/svg")).svg.apply(o,[n({},t.attr,r)].concat(a(t.child)))}:function(e){return void 0===e&&(e={}),Me.apply(void 0,[n({},t.attr,e)].concat(a(t.child)))}}function Pe(t){var r=t.src,o=t.alt,l=a(t,we);return function(t){var i=void 0===t?{}:t,s=i.size,c=void 0===s?"1em":s,u=i.style,d=void 0===u?"":u,v=a(i,ke);return e.tags.img(n({src:r,alt:o||r.split("/").pop(),style:d+"width:"+c+"; height:"+c+";"},l,v))}}function Re(e,t){return void 0===t&&(t={}),function(n){var r=void 0===n?{}:n,o=r.size,l=void 0===o?"1em":o,i=a(r,Se),s=document.createElement("div");return s.innerHTML=e,s=s.firstChild,i.width=l,i.height=l,Object.keys(t).forEach(function(e){return s.setAttribute(e,t[e])}),Object.keys(i).forEach(function(e){return s.setAttribute(e,i[e])}),s}}function De(t,r){var o=void 0===r?{}:r,l=o.size,i=a(o,ze),s=Ee(t);if(s){if("function"==typeof s)return s(n({size:l},i));t=s}if("function"==typeof t)return i.size=l,t(n({},i));if("string"==typeof t&&t.startsWith("fa"))return void 0!==l&&(i.style=i.style=n({},i.style||{},{fontSize:l})),i.class=i.class?i.class+" "+t:t,e.tags.i(n({},i));if("string"==typeof t&&t.startsWith("<svg "))return Re(t)(n({size:l},i));if("string"==typeof t){if(void 0!==l){var c="font-size:"+l+";";i.style&&(c+=i.style),i.style=c}return e.tags.span(n({},i),t)}var u="width:"+(l=void 0===l?"1em":l)+"; height:"+l+"; min-width:"+l+";";return i.style&&(u+=i.style),i.style=u,e.tags.div(n({},i))}xe.set("SPACE",function(e){return De(" ",n({},e))});export{_ as Button,D as CheckboxInput,J as CloseButton,I as ComboboxInput,$ as ContextMenu,Q as DropdownMenu,W as FormBuilder,P as FormCheckInput,T as FormController,N as FormGroup,L as FormLabel,Ae as GenIcon,be as I18n,De as Icon,Pe as ImgIcon,j as Input,U as MenuItem,F as Modal,B as ModalFrame,pe as NavItem,me as NavLink,ge as NavMenu,fe as Navbar,Z as PopupMenu,K as PopupMenuFrame,H as RadioInput,A as RadioSelectInput,M as SelectInput,Me as SvgIconBase,Re as SvgStrIcon,R as SwitchInput,Ee as getIcon,xe as iconMap,l as selectOptions,je as setIcon,Le as setWarning,E as typeMap};
//# sourceMappingURL=lib.module.mjs.map
