import n from"vanjs-core";import{Modal as e}from"bootstrap";function t(){return t=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},t.apply(this,arguments)}function a(n,e){if(null==n)return{};var t,a,o={},r=Object.keys(n);for(a=0;a<r.length;a++)e.indexOf(t=r[a])>=0||(o[t]=n[t]);return o}var o=n.tags.option,r=console.warn;function l(n,e,t){return n&&!Array.isArray(n)&&"object"==typeof n&&n.value&&(n=function(n){var e=n.value,t=n.text;return e?(e=i(e,!0),t=i(t,!1),e.map(function(n,e){return{value:n,text:t[e]}})):[]}(n)),n=(n=i(n||[],!0)).map(function(n){var e={value:"",children:""};return n?Array.isArray(n)?(n.length>0&&(e.value=n[0],e.children=n[0]),n.length>1&&(e.value=n[1]),e):"object"==typeof n?(e.value=n.value,e.children=n.value,["children","text","displayValue"].some(function(t){return void 0!==n[t]&&(e.children=n[t],!0)}),e):(e.value=n,e.children=n,e):e}),e?n.map(function(n){var e={value:n.value};return void 0!==t&&n.value===t&&(e.selected=!0),o(e,n.children)}):n}function i(n,e){return n?("string"==typeof n&&(n=n.split(",")),Array.isArray(n)||(e&&r("parseSelectOptions value invalid"),n=[]),n):[]}var s=["class","bsSize","col"],c=["class","isvalid","bsSize"],u=["class","isvalid","bsSize"],d=["class","isvalid","bsSize"],v=["options"],p=["options","class","bsSize","inline","id","oninput","name","value","disabled","isvalid"],f=["label","type","class","style","bsSize","reverse","id","value","isvalid"],g=["options","style","bsSize","onItemClick","disabled","isvalid"],m=["name","label","input","class","inputClass","bsSize","cols","col","id","separated"],h=["name","value","oninput","cols","onvalidate"],b=["bsSize","class","color","outline","dropdown","type"],y=n.tags,w=y.button,k=y.div,C=y.input,D=y.label,S=y.textarea,z=y.select,x=new Map;function I(e,o){var r=e.class,l=e.bsSize,i=e.col,c=a(e,s);return D(t({class:function(){var e="form-label";return n.val(i)?(e="col-form-label",n.val(l)?e+=" col-"+n.val(l)+"-"+n.val(i)+" col-form-label-"+n.val(l):e+=" col-"+n.val(i)):n.val(l)&&(e+=" col-form-label-"+n.val(l)),n.val(r)&&(e+=" "+n.val(r)),e}},c),o)}function O(e){var o=e.class,r=e.isvalid,l=e.bsSize,i=a(e,c);return C(t({class:function(){var e="form-control";return n.val(l)&&(e+=" form-control-"+n.val(l)),n.val(o)&&(e+=" "+n.val(o)),null!=r&&(e+=n.val(r)?" is-valid":" is-invalid"),e}},i))}function A(e){var o=e.class,r=e.isvalid,i=e.bsSize,s=a(e,d),c=s.options,u=void 0===c?[]:c,p=a(s,v);return u="function"!=typeof u?l(u,!0,s.value):u(),z(t({class:function(){var e="form-select";return n.val(i)&&(e+=" form-select-"+n.val(i)),n.val(o)&&(e+=" "+n.val(o)),null!=r&&(e+=n.val(r)?" is-valid":" is-invalid"),e}},p),u)}function L(e){var o=e.options,r=e.class,i=e.bsSize,s=e.inline,c=e.id,u=e.oninput,d=e.name,v=e.value,f=e.disabled,g=e.isvalid,m=a(e,p);d=d||Math.random().toString(36).substring(2,9),c=c||"rgi_"+d,o=l(o);var h=function(n){u&&u({target:{name:d,value:n.target.value,type:"radiogroup"}})},b=o.map(function(n,e){var t=c+"_"+e;return k({class:"form-check"+(s?" form-check-inline":"")},C({class:"form-check-input",type:"radio",id:t,value:n.value,name:d,checked:v===n.value,oninput:h,disabled:f}),D({class:"form-check-label",for:t},n.children))});return k(t({class:function(){var e="form-control";return n.val(i)&&(e+=" form-control-"+n.val(i)),n.val(r)&&(e+=" "+n.val(r)),null!=g&&(e+=n.val(g)?" is-valid":" is-invalid"),e},disabled:f},m),b)}function M(e){var o=e.label,r=e.type,l=e.class,i=e.style,s=e.bsSize,c=e.reverse,u=e.id,d=e.value,v=e.isvalid,p=a(e,f);u=u||Math.random().toString(36).substring(2,9);var g="switch"===r;return g&&(r="checkbox"),k.apply(void 0,[{class:function(){var e="form-check";return g&&(e+=" form-switch"),n.val(s)&&(e+=" form-control-"+n.val(s)),n.val(c)&&(e+=" form-check-reverse"),n.val(l)&&(e+=" "+n.val(l)),e},style:i},C(t({},p,{class:function(){var e="form-check-input";return null!=v&&(e+=n.val(v)?" is-valid":" is-invalid"),e},id:u,type:r,checked:d||!1,oninput:function(n){n.stopPropagation();var e=n.target,t=e.checked;p.oninput({target:{value:t=!!t,checked:t,name:e.name,type:e.type}})},role:g?"switch":void 0})),function(){return o?D({class:"form-check-label",for:u},o):null}].concat([].slice.call(arguments,1)))}x.set("text",O),x.set("textarea",function(e){var o=e.class,r=e.isvalid,l=e.bsSize,i=a(e,u);return S(t({class:function(){var e="form-control";return n.val(l)&&(e+=" form-control-"+n.val(l)),n.val(o)&&(e+=" "+n.val(o)),null!=r&&(e+=n.val(r)?" is-valid":" is-invalid"),e}},i))}),x.set("select",A),x.set("radioselect",L),x.set("checkbox",M),x.set("radio",M),x.set("switch",M),x.set("combobox",H);var E=function(n){return M(t({},n,{type:"switch"}))},P=function(n){return M(t({},n,{type:"checkbox"}))},j=function(n){return M(t({},n,{type:"radio"}))};function H(e){var o=n.tags,r=o.a,i=o.div,s=o.ul,c=o.li,u=e.options,d=void 0===u?[]:u,v=e.onItemClick,p=e.disabled,f=e.isvalid,m=a(e,g);d=l(d);var h=n.state(y(d,n.val(e.value)));function b(n,e){var t=n.find(function(n){return n.children===e});return t&&(e=t.value),e}function y(n,e){var t=n.find(function(n){return n.value===e});return t&&(e=t.children),e}return i({style:n.val(e.style),class:function(){var t="input-group";return n.val(e.bsSize)&&(t+=" input-group-"+n.val(e.bsSize)),n.val(e.class)&&(t+=" "+n.val(e.class)),null!=f&&(t+=n.val(f)?" is-valid":" is-invalid"),t}},O(t({},m,{disabled:p,value:h,oninput:function(n){var t=n.target.value;h.val=t,e.oninput({target:{value:b(d,t),name:e.name,type:e.type}})}})),V({dropdown:"true",disabled:p}),s({class:"dropdown-menu"},d.map(function(n){return c(r({class:"dropdown-item",href:"#",onclick:function(){return function(n){var t=e.name,a=e.type;if(n=b(d,n),v){var o=d.find(function(e){return e.children===n});n=v(n,o)}return e.oninput({target:{name:t,value:n,type:a}}),h.val=y(d,n),!1}(n.children)}},n.children))})))}function T(e){var o,r,l,i,s=e.name,c=e.label,u=e.input,d=e.class,v=e.inputClass,p=e.bsSize,f=e.cols,g=e.col,h=e.id,b=e.separated,y=a(e,m),w=[].slice.call(arguments,1),C=null!=h?h:Math.random().toString(36).substring(2,9),D=C+"-i",S=null!=(o=null!=u?u:x.get(y.type))?o:O;if(["checkbox","radio","switch"].includes(y.type)?(b?(l=I({bsSize:p,for:D},c),v=(null!=(i=v)?i:"")+" mt-2",r=S.apply(void 0,[t({bsSize:p,name:s,id:D,class:v},y)].concat(w))):(l=null,r=S.apply(void 0,[t({bsSize:p,name:s,id:D,class:v,label:c},y)].concat(w))),w=[]):(l=I({bsSize:p,for:D},c),r=S(t({bsSize:p,name:s,id:D,class:v},y))),f){var z=f.split(" "),A=z[0],L=z[1];L=L||12-Number(A);var M=[];return M.push(l?I({bsSize:p,col:A,id:C+"-l",for:D},c):k({class:A?"col-"+A:"col"})),M.push(k.apply(void 0,[{class:L?"col-"+L:"col"},r].concat(w))),M}return k.apply(void 0,g?[{class:g},l,r].concat(w):[t({class:function(){var e="";return n.val(d)&&(e+=" "+n.val(d)),e},id:C},y),l,r].concat(w))}function N(e){var a=(void 0===e?{}:e).values,o=[],r=1,l={values:t({},null!=a?a:{}),onChange:function(n){return o.push(n),function(){return l.offChange(n)}},offChange:function(n){o=o.filter(function(e){return e!==n})},emitChange:function(n,e){o.forEach(function(t){return t(n,e)})},handleInput:function(e){var t,a=e.target,o=a.name,r=a.value;n.val(t=l.values[o])!==t?l.values[o].val=r:l.values[o]=r,l.emitChange(o,r)},args:function(n){var e,t;void 0===n&&(n={});var a=n.name,o=void 0===a?"v"+r++:a,i=n.value,s=n.oninput,c=void 0===s?l.handleInput:s;return i=null!=(e=null!=(t=i)?t:l.values[o])?e:"",l.values[o]=i,{name:o,value:i,oninput:c}}};return l}function R(e){var o=void 0===e?{}:e,r=o.dom,l=o.rowClass,i=void 0===l?"":l,s=o.formClass,c=void 0===s?"":s,u=o.cols,d=o.autoRow,v=o.bsSize,p=o.id,f=o.onChange,g=function(n){var e=Number(n);return isNaN(e)?0:e},m=N({values:o.values});f&&m.onChange(f);var b=t({},m,{dom:null!=r?r:n.tags.form({class:c}),row:null,rowClass:i,cols:u,autoRow:d,colCount:0,id:null!=p?p:Math.random().toString(36).substring(2,9),valid:{},onvalidate:{},getFormValid:function(){return Object.keys(b.valid).every(function(n){return b.valid[n].val})},add:function(e){var o=e.name,r=e.value,l=e.oninput,i=e.cols,s=e.onvalidate,c=a(e,h);void 0===r&&o&&(r=b.values[o]);var u,d,p,f=t({},c,m.args({name:o,value:r,oninput:l}));return f.id=f.id||b.id+"-"+o,v&&void 0===f.bsSize&&(f.bsSize=v),f.cols=i||b.cols,b.autoRow&&(p=(u=f.cols.split(" "))[1],i={l:d=g(d=u[0]),r:p=(p=g(p))||12-d,t:d+p,s:d+" "+p},b.row||(b.addRow(),b.colCount=0),b.colCount+=i.t,f.cols=i.s,b.colCount>12&&(b.addRow(),b.colCount=i.t)),s&&(b.onvalidate[f.name]=s,b.valid[f.name]=n.state(s(b.values[f.name])),f.isvalid=b.valid[f.name]),b.addGroup.apply(b,[f].concat([].slice.call(arguments,1))),b},addGroup:function(e){var t;n.add(null!=(t=b.row)?t:b.dom,T.apply(void 0,[e].concat([].slice.call(arguments,1))))},addRow:function(e){return null===e?b.row=null:(b.row=k({class:"row"+(b.rowClass?" "+b.rowClass:"")+(e?" "+e:"")}),n.add(b.dom,b.row),b)}});return b.onChange(function(n,e){b.onvalidate[n]&&(b.valid[n].val=b.onvalidate[n](e))}),b}function V(e,o){var r=e.bsSize,l=e.class,i=e.color,s=void 0===i?"secondary":i,c=e.outline,u=e.dropdown,d=e.type,v=void 0===d?"button":d,p=a(e,b);return n.val(u)&&(p["data-bs-toggle"]="dropdown"),w(t({type:v,class:function(){var e="btn";return n.val(s)&&(n.val(c)?e+=" btn-outline-"+n.val(s):e+=" btn-"+n.val(s)),n.val(r)&&(e+=" btn-"+n.val(r)),n.val(u)&&(e+=" dropdown-toggle"),n.val(l)&&(e+=" "+n.val(l)),e}},p),o)}var F=["id","class","header","body","footer","close","centered","scrollable","position","width","color","dialogstyle","bodystyle"],G=["label","header","divider","text","active","disabled","class","tag"],W=n.tags,B=W.div,K=W.button,U=W.h5;function _(n){void 0===n&&(n={});var e=n.id,o=n.header,r=n.body,l=n.footer,i=n.close,s=void 0===i||i,c=n.centered,u=void 0===c||c,d=n.scrollable,v=n.position,p=n.width,f=n.color,g=n.dialogstyle,m=void 0===g?"":g,h=n.bodystyle,b=void 0===h?"":h,y=a(n,F);p&&(m+="width: "+p+";"),p&&(m+="max-width: inherit;"),v&&(m+="margin-left: "+v.left+"px; margin-top: "+v.top+"px;",u=!1);var w="modal-dialog"+(u?" modal-dialog-centered":"")+(d?" modal-dialog-scrollable":""),k="modal-content"+(f?" "+f:"");return"string"==typeof o&&(o=U({class:"modal-title"},o)),B(t({class:function(){return"modal"},id:e,"aria-hidden":"true",tabindex:"-1"},y),B({class:w,style:m},B({class:k},o||s?B({class:"modal-header"},o,s?Y:null):null,r&&B({class:"modal-body",style:b},r),l&&B({class:"modal-footer"},l))))}function X(n,a){var o,r;void 0===n&&(n={});var l,i=null==(o=null==a?void 0:a.dispose)||o,s={dom:null,isOpen:!1,modalResult:void 0,open:function(e,a){s.modalResult=void 0,null!=e&&null!=a&&(n=t({},n,{position:{left:e,top:a}})),s.bsm.show()},close:function(n){s.modalResult=n,s.bsm.hide()},asyncOpen:function(n,e){try{return Promise.resolve(new Promise(function(t){s.open(n,e),s.dom.addEventListener("hidden.bs.modal",function(){return t(s.modalResult)})}))}catch(n){return Promise.reject(n)}},get bsm(){return r||(s.dom=_(n),r=new e(s.dom,a),s.dom.addEventListener("shown.bs.modal",s.onShown),s.dom.addEventListener("hidden.bs.modal",s.onHidden)),r},dispose:function(){r&&(r.dispose(),r=null),s.dom&&(s.dom.remove(),s.dom=null)},hide:function(n){l=n,r.hide()},show:function(){r.show()},onShown:function(n){s.isOpen=!0},onHidden:function(n){s.isOpen=!1,l?l=!1:i&&s.dispose()}};return s}function Y(n,e){return K({type:"button",class:(void 0===n?{}:n).class||"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},e)}function q(){return n.tags.ul.apply(void 0,[{class:"dropdown-menu",style:"display: table; z-index: 0; position: inherit; min-width: 10rem; max-height: 400px; overflow-y: auto;"}].concat([].slice.call(arguments).map(function(n){return n instanceof HTMLElement?n:Q(n)})))}function J(){return n.tags.ul.apply(void 0,[{class:"dropdown-menu"}].concat([].slice.call(arguments).map(function(n){return n instanceof HTMLElement?n:Q(n)})))}function Q(e){var o=n.tags,r=o.li,l=o.span,i=o.hr,s=o.button,c=function(n){n.preventDefault(),n.stopPropagation()},u=e.label,d=e.header,v=e.divider,p=e.text,f=e.active,g=e.disabled,m=e.class,h=e.tag,b=a(e,G),y=function(e){return function(){var t=e;return n.val(f)&&(t+=" active"),n.val(g)&&(t+=" disabled"),n.val(m)&&(t+=" "+n.val(m)),t}};return r(d?(h=h?n.tags[h]:l)(t({class:y("dropdown-header fw-bold border-bottom"),onclick:c},b),u):v?(h=h?n.tags[h]:i)(t({class:y("dropdown-divider"),onclick:c},b),u):p?(h=h?n.tags[h]:l)(t({class:y("dropdown-item-text"),onclick:c},b),u):(h=h?n.tags[h]:s)(t({class:y("dropdown-item"),role:"button"},b),u))}function Z(){var n=q.apply(void 0,[].slice.call(arguments)),e=X({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:n});return n.addEventListener("click",function(){return e.close()}),e}function $(){var n=q.apply(void 0,[].slice.call(arguments)),e=X({close:!1,dialogstyle:"display: table; padding: 0;",bodystyle:"padding: 0;",body:n});n.addEventListener("click",function(){return e.close()});var t=e.open;return e.open=function(n){n.preventDefault(),n.stopPropagation(),t(n.clientX,n.clientY)},e}var nn=["class","sticky","menu","t"],en=["href","label","icon","items","level","Comp","hidden","t"],tn=["label","class","active","disabled","divider","level"],an=["label","items","t","level"],on=n.tags,rn=on.div,ln=on.button,sn=on.hr,cn=on.span,un=on.nav,dn=on.a,vn=on.ul,pn=on.li;function fn(e){var o=e.class,r=e.sticky,l=void 0===r||r,i=e.menu,s=e.t,c=void 0===s?function(n){return n}:s;return a(e,nn),un({class:function(){var e="navbar navbar-expand-lg bg-body-tertiary";return l&&(e+=" sticky-top"),n.val(o)&&(e+=" "+n.val(o)),e}},rn({class:"container-fluid"},i.brand,ln({class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},cn({class:"navbar-toggler-icon"})),rn({class:"collapse navbar-collapse",id:"navbarSupportedContent"},vn({class:"me-auto navbar-nav"},i.items.map(function(n){return gn(t({},n,{t:c}))})))))}function gn(e){var o=e.href,r=void 0===o?"#":o,l=e.label,i=e.icon,s=e.items,c=e.level,u=void 0===c?0:c,d=e.Comp,v=e.hidden,p=void 0!==v&&v,f=e.t,g=void 0===f?function(n){return n}:f,m=a(e,en);return"function"==typeof p&&(p=p()),p?null:("function"==typeof l&&(l=l()),l=l?g(n.val(l)):"",m.title&&(m.title=g(n.val(m.title))),s?hn(t({label:l,items:s,level:u,t:g},m)):pn({class:function(){var e="nav-item";return 0!==u&&(e=""),n.val(m.class)&&(e+=" "+n.val(m.class)),e}},d?d(t({href:r,label:l,icon:i,items:s,level:u,hidden:p,t:g},m)):mn(t({},m,{href:r,label:l,level:u}))))}function mn(e){var o=e.label,r=e.class,l=e.active,i=e.disabled,s=e.divider,c=e.level,u=void 0===c?0:c,d=a(e,tn);return s?sn({class:"dropdown-divider"}):dn(t({class:function(){var e="nav-link";return 0!==u&&(e="dropdown-item"),n.val(l)&&(e+=" active"),n.val(l)&&0===u&&(e+=" text-primary"),n.val(i)&&(e+=" disabled"),n.val(r)&&(e+=" "+n.val(r)),e},href:"#"},d),o)}function hn(n){var e=n.label,o=n.items,r=n.t,l=void 0===r?function(n){return n}:r,i=n.level,s=a(n,an);return i>0?pn({},dn({class:"dropdown-item",href:"#"},e+" »"),vn({class:"submenu dropdown-menu"},o.map(function(n){return gn(t({level:i+1,t:l},n))}))):pn({class:"nav-item dropdown",id:"NavDropdown"+i},dn({class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown"},e),vn({class:"dropdown-menu"},o.map(function(n){return gn(t({level:i+1},n,{t:l},s))})))}function bn(){var n={dict:{},language:"en",languageDefault:"en",setLanguage:function(e){n.language=String(e).toLowerCase(),n.dict[n.language]||(n.language=n.languageDefault)},getLanguage:function(){return n.language},t:function(e){if("function"==typeof e&&(e=e()),!e)return"";var t=function(n,e){try{e=e.split(".");for(var t=0;t<e.length;t++){if(!n)return n;n=n[e[t]]}}catch(n){return!1}return n}(n.dict[n.language],e);return t||(t=e.split(".").pop()),t},tPath:function(e){return e.endsWith(".")||(e+="."),function(t){return n.t(e+t)}},addWords:function(e,t,a){var o,r;a&&((o={})[a]=e,e=o),t&&((r={})[t]=e,e=r),yn(n.dict,e)}};return n}function yn(n,e){for(var t in e)try{n[t]=e[t].constructor===Object?yn(n[t],e[t]):e[t]}catch(a){n[t]=e[t]}return n}var wn=["attr","size","title"],kn=["src","alt"],Cn=["size","style"],Dn=["size"],Sn=["size"],zn=new Map,xn=0,In=new Map;function On(n){if("string"!=typeof n)return!1;var e=zn.get(n);return!e&&xn>0&&!In.get(n)&&(console.warn("Get unknown icon",n),In.set(n,!0)),e}function An(n,e){xn>1&&zn.get(n)&&console.warn("Redefine icon",n),zn.set(n,e)}function Ln(n){switch(n){case 0:case 1:case 2:xn=n;break;case"all":xn=2;break;case"get":xn=1;break;default:xn=0}}function Mn(e){var o;void 0===e&&(e={});var r=e.attr,l=e.size,i=e.title,s=a(e,wn),c=l||"1em",u="";e.class&&(u+=(u?u+" ":"")+e.class);var d=e.color?"color: "+e.color+"; ":"";return e.style&&(d+=e.style),(o=n.tagsNS("http://www.w3.org/2000/svg")).svg.apply(o,[t({stroke:"currentColor",fill:"currentColor","stroke-width":"0"},r,s,{class:u,style:d,height:c,width:c}),i?n.tagsNS("http://www.w3.org/2000/svg").title(i):null].concat([].slice.call(arguments,1)))}function En(e){function a(e){return e&&e.map(function(e,o){return n.tagsNS("http://www.w3.org/2000/svg")[e.tag](t({},e.attr),a(e.child))})}return"svg"===e.tag?function(o){var r;return void 0===o&&(o={}),(r=n.tagsNS("http://www.w3.org/2000/svg")).svg.apply(r,[t({},e.attr,o)].concat(a(e.child)))}:function(n){return void 0===n&&(n={}),Mn.apply(void 0,[t({},e.attr,n)].concat(a(e.child)))}}function Pn(e){var o=e.src,r=e.alt,l=a(e,kn);return function(e){var i=void 0===e?{}:e,s=i.size,c=void 0===s?"1em":s,u=i.style,d=void 0===u?"":u,v=a(i,Cn);return n.tags.img(t({src:o,alt:r||o.split("/").pop(),style:d+"width:"+c+"; height:"+c+";"},l,v))}}function jn(n,e){return void 0===e&&(e={}),function(t){var o=void 0===t?{}:t,r=o.size,l=void 0===r?"1em":r,i=a(o,Dn),s=document.createElement("div");return s.innerHTML=n,s=s.firstChild,i.width=l,i.height=l,Object.keys(e).forEach(function(n){return s.setAttribute(n,e[n])}),Object.keys(i).forEach(function(n){return s.setAttribute(n,i[n])}),s}}function Hn(e,o){var r=void 0===o?{}:o,l=r.size,i=a(r,Sn),s=On(e);if(s){if("function"==typeof s)return s(t({size:l},i));e=s}if("function"==typeof e)return i.size=l,e(t({},i));if("string"==typeof e&&e.startsWith("fa"))return void 0!==l&&(i.style=i.style=t({},i.style||{},{fontSize:l})),i.class=i.class?i.class+" "+e:e,n.tags.i(t({},i));if("string"==typeof e&&e.startsWith("<svg "))return jn(e)(t({size:l},i));if("string"==typeof e){if(void 0!==l){var c="font-size:"+l+";";i.style&&(c+=i.style),i.style=c}return n.tags.span(t({},i),e)}var u="width:"+(l=void 0===l?"1em":l)+"; height:"+l+"; min-width:"+l+";";return i.style&&(u+=i.style),i.style=u,n.tags.div(t({},i))}function Tn(n,e){var a={dragProps:function(n){return{draggable:!0,ondragstart:a.onDragStart,ondrop:a.onDrop,ondragover:a.onDragOver,ondragleave:a.onDragLeave,"data-position":n}},isDropArea:function(n){return a.dragAndDrop&&a.dragAndDrop.draggedTo===Number(n)},onDragStart:function(e){var o=Number(e.currentTarget.dataset.position);a.setDragAndDrop(t({},a.dragAndDrop,{draggedFrom:o,isDragging:!0,originalOrder:n})),e.dataTransfer.setData("text/html","")},onDragOver:function(n){n.preventDefault();var e=a.dragAndDrop.originalOrder,o=a.dragAndDrop.draggedFrom,r=Number(n.currentTarget.dataset.position),l=e[o],i=e.filter(function(n,e){return e!==o});e=[].concat(i.slice(0,r),[l],i.slice(r)),r!==a.dragAndDrop.draggedTo&&a.setDragAndDrop(t({},a.dragAndDrop,{updatedOrder:e,draggedTo:r}))},onDrop:function(n){e(a.dragAndDrop.updatedOrder),a.setDragAndDrop(t({},a.dragAndDrop,{draggedFrom:null,draggedTo:null,isDragging:!1}))},onDragLeave:function(){a.setDragAndDrop(t({},a.dragAndDrop,{draggedTo:null}))},dragAndDrop:{draggedFrom:null,draggedTo:null,isDragging:!1,originalOrder:[],updatedOrder:[]},setDragAndDrop:function(n){return a.dragAndDrop=n}};return a}zn.set("SPACE",function(n){return Hn(" ",t({},n))});var Nn=["value","commaValue","options","oninput","disabled","onContextMenu","dragSort","delIcon","orderIcon","allowCreate","multi","bsSize","closeOnCheck","tagColor","style","placeholder","loading","tabindex","icons","t"],Rn=["onChange"],Vn=["class","bsSize"],Fn=["class","bsSize"],Gn=["Enter"," ",","],Wn=function(n){return"string"==typeof n&&"-"===n[0]},Bn=function(n){return Wn(n)?n.substring(1):n},Kn=function(n){return Hn("🗙",n)},Un=function(n){return Hn("☒",n)},_n=function(n){return Hn("☐",n)},Xn=function(n){return Hn(jn('<svg viewBox="0 0 576 512"><path d="M183.6 42.4C177.5 35.8 169 32 160 32s-17.5 3.8-23.6 10.4l-88 96c-11.9 13-11.1 33.3 2 45.2s33.3 11.1 45.2-2L128 146.3V448c0 17.7 14.3 32 32 32s32-14.3 32-32V146.3l32.4 35.4c11.9 13 32.2 13.9 45.2 2s13.9-32.2 2-45.2l-88-96zM320 320c0 17.7 14.3 32 32 32h50.7l-73.4 73.4c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H429.3l73.4-73.4c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8H352c-17.7 0-32 14.3-32 32zM416 32c-12.1 0-23.2 6.8-28.6 17.7l-64 128-16 32c-7.9 15.8-1.5 35 14.3 42.9s35 1.5 42.9-14.3l7.2-14.3h88.4l7.2 14.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9l-16-32-64-128C439.2 38.8 428.1 32 416 32zM395.8 176L416 135.6 436.2 176H395.8z" /></svg>',t({style:"vertical-align: bottom;",fill:"currentColor",stroke:"currenColor"},n)))},Yn=function(n){return Hn(jn('<svg viewBox="0 0 576 512"><path d="M183.6 469.6C177.5 476.2 169 480 160 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L128 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 320c0-17.7 14.3-32 32-32H480c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9L429.3 416H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H352c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9L402.7 352H352c-17.7 0-32-14.3-32-32zM416 32c12.1 0 23.2 6.8 28.6 17.7l64 128 16 32c7.9 15.8 1.5 35-14.3 42.9s-35 1.5-42.9-14.3L460.2 224H371.8l-7.2 14.3c-7.9 15.8-27.1 22.2-42.9 14.3s-22.2-27.1-14.3-42.9l16-32 64-128C392.8 38.8 403.9 32 416 32zM395.8 176h40.4L416 135.6 395.8 176z" /></svg>',t({style:"vertical-align: bottom;",fill:"currentColor",stroke:"currenColor"},n)))},qn={remove:"remove",ascending:"ascending",descending:"descending",edplaceholder:"enter new tag"},Jn=n.tags,Qn=Jn.div,Zn=Jn.span;function $n(e){var o,r,l,i=e.value,s=e.commaValue,c=void 0===s||s,u=e.options,d=void 0===u?[]:u,v=e.oninput,p=e.disabled,f=e.onContextMenu,g=e.dragSort,m=void 0===g||g,h=e.delIcon,b=void 0===h?"none":h,y=e.orderIcon,w=void 0!==y&&y,k=e.allowCreate,C=void 0===k||k,D=e.multi,S=void 0===D||D,z=e.bsSize,x=void 0===z?"":z,I=e.closeOnCheck,O=void 0!==I&&I,A=e.tagColor,L=e.style,M=e.placeholder,E=e.loading,P=e.tabindex,j=void 0===P?0:P,H=e.icons,T=e.t,N=a(e,Nn);"string"==typeof(i=n.val(i))&&(i=i.split(",")),i&&Array.isArray(i)||(i=[]),i=i.filter(function(n){return n}),L=(null!=(o=L)?o:"")+" heigt: auto;";var R={items:n.state(i),listvalue:n.state(i),options:ae(d,i),disabled:p,onContextMenu:f,dragSort:m,delIcon:b,orderIcon:w,allowCreate:C,multi:S,closeOnCheck:O,bsSize:x,tagColor:A||"text-bg-primary",placeholder:M,loading:E,tabindex:j,icons:t({IconDelete:Kn,IconCheck:Un,IconUncheck:_n,IconAsc:Xn,IconDsc:Yn},H||{}),t:T||function(n){var e;return null!=(e=qn[n])?e:n},checkItem:function(n,e){n=Bn(n),this.saveItems(this.multi?e?[].concat(this.items.val,[n]):this.items.val.filter(function(e){return Bn(e)!==n}):e?[n]:[])},saveItems:function(n){this.items.val=n,!this.isOpen&&v&&(this.listvalue.val=n,v({target:{name:N.name,value:c?n.join(","):n,type:"tagedit"}}))},checkAll:function(n,e){this.multi?this.saveItems(e?[].concat(this.options.map(function(n){return n.value})):[]):this.checkItem(n,e)},onOrderClick:function(n,e){var t=this.items.val.indexOf(n),a=Wn(n);if(-1!==t&&e!==a){var o=[].concat(this.items.val);o[t]=e?"-"+n:n.substring(1),this.saveItems(o)}},newItem:function(n){n&&!this.items.val.some(function(e){return Bn(e)===n})&&(this.hideDropdown(),this.checkItem(n,!0))},showDropdown:function(){this.isOpen||this.toggleDropdown()},hideDropdown:function(){this.isOpen&&this.toggleDropdown()},toggleDropdown:function(){r.click()}};return r=V({dropdown:!0,disabled:p}),l=function(n){var e=n.tagData,t=e.options.map(function(n){return function(n){var e=n.tagData,t=n.item,a=e.multi&&!e.closeOnCheck?function(n){n.preventDefault(),n.stopPropagation()}:function(){},o=function(){return!!e.items.val.find(function(n){return Bn(n)===t.value})};return Q(""===t.value?{class:"py-0",divider:1}:{label:Qn({class:"d-flex align-items-center"},function(){return o()?e.icons.IconCheck({class:"me-1"}):e.icons.IconUncheck({class:"me-1"})},t.children),class:"py-0",onclick:function(n){a(n),n.ctrlKey?e.checkAll(t.value,!o()):e.checkItem(t.value,!o())},onkeydown:function(n){32===n.which&&(a(n),n.ctrlKey?e.checkAll(t.value,!o()):e.checkItem(t.value,!o()))}})}({tagData:e,item:n})});return e.allowCreate&&(t.unshift(Q({divider:1})),t.unshift(Q({text:!0,tag:"div",toggle:!1,label:ee({bsSize:e.bsSize,tabIndex:"0",placeholder:e.t("edplaceholder"),onChange:function(n){return e.newItem(n)}})}))),J.apply(void 0,t)}({tagData:R}),r.addEventListener("shown.bs.dropdown",function(n){R.isOpen=!0}),r.addEventListener("hidden.bs.dropdown",function(n){R.isOpen=!1,R.saveItems(R.items.val)}),function(e){var o=void 0===e?{}:e,r=o.class,l=o.bsSize,i=a(o,Fn);return Qn.apply(void 0,[t({class:function(){var e="input-group";return n.val(l)&&(e+=" input-group-"+n.val(l)),n.val(r)&&(e+=" "+n.val(r)),e}},i)].concat([].slice.call(arguments,1)))}(t({bsSize:x},N,{style:L}),ne({tagData:R}),r,l)}function ne(e){var a=e.tagData;if(n.val(a.loading))return te({},Qn({class:"spinner-border spinner-border-sm "+a.tagColor.replace("-bg",""),role:"status"},Zn({class:"visually-hidden"},"Loading...")));var o=!(!a.dragSort||!a.multi||a.disabled)&&Tn(a.listvalue.val,function(n){return a.saveItems(n)}),r=a.listvalue.val.map(function(n,e){return function(n){var e,a,o,r=n.tagData,l=n.item,i=n.idx,s=n.drag,c=(e=r.options,a=Bn(l),(o=e.find(function(n){return n.value===a}))&&(a=o.children),a),u={class:"badge "+r.tagColor+" me-1 my-1",style:"fontSize: 90%;"};s&&(u=t({},u,{style:u.style+"cursor: grab;"},s.dragProps(i)));var d,v=function(n){return Qn({class:n,role:"button",title:r.t("remove"),onclick:function(n){n.preventDefault(),n.stopPropagation(),r.checkItem(l,!1)}},r.icons.IconDelete)},p=[];return"left"===r.delIcon&&p.push(v("me-1")),p.push(c),r.orderIcon&&p.push((d=Wn(l),Qn({class:"ms-1",role:"button",title:r.t(d?"descending":"ascending"),onclick:function(n){n.preventDefault(),n.stopPropagation(),r.onOrderClick(l,!d)}},d?r.icons.IconDsc:r.icons.IconAsc))),"right"===r.delIcon&&p.push(v("ms-1")),Zn(t({},u),Qn.apply(void 0,[{class:"d-flex"}].concat(p)))}({tagData:a,item:n,idx:e,drag:o})});return 0===r.length&&a.placeholder&&(r="string"==typeof a.placeholder?[Zn({class:"text-muted"},a.placeholder)]:[placeholder]),te.apply(void 0,[{tabindex:a.tabindex,onclick:function(n){n.preventDefault(),n.stopPropagation(),a.toggleDropdown()}}].concat(r))}function ee(n){var e=n.onChange,t=a(n,Rn),o="";return O({type:"text",value:o,bsSize:t.bsSize,placeholder:t.placeholder,oninput:function(n){o=n.target.value},onblur:function(){e(o)},onkeypress:function(n){Gn.includes(n.key)&&(n.preventDefault(),n.stopPropagation(),e(o),o="")}})}function te(e){var o=void 0===e?{}:e,r=o.class,l=o.bsSize,i=a(o,Vn);return Qn.apply(void 0,[t({class:function(){var e="form-control";return n.val(l)&&(e+=" form-control-"+n.val(l)),n.val(r)&&(e+=" "+n.val(r)),e}},i)].concat([].slice.call(arguments,1)))}function ae(n,e){return n=l(n),e.forEach(function(e){e=Bn(e),n.find(function(n){return n.value===e})||n.unshift({value:e,children:e,key:e})}),n}var oe="vanjs-bootstrap 1.0.3 LICENSE MIT (c) 2023 by Geoffrey Emmans";export{V as Button,P as CheckboxInput,Y as CloseButton,H as ComboboxInput,$ as ContextMenu,Tn as DragSort,J as DropdownMenu,R as FormBuilder,M as FormCheckInput,N as FormController,T as FormGroup,I as FormLabel,En as GenIcon,bn as I18n,Hn as Icon,Pn as ImgIcon,O as Input,Q as MenuItem,X as Modal,_ as ModalFrame,gn as NavItem,mn as NavLink,hn as NavMenu,fn as Navbar,Z as PopupMenu,q as PopupMenuFrame,j as RadioInput,L as RadioSelectInput,A as SelectInput,Mn as SvgIconBase,jn as SvgStrIcon,E as SwitchInput,$n as TagInput,On as getIcon,zn as iconMap,l as selectOptions,An as setIcon,Ln as setWarning,x as typeMap,oe as version};
//# sourceMappingURL=lib.module.mjs.map
